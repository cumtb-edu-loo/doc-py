# Python 3.8 æœ‰ä»€ä¹ˆæ–°å˜åŒ–Â¶

ç¼–è€…:

    

~~~
Raymond Hettingerï¼ˆè¯‘è€…ï¼šwh2099 at outlook dot comï¼‰

è¿™ç¯‡æ–‡ç« ä»‹ç»äº† Python 3.8 ç›¸æ¯” 3.7 å¢åŠ çš„æ–°ç‰¹æ€§ã€‚ Python 3.8 å‘å¸ƒäº 2019 å¹´ 10 æœˆ 14 æ—¥ã€‚ æ›´è¯¦ç»†çš„ä¿¡æ¯å¯å‚é˜… [æ›´æ–°æ—¥å¿—](changelog.md#changelog)ã€‚

## æ‘˜è¦ -- å‘å¸ƒé‡ç‚¹Â¶

## æ–°çš„ç‰¹æ€§Â¶

### èµ‹å€¼è¡¨è¾¾å¼Â¶

æ–°å¢çš„è¯­æ³• `:=` å¯åœ¨è¡¨è¾¾å¼å†…éƒ¨ä¸ºå˜é‡èµ‹å€¼ã€‚ å®ƒè¢«æ˜µç§°ä¸ºâ€œæµ·è±¡è¿ç®—ç¬¦â€å› ä¸ºå®ƒå¾ˆåƒæ˜¯ [æµ·è±¡çš„çœ¼ç›å’Œé•¿ç‰™](https://en.wikipedia.org/wiki/Walrus#/media/File:Pacific_Walrus_-_Bull_\(8247646168\).jpg)ã€‚

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œèµ‹å€¼è¡¨è¾¾å¼å¯ä»¥é¿å…è°ƒç”¨ [`len()`](../library/functions.md#len "len") ä¸¤æ¬¡:
~~~
    
    
~~~
if (n := len(a)) > 10:
    print(f"List is too long ({n} elements, expected <= 10)")
~~~

ç±»ä¼¼çš„ç›Šå¤„è¿˜å¯å‡ºç°åœ¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä¸­éœ€è¦ä½¿ç”¨ä¸¤æ¬¡åŒ¹é…å¯¹è±¡çš„æƒ…å†µä¸­ï¼Œä¸€æ¬¡æ£€æµ‹ç”¨äºåŒ¹é…æ˜¯å¦å‘ç”Ÿï¼Œå¦ä¸€æ¬¡ç”¨äºæå–å­åˆ†ç»„:

    
    
~~~
discount = 0.0
if (mo := re.search(r'(\d+)% discount', advertisement)):
    discount = float(mo.group(1)) / 100.0
~~~

æ­¤è¿ç®—ç¬¦ä¹Ÿé€‚ç”¨äºé…åˆ while å¾ªç¯è®¡ç®—ä¸€ä¸ªå€¼æ¥æ£€æµ‹å¾ªç¯æ˜¯å¦ç»ˆæ­¢ï¼Œè€ŒåŒä¸€ä¸ªå€¼åˆåœ¨å¾ªç¯ä½“ä¸­å†æ¬¡è¢«ä½¿ç”¨çš„æƒ…å†µ:

    
    
~~~
# Loop over fixed length blocks
while (block := f.read(256)) != '':
    process(block)
~~~

å¦ä¸€ä¸ªå€¼å¾—ä»‹ç»çš„ç”¨ä¾‹å‡ºç°äºåˆ—è¡¨æ¨å¯¼å¼ä¸­ï¼Œåœ¨ç­›é€‰æ¡ä»¶ä¸­è®¡ç®—ä¸€ä¸ªå€¼ï¼Œè€ŒåŒä¸€ä¸ªå€¼åˆåœ¨è¡¨è¾¾å¼ä¸­éœ€è¦è¢«ä½¿ç”¨:

    
    
~~~
[clean_name.title() for name in names
 if (clean_name := normalize('NFC', name)) in allowed_names]
~~~

è¯·å°½é‡å°†æµ·è±¡è¿ç®—ç¬¦çš„ä½¿ç”¨é™åˆ¶åœ¨æ¸…æ™°çš„åœºåˆä¸­ï¼Œä»¥é™ä½å¤æ‚æ€§å¹¶æå‡å¯è¯»æ€§ã€‚

è¯·å‚é˜… [**PEP 572**](https://peps.python.org/pep-0572/) äº†è§£è¯¦æƒ…ã€‚

ï¼ˆç”± Morehouse åœ¨ [bpo-35224](https://bugs.python.org/issue?@action=redirect&bpo=35224) ä¸­è´¡çŒ®ã€‚ï¼‰

### ä»…é™ä½ç½®å½¢å‚Â¶

æ–°å¢äº†ä¸€ä¸ªå‡½æ•°å½¢å‚è¯­æ³• `/` ç”¨æ¥æŒ‡æ˜æŸäº›å‡½æ•°å½¢å‚å¿…é¡»ä¸ºä»…é™ä½ç½®è€Œéå…³é”®å­—å‚æ•°ã€‚ è¿™ç§æ ‡è®°è¯­æ³•ä¸é€šè¿‡ `help()` æ‰€æ˜¾ç¤ºçš„ä½¿ç”¨ Larry Hastings çš„ [Argument Clinic](16.Argument%20Clinic%20çš„ç”¨æ³•.md#howto-clinic) å·¥å…·æ ‡è®°çš„ C å‡½æ•°ç›¸åŒã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå½¢å‚ _a_ å’Œ _b_ ä¸ºä»…é™ä½ç½®å½¢å‚ï¼Œ _c_ æˆ– _d_ å¯ä»¥æ˜¯ä½ç½®å½¢å‚æˆ–å…³é”®å­—å½¢å‚ï¼Œè€Œ _e_ æˆ– _f_ è¦æ±‚ä¸ºå…³é”®å­—å½¢å‚:

    
    
~~~python
def f(a, b, /, c, d, *, e, f):
    print(a, b, c, d, e, f)
~~~

ä»¥ä¸‹å‡ä¸ºåˆæ³•çš„è°ƒç”¨:

    
    
~~~
f(10, 20, 30, d=40, e=50, f=60)
~~~

ä½†æ˜¯ï¼Œä»¥ä¸‹å‡ä¸ºä¸åˆæ³•çš„è°ƒç”¨:

    
    
~~~
f(10, b=20, c=30, d=40, e=50, f=60)   # b cannot be a keyword argument
f(10, 20, 30, 40, 50, f=60)           # e must be a keyword argument
~~~

è¿™ç§æ ‡è®°å½¢å¼çš„ä¸€ä¸ªç”¨ä¾‹æ˜¯å®ƒå…è®¸çº¯ Python å‡½æ•°å®Œæ•´æ¨¡æ‹Ÿç°æœ‰çš„ç”¨ C ä»£ç ç¼–å†™çš„å‡½æ•°çš„è¡Œä¸ºã€‚ ä¾‹å¦‚ï¼Œå†…ç½®çš„ [`divmod()`](functions.md#divmod "divmod") å‡½æ•°ä¸æ¥å—å…³é”®å­—å‚æ•°:

    
    
~~~python
def divmod(a, b, /):
    "Emulate the built in divmod() function"
    return (a // b, a % b)
~~~

å¦ä¸€ä¸ªç”¨ä¾‹æ˜¯åœ¨ä¸éœ€è¦å½¢å‚åç§°æ—¶æ’é™¤å…³é”®å­—å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œå†…ç½®çš„ [`len()`](functions.md#len "len") å‡½æ•°çš„ç­¾åä¸º `len(obj, /)`ã€‚ è¿™å¯ä»¥æ’é™¤å¦‚ä¸‹è¿™ç§ç¬¨æ‹™çš„è°ƒç”¨å½¢å¼:

    
    
~~~
len(obj='hello')  # The "obj" keyword argument impairs readability
~~~

å¦ä¸€ä¸ªç›Šå¤„æ˜¯å°†å½¢å‚æ ‡è®°ä¸ºä»…é™ä½ç½®å½¢å‚å°†å…è®¸åœ¨æœªæ¥ä¿®æ”¹å½¢å‚åè€Œä¸ä¼šç ´åå®¢æˆ·çš„ä»£ç ã€‚ ä¾‹å¦‚ï¼Œåœ¨ [`statistics`](statistics.md#module-statistics "statistics: Mathematical statistics functions") æ¨¡å—ä¸­ï¼Œå½¢å‚å _dist_ åœ¨æœªæ¥å¯èƒ½è¢«ä¿®æ”¹ã€‚ è¿™ä½¿å¾—ä»¥ä¸‹å‡½æ•°æè¿°æˆä¸ºå¯èƒ½:

    
    
~~~python
def quantiles(dist, /, *, n=4, method='exclusive')
    ...
~~~

ç”±äºåœ¨ `/` å·¦ä¾§çš„å½¢å‚ä¸ä¼šè¢«å…¬å¼€ä¸ºå¯ç”¨å…³é”®å­—ï¼Œå…¶ä»–å½¢å‚åä»å¯åœ¨ `**kwargs` ä¸­ä½¿ç”¨:

    
    
~~~shell
>>> def f(a, b, /, **kwargs):
...     print(a, b, kwargs)
...
>>> f(10, 20, a=1, b=2, c=3)         # a and b are used in two ways
10 20 {'a': 1, 'b': 2, 'c': 3}
~~~

è¿™æå¤§åœ°ç®€åŒ–äº†éœ€è¦æ¥å—ä»»æ„å…³é”®å­—å‚æ•°çš„å‡½æ•°å’Œæ–¹æ³•çš„å®ç°ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€æ®µæ‘˜è‡ª [`collections`](collections.md#module-collections "collections: Container datatypes") æ¨¡å—çš„ä»£ç :

    
    
~~~
class Counter(dict):

    def __init__(self, iterable=None, /, **kwds):
        # Note "iterable" is a possible keyword argument
~~~

è¯·å‚é˜… [**PEP 570**](https://peps.python.org/pep-0570/) äº†è§£è¯¦æƒ…ã€‚

ï¼ˆç”± Pablo Galindo åœ¨ [bpo-36540](https://bugs.python.org/issue?@action=redirect&bpo=36540) ä¸­è´¡çŒ®ã€‚ï¼‰

### ç”¨äºå·²ç¼–è¯‘å­—èŠ‚ç æ–‡ä»¶çš„å¹¶è¡Œæ–‡ä»¶ç³»ç»Ÿç¼“å­˜Â¶

æ–°å¢çš„ [`PYTHONPYCACHEPREFIX`](1.%20å‘½ä»¤è¡Œä¸ç¯å¢ƒ.md#envvar-PYTHONPYCACHEPREFIX) è®¾ç½® (ä¹Ÿå¯ä½¿ç”¨ [`-X`](1.%20å‘½ä»¤è¡Œä¸ç¯å¢ƒ.md#cmdoption-X) `pycache_prefix`) å¯å°†éšå¼çš„å­—èŠ‚ç ç¼“å­˜é…ç½®ä¸ºä½¿ç”¨å•ç‹¬çš„å¹¶è¡Œæ–‡ä»¶ç³»ç»Ÿæ ‘ï¼Œè€Œä¸æ˜¯é»˜è®¤çš„æ¯ä¸ªæºä»£ç ç›®å½•ä¸‹çš„ `__pycache__` å­ç›®å½•ã€‚

ç¼“å­˜çš„ä½ç½®ä¼šåœ¨ [`sys.pycache_prefix`](3.æ ‡å‡†åº“/sys.md#sys.pycache_prefix "sys.pycache_prefix") ä¸­æŠ¥å‘Š ([`None`](constants.md#None "None") è¡¨ç¤ºé»˜è®¤ä½ç½®å³ `__pycache__` å­ç›®å½•)ã€‚

ï¼ˆç”± Carl Meyer åœ¨ [bpo-33499](https://bugs.python.org/issue?@action=redirect&bpo=33499) ä¸­è´¡çŒ®ã€‚ï¼‰

### è°ƒè¯•æ„å»ºä½¿ç”¨ä¸å‘å¸ƒæ„å»ºç›¸åŒçš„ ABIÂ¶

Python ç°åœ¨ä¸è®ºæ˜¯ä»¥å‘å¸ƒæ¨¡å¼è¿˜æ˜¯è°ƒè¯•æ¨¡å¼è¿›è¡Œæ„å»ºéƒ½å°†ä½¿ç”¨ç›¸åŒçš„ ABIã€‚ åœ¨ Unix ä¸Šï¼Œå½“ Python ä»¥è°ƒè¯•æ¨¡å¼æ„å»ºæ—¶ï¼Œç°åœ¨å°†å¯ä»¥åŠ è½½ä»¥å‘å¸ƒæ¨¡å¼æ„å»ºçš„ C æ‰©å±•å’Œä½¿ç”¨ç¨³å®šç‰ˆ ABI æ„å»ºçš„ C æ‰©å±•ã€‚

å‘å¸ƒç¼–è¯‘ç‰ˆå’Œ [è°ƒè¯•ç¼–è¯‘ç‰ˆ](3.%20é…ç½®%20Python.md#debug-build) ç°åœ¨éƒ½æ˜¯ ABI å…¼å®¹çš„ï¼šå®šä¹‰ `Py_DEBUG` å®ä¸ä¼šå†åº”ç”¨ `Py_TRACE_REFS` å®ï¼Œå®ƒå¼•å…¥ äº†å”¯ä¸€çš„ ABI ä¸å…¼å®¹æ€§ã€‚ `Py_TRACE_REFS` å®æ·»åŠ äº† `sys.getobjects()` å‡½æ•°å’Œ [`PYTHONDUMPREFS`](1.%20å‘½ä»¤è¡Œä¸ç¯å¢ƒ.md#envvar-PYTHONDUMPREFS) ç¯å¢ƒå˜é‡ï¼Œå®ƒå¯ä»¥ä½¿ç”¨æ–°çš„ [`./configure --with-trace-refs`](3.%20é…ç½®%20Python.md#cmdoption-with-trace-refs) ç¼–è¯‘é€‰é¡¹æ¥è®¾ç½®ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-36465](https://bugs.python.org/issue?@action=redirect&bpo=36465) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨ Unix ä¸Šï¼ŒC æ‰©å±•ä¸ä¼šå†è¢«é“¾æ¥åˆ° libpythonï¼Œä½† Android å’Œ Cygwin ä¾‹å¤–ã€‚ ç°åœ¨é™æ€é“¾æ¥çš„ Python å°†å¯ä»¥åŠ è½½ä½¿ç”¨å…±äº«åº“ Python æ„å»ºçš„ C æ‰©å±•ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-21536](https://bugs.python.org/issue?@action=redirect&bpo=21536) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨ Unix ä¸Šï¼Œå½“ Python ä»¥è°ƒè¯•æ¨¡å¼æ„å»ºæ—¶ï¼Œå¯¼å…¥æ“ä½œç°åœ¨ä¹Ÿä¼šæŸ¥æ‰¾åœ¨å‘å¸ƒæ¨¡å¼ä¸‹ç¼–è¯‘çš„ C æ‰©å±•ä»¥åŠä½¿ç”¨ç¨³å®šç‰ˆ ABI ç¼–è¯‘çš„ C æ‰©å±•ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-36722](https://bugs.python.org/issue?@action=redirect&bpo=36722) ä¸­è´¡çŒ®ã€‚ï¼‰

è¦å°† Python åµŒå…¥åˆ°ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œå¿…é¡»å°†æ–°å¢çš„ `--embed` é€‰é¡¹ä¼ ç»™ `python3-config --libs --embed` ä»¥è·å¾— `-lpython3.8` (å°†åº”ç”¨é“¾æ¥åˆ° libpython)ã€‚ è¦åŒæ—¶æ”¯æŒ 3.8 å’Œæ—§ç‰ˆæœ¬ï¼Œè¯·å…ˆå°è¯• `python3-config --libs --embed` å¹¶åœ¨æ­¤å‘½ä»¤å¤±è´¥æ—¶å›é€€åˆ° `python3-config --libs` (å³ä¸å¸¦ `--embed`)ã€‚

å¢åŠ ä¸€ä¸ª pkg-config `python-3.8-embed` æ¨¡å—ç”¨æ¥å°† Python åµŒå…¥åˆ°ä¸€ä¸ªåº”ç”¨ä¸­: `pkg-config python-3.8-embed --libs` åŒ…å« `-lpython3.8`ã€‚ è¦åŒæ—¶æ”¯æŒ 3.8 å’Œæ—§ç‰ˆæœ¬ï¼Œè¯·å…ˆå°è¯• `pkg-config python-X.Y-embed --libs` å¹¶åœ¨æ­¤å‘½ä»¤å¤±è´¥æ—¶å›é€€åˆ° `pkg-config python-X.Y --libs` (å³ä¸å¸¦ `--embed`) ï¼ˆè¯·å°† `X.Y` æ›¿æ¢ä¸º Python ç‰ˆæœ¬å·ï¼‰ã€‚

å¦ä¸€æ–¹é¢ï¼Œ`pkg-config python3.8 --libs` ä¸å†åŒ…å« `-lpython3.8`ã€‚ C æ‰©å±•ä¸å¯è¢«é“¾æ¥åˆ° libpython (ä½† Android å’Œ Cygwin ä¾‹å¤–ï¼Œè¿™ä¸¤è€…çš„æƒ…å†µç”±è„šæœ¬å¤„ç†)ï¼›æ­¤æ”¹å˜æ˜¯æ•…æ„è¢«è®¾ä¸ºå‘ä¸‹ä¸å…¼å®¹çš„ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-36721](https://bugs.python.org/issue?@action=redirect&bpo=36721) ä¸­è´¡çŒ®ã€‚ï¼‰

### f-å­—ç¬¦ä¸²æ”¯æŒ `=` ç”¨äºè‡ªåŠ¨è®°å½•è¡¨è¾¾å¼å’Œè°ƒè¯•æ–‡æ¡£Â¶

å¢åŠ  `=` è¯´æ˜ç¬¦ç”¨äº [f-string](../glossary.md#term-f-string)ã€‚ å½¢å¼ä¸º `f'{expr=}'` çš„ f-å­—ç¬¦ä¸²å°†æ‰©å±•è¡¨ç¤ºä¸ºè¡¨è¾¾å¼æ–‡æœ¬ï¼ŒåŠ ä¸€ä¸ªç­‰äºå·ï¼Œå†åŠ è¡¨è¾¾å¼çš„æ±‚å€¼ç»“æœã€‚ ä¾‹å¦‚ï¼š

    
    
~~~shell
>>> user = 'eric_idle'
>>> member_since = date(1975, 7, 31)
>>> f'{user=} {member_since=}'
"user='eric_idle' member_since=datetime.date(1975, 7, 31)"
~~~

é€šå¸¸çš„ [f-å­—ç¬¦ä¸²æ ¼å¼è¯´æ˜ç¬¦](2.%20è¯æ³•åˆ†æ.md#f-strings) å…è®¸æ›´ç»†è‡´åœ°æ§åˆ¶æ‰€è¦æ˜¾ç¤ºçš„è¡¨è¾¾å¼ç»“æœ:

    
    
~~~shell
>>> delta = date.today() - member_since
>>> f'{user=!s}  {delta.days=:,d}'
'user=eric_idle  delta.days=16,075'
~~~

`=` è¯´æ˜ç¬¦å°†è¾“å‡ºæ•´ä¸ªè¡¨è¾¾å¼ï¼Œä»¥ä¾¿è¯¦ç»†æ¼”ç¤ºè®¡ç®—è¿‡ç¨‹:

    
    
~~~shell
>>> print(f'{theta=}  {cos(radians(theta))=:.3f}')
theta=30  cos(radians(theta))=0.866
~~~

ï¼ˆç”± Eric V. Smith å’Œ Larry Hastings åœ¨ [bpo-36817](https://bugs.python.org/issue?@action=redirect&bpo=36817) ä¸­è´¡çŒ®ã€‚ï¼‰

### PEP 578: Python è¿è¡Œæ—¶å®¡æ ¸é’©å­Â¶

æ­¤ PEP æ·»åŠ äº†å®¡æ ¸é’©å­å’Œå·²éªŒè¯å¼€æ”¾é’©å­ã€‚ ä¸¤è€…åœ¨ Python ä¸æœ¬æœºä»£ç ä¸­å‡å¯ç”¨ã€‚å…è®¸ä»¥çº¯ Python ä»£ç ç¼–å†™çš„åº”ç”¨å’Œæ¡†æ¶åˆ©ç”¨é¢å¤–çš„é€šçŸ¥ï¼ŒåŒæ—¶å…è®¸åµŒå…¥å¼€å‘äººå‘˜æˆ–ç³»ç»Ÿç®¡ç†å‘˜éƒ¨ç½²å§‹ç»ˆå¯ç”¨å®¡æ ¸çš„ Python ç‰ˆæœ¬ã€‚

è¯·å‚é˜… [**PEP 578**](https://peps.python.org/pep-0578/) äº†è§£è¯¦æƒ…ã€‚

### PEP 587: Python åˆå§‹åŒ–é…ç½®Â¶

[**PEP 587**](https://peps.python.org/pep-0587/) å¢åŠ äº†ä¸€ä¸ªæ–°çš„ C API ç”¨æ¥é…ç½® Python åˆå§‹åŒ–ï¼Œæä¾›å¯¹æ•´ä¸ªé…ç½®è¿‡ç¨‹çš„æ›´ç»†è‡´æ§åˆ¶ä»¥åŠæ›´å¥½çš„é”™è¯¯æŠ¥å‘Šã€‚

æ–°çš„ç»“æ„ï¼š

  * [`PyConfig`](init_config.md#c.PyConfig "PyConfig")

  * [`PyPreConfig`](init_config.md#c.PyPreConfig "PyPreConfig")

  * [`PyStatus`](init_config.md#c.PyStatus "PyStatus")

  * [`PyWideStringList`](init_config.md#c.PyWideStringList "PyWideStringList")

æ–°çš„å‡½æ•°ï¼š

  * [`PyConfig_Clear()`](init_config.md#c.PyConfig_Clear "PyConfig_Clear")

  * [`PyConfig_InitIsolatedConfig()`](init_config.md#c.PyConfig_InitIsolatedConfig "PyConfig_InitIsolatedConfig")

  * [`PyConfig_InitPythonConfig()`](init_config.md#c.PyConfig_InitPythonConfig "PyConfig_InitPythonConfig")

  * [`PyConfig_Read()`](init_config.md#c.PyConfig_Read "PyConfig_Read")

  * [`PyConfig_SetArgv()`](init_config.md#c.PyConfig_SetArgv "PyConfig_SetArgv")

  * [`PyConfig_SetBytesArgv()`](init_config.md#c.PyConfig_SetBytesArgv "PyConfig_SetBytesArgv")

  * [`PyConfig_SetBytesString()`](init_config.md#c.PyConfig_SetBytesString "PyConfig_SetBytesString")

  * [`PyConfig_SetString()`](init_config.md#c.PyConfig_SetString "PyConfig_SetString")

  * [`PyPreConfig_InitIsolatedConfig()`](init_config.md#c.PyPreConfig_InitIsolatedConfig "PyPreConfig_InitIsolatedConfig")

  * [`PyPreConfig_InitPythonConfig()`](init_config.md#c.PyPreConfig_InitPythonConfig "PyPreConfig_InitPythonConfig")

  * [`PyStatus_Error()`](init_config.md#c.PyStatus_Error "PyStatus_Error")

  * [`PyStatus_Exception()`](init_config.md#c.PyStatus_Exception "PyStatus_Exception")

  * [`PyStatus_Exit()`](init_config.md#c.PyStatus_Exit "PyStatus_Exit")

  * [`PyStatus_IsError()`](init_config.md#c.PyStatus_IsError "PyStatus_IsError")

  * [`PyStatus_IsExit()`](init_config.md#c.PyStatus_IsExit "PyStatus_IsExit")

  * [`PyStatus_NoMemory()`](init_config.md#c.PyStatus_NoMemory "PyStatus_NoMemory")

  * [`PyStatus_Ok()`](init_config.md#c.PyStatus_Ok "PyStatus_Ok")

  * [`PyWideStringList_Append()`](init_config.md#c.PyWideStringList_Append "PyWideStringList_Append")

  * [`PyWideStringList_Insert()`](init_config.md#c.PyWideStringList_Insert "PyWideStringList_Insert")

  * [`Py_BytesMain()`](veryhigh.md#c.Py_BytesMain "Py_BytesMain")

  * [`Py_ExitStatusException()`](init_config.md#c.Py_ExitStatusException "Py_ExitStatusException")

  * [`Py_InitializeFromConfig()`](init_config.md#c.Py_InitializeFromConfig "Py_InitializeFromConfig")

  * [`Py_PreInitialize()`](init_config.md#c.Py_PreInitialize "Py_PreInitialize")

  * [`Py_PreInitializeFromArgs()`](init_config.md#c.Py_PreInitializeFromArgs "Py_PreInitializeFromArgs")

  * [`Py_PreInitializeFromBytesArgs()`](init_config.md#c.Py_PreInitializeFromBytesArgs "Py_PreInitializeFromBytesArgs")

  * [`Py_RunMain()`](init_config.md#c.Py_RunMain "Py_RunMain")

æ­¤ PEP è¿˜ä¸ºè¿™äº›å†…éƒ¨ç»“æ„æ·»åŠ äº† `_PyRuntimeState.preconfig` ([`PyPreConfig`](init_config.md#c.PyPreConfig "PyPreConfig") ç±»å‹) å’Œ `PyInterpreterState.config` ([`PyConfig`](init_config.md#c.PyConfig "PyConfig") ç±»å‹) å­—æ®µã€‚ `PyInterpreterState.config` æˆä¸ºæ–°çš„å¼•ç”¨é…ç½®ï¼Œæ›¿ä»£å…¨å±€é…ç½®å˜é‡å’Œå…¶ä»–ç§æœ‰å˜é‡ã€‚

è¯·å‚é˜… [Python åˆå§‹åŒ–é…ç½®](init_config.md#init-config) è·å–è¯¦ç»†æ–‡æ¡£ã€‚

è¯·å‚é˜… [**PEP 587**](https://peps.python.org/pep-0587/) äº†è§£è¯¦æƒ…ã€‚

ï¼ˆç”± Victor Stinner åœ¨ [bpo-36763](https://bugs.python.org/issue?@action=redirect&bpo=36763) ä¸­è´¡çŒ®ã€‚ï¼‰

### PEP 590: Vectorcall: ç”¨äº CPython çš„å¿«é€Ÿè°ƒç”¨åè®®Â¶

å°† [Vectorcall åè®®](call.md#vectorcall) æ·»åŠ åˆ° Python/C APIã€‚ å®ƒçš„ç›®æ ‡æ˜¯å¯¹å·²è¢«åº”ç”¨äºå¤šä¸ªç±»çš„ç°æœ‰ä¼˜å…ˆè¿›è¡Œæ­£å¼åŒ–ã€‚ ä»»ä½•å®ç°äº†å¯è°ƒç”¨å¯¹è±¡çš„ [é™æ€ç±»å‹](typeobj.md#static-types) å‡å¯ä½¿ç”¨æ­¤åè®®ã€‚

æ­¤ç‰¹æ€§ç›®å‰ä¸ºæš‚å®šçŠ¶æ€ï¼Œè®¡åˆ’åœ¨ Python 3.9 å°†å…¶å®Œå…¨å…¬å¼€ã€‚

è¯·å‚é˜… [**PEP 590**](https://peps.python.org/pep-0590/) äº†è§£è¯¦æƒ…ã€‚

ï¼ˆç”± Jeroen Demeyer, Mark Shannon å’Œ Petr Viktorin åœ¨ [bpo-36974](https://bugs.python.org/issue?@action=redirect&bpo=36974) ä¸­è´¡çŒ®ã€‚ï¼‰

### å…·æœ‰å¤–éƒ¨æ•°æ®ç¼“å†²åŒºçš„ pickle åè®® 5Â¶

å½“ä½¿ç”¨ [`pickle`](pickle.md#module-pickle "pickle: Convert Python objects to streams of bytes and back.") åœ¨ Python è¿›ç¨‹é—´ä¼ è¾“å¤§é‡æ•°æ®ä»¥å……åˆ†å‘æŒ¥å¤šæ ¸æˆ–å¤šæœºå¤„ç†çš„ä¼˜åŠ¿æ—¶ï¼Œéå¸¸é‡è¦ä¸€ç‚¹æ˜¯é€šè¿‡å‡å°‘å†…å­˜æ‹·è´æ¥ä¼˜åŒ–ä¼ è¾“æ•ˆç‡ï¼Œå¹¶å¯èƒ½åº”ç”¨ä¸€äº›å®šåˆ¶æŠ€å·§ä¾‹å¦‚é’ˆå¯¹ç‰¹å®šæ•°æ®çš„å‹ç¼©ã€‚

[`pickle`](pickle.md#module-pickle "pickle: Convert Python objects to streams of bytes and back.") åè®® 5 å¼•å…¥äº†å¯¹äºå¤–éƒ¨ç¼“å†²åŒºçš„æ”¯æŒï¼Œè¿™æ · [**PEP 3118**](https://peps.python.org/pep-3118/) å…¼å®¹çš„æ•°æ®å¯ä»¥ä¸ä¸» pickle æµåˆ†å¼€è¿›è¡Œä¼ è¾“ï¼Œè¿™æ˜¯ç”±é€šä¿¡å±‚æ¥ç¡®å®šçš„ã€‚

è¯·å‚é˜… [**PEP 574**](https://peps.python.org/pep-0574/) äº†è§£è¯¦æƒ…ã€‚

ï¼ˆç”± Antoine Pitrou åœ¨ [bpo-36785](https://bugs.python.org/issue?@action=redirect&bpo=36785) ä¸­è´¡çŒ®ã€‚ï¼‰

## å…¶ä»–è¯­è¨€ç‰¹æ€§ä¿®æ”¹Â¶

  * åœ¨ä¹‹å‰ç‰ˆæœ¬ä¸­ [`continue`](7.%20ç®€å•è¯­å¥.md#continue) è¯­å¥ä¸å…è®¸åœ¨ [`finally`](8.%20å¤åˆè¯­å¥.md#finally) å­å¥ä¸­ä½¿ç”¨ï¼Œè¿™æ˜¯å› ä¸ºå…·ä½“å®ç°å­˜åœ¨ä¸€ä¸ªé—®é¢˜ã€‚ åœ¨ Python 3.8 ä¸­æ­¤é™åˆ¶å·²è¢«å–æ¶ˆã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-32489](https://bugs.python.org/issue?@action=redirect&bpo=32489) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`bool`](functions.md#bool "bool"), [`int`](functions.md#int "int") å’Œ [`fractions.Fraction`](fractions.md#fractions.Fraction "fractions.Fraction") ç±»å‹ç°åœ¨éƒ½æœ‰ä¸€ä¸ª [`as_integer_ratio()`](stdtypes.md#int.as_integer_ratio "int.as_integer_ratio") æ–¹æ³•ï¼Œä¸ [`float`](functions.md#float "float") å’Œ [`decimal.Decimal`](decimal.md#decimal.Decimal "decimal.Decimal") ä¸­çš„å·²æœ‰æ–¹æ³•ç±»ä¼¼ã€‚ è¿™ä¸ªå¾®å°çš„ API æ‰©å±•ä½¿å¾— `numerator, denominator = x.as_integer_ratio()` è¿™æ ·çš„å†™æ³•åœ¨å¤šç§æ•°å­—ç±»å‹ä¸Šé€šç”¨æˆä¸ºå¯èƒ½ã€‚ ï¼ˆç”± Lisa Roach åœ¨ [bpo-33073](https://bugs.python.org/issue?@action=redirect&bpo=33073) å’Œ Raymond Hettinger åœ¨ [bpo-37819](https://bugs.python.org/issue?@action=redirect&bpo=37819) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`int`](functions.md#int "int"), [`float`](functions.md#float "float") å’Œ [`complex`](functions.md#complex "complex") çš„æ„é€ å™¨ç°åœ¨ä¼šä½¿ç”¨ [`__index__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__index__ "object.__index__") ç‰¹æ®Šæ–¹æ³•ï¼Œå¦‚æœè¯¥æ–¹æ³•å¯ç”¨è€Œå¯¹åº”çš„æ–¹æ³• method [`__int__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__int__ "object.__int__"), [`__float__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__float__ "object.__float__") æˆ– [`__complex__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__complex__ "object.__complex__") æ–¹æ³•ä¸å¯ç”¨çš„è¯ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-20092](https://bugs.python.org/issue?@action=redirect&bpo=20092) ä¸­è´¡çŒ®ã€‚ï¼‰

  * æ·»åŠ  `\N{name}` è½¬ä¹‰ç¬¦åœ¨ [`æ­£åˆ™è¡¨è¾¾å¼`](re.md#module-re "re: Regular expression operations.") ä¸­çš„æ”¯æŒ:
    
        >>> notice = 'Copyright Â© 2019'
    >>> copyright_year_pattern = re.compile(r'\N{copyright sign}\s*(\d{4})')
    >>> int(copyright_year_pattern.search(notice).group(1))
    2019
    

ï¼ˆç”± Jonathan Eunice å’Œ Serhiy Storchaka åœ¨ [bpo-30688](https://bugs.python.org/issue?@action=redirect&bpo=30688) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ç°åœ¨ dict å’Œ dictview å¯ä»¥ä½¿ç”¨ [`reversed()`](functions.md#reversed "reversed") æŒ‰æ’å…¥é¡ºåºåå‘è¿­ä»£ã€‚ ï¼ˆç”± RÃ©mi Lapeyre åœ¨ [bpo-33462](https://bugs.python.org/issue?@action=redirect&bpo=33462) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨å‡½æ•°è°ƒç”¨ä¸­å…è®¸ä½¿ç”¨çš„å…³é”®å­—åç§°è¯­æ³•å—åˆ°è¿›ä¸€æ­¥çš„é™åˆ¶ã€‚ ç‰¹åˆ«åœ°ï¼Œ`f((keyword)=arg)` ä¸å†è¢«å…è®¸ã€‚ å…³é”®å­—å‚æ•°èµ‹å€¼å½¢å¼çš„å·¦ä¾§ç»ä¸å…è®¸ä¸€èˆ¬æ ‡è¯†ç¬¦ä»¥å¤–çš„å…¶ä»–å†…å®¹ã€‚ ï¼ˆç”± Benjamin Peterson åœ¨ [bpo-34641](https://bugs.python.org/issue?@action=redirect&bpo=34641) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨ [`yield`](7.%20ç®€å•è¯­å¥.md#yield) å’Œ [`return`](7.%20ç®€å•è¯­å¥.md#return) è¯­å¥ä¸­çš„ä¸€èˆ¬å¯è¿­ä»£å¯¹è±¡è§£åŒ…ä¸å†è¦æ±‚åŠ åœ†æ‹¬å·ã€‚ è¿™ä½¿å¾— _yield_ å’Œ _return_ çš„è¯­æ³•ä¸æ­£å¸¸çš„èµ‹å€¼è¯­æ³•æ›´ä¸ºä¸€è‡´:
    
        >>> def parse(family):
            lastname, *members = family.split()
            return lastname.upper(), *members
    
    >>> parse('simpsons homer marge bart lisa maggie')
    ('SIMPSONS', 'homer', 'marge', 'bart', 'lisa', 'maggie')
    

ï¼ˆç”± David Cuthbert å’Œ Jordan Chapman åœ¨ [bpo-32117](https://bugs.python.org/issue?@action=redirect&bpo=32117) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å½“ç±»ä¼¼ `[(10, 20) (30, 40)]` è¿™æ ·åœ¨ä»£ç ä¸­å°‘äº†ä¸€ä¸ªé€—å·æ—¶ï¼Œç¼–è¯‘å™¨å°†æ˜¾ç¤º [`SyntaxWarning`](3.æ ‡å‡†åº“/exceptions.md#SyntaxWarning "SyntaxWarning") å¹¶é™„å¸¦æ›´æœ‰å¸®åŠ©çš„æç¤ºã€‚ è¿™ç›¸æ¯”åŸæ¥ç”¨ [`TypeError`](3.æ ‡å‡†åº“/exceptions.md#TypeError "TypeError") æ¥æç¤ºç¬¬ä¸€ä¸ªå…ƒç»„æ˜¯ä¸å¯è°ƒç”¨çš„æ›´å®¹æ˜“è¢«ç†è§£ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-15248](https://bugs.python.org/issue?@action=redirect&bpo=15248) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`datetime.date`](3.æ ‡å‡†åº“/datetime.md#datetime.date "datetime.date") æˆ– [`datetime.datetime`](3.æ ‡å‡†åº“/datetime.md#datetime.datetime "datetime.datetime") å’Œ [`datetime.timedelta`](3.æ ‡å‡†åº“/datetime.md#datetime.timedelta "datetime.timedelta") å¯¹è±¡ä¹‹é—´çš„ç®—æœ¯è¿ç®—ç°åœ¨å°†è¿”å›ç›¸åº”å­ç±»çš„å®ä¾‹è€Œä¸æ˜¯åŸºç±»çš„å®ä¾‹ã€‚ è¿™ä¹Ÿä¼šå½±å“åˆ°åœ¨å…·ä½“å®ç°ä¸­ï¼ˆç›´æ¥æˆ–é—´æ¥åœ°ï¼‰ä½¿ç”¨äº† [`datetime.timedelta`](3.æ ‡å‡†åº“/datetime.md#datetime.timedelta "datetime.timedelta") ç®—æœ¯è¿ç®—çš„è¿”å›ç±»å‹ï¼Œä¾‹å¦‚ [`astimezone()`](3.æ ‡å‡†åº“/datetime.md#datetime.datetime.astimezone "datetime.datetime.astimezone")ã€‚ ï¼ˆç”± Paul Ganssle åœ¨ [bpo-32417](https://bugs.python.org/issue?@action=redirect&bpo=32417) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å½“ Python è§£é‡Šå™¨é€šè¿‡ Ctrl-C (SIGINT) è¢«ä¸­æ–­å¹¶ä¸”æ‰€äº§ç”Ÿçš„ [`KeyboardInterrupt`](3.æ ‡å‡†åº“/exceptions.md#KeyboardInterrupt "KeyboardInterrupt") å¼‚å¸¸æœªè¢«æ•è·ï¼ŒPython è¿›ç¨‹ç°åœ¨ä¼šé€šè¿‡ä¸€ä¸ª SIGINT ä¿¡å·æˆ–æ˜¯ä½¿å¾—å‘èµ·è°ƒç”¨çš„è¿›ç¨‹èƒ½æ£€æµ‹åˆ°å®ƒæ˜¯ç”± Ctrl-C æ“ä½œæ€æ­»çš„æ­£ç¡®é€€å‡ºä»£ç æ¥é€€å‡ºã€‚ POSIX å’Œ Windows ä¸Šçš„ç»ˆç«¯ä¼šç›¸åº”åœ°ä½¿ç”¨æ­¤ä»£ç åœ¨äº¤äº’å¼ä¼šè¯ä¸­ç»ˆæ­¢è„šæœ¬ã€‚ ï¼ˆç”± Google çš„ Gregory P. Smith åœ¨ [bpo-1054041](https://bugs.python.org/issue?@action=redirect&bpo=1054041) ä¸­è´¡çŒ®ã€‚ï¼‰

  * æŸäº›é«˜çº§ç¼–ç¨‹é£æ ¼è¦æ±‚ä¸ºç°æœ‰çš„å‡½æ•°æ›´æ–° [`types.CodeType`](types.md#types.CodeType "types.CodeType") å¯¹è±¡ã€‚ ç”±äºä»£ç å¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œéœ€è¦åŸºäºç°æœ‰ä»£ç å¯¹è±¡æ¨¡å‹åˆ›å»ºä¸€ä¸ªæ–°çš„ä»£ç å¯¹è±¡ã€‚ ä½¿ç”¨ 19 ä¸ªå½¢å‚å°†ä¼šç›¸å½“ç¹çã€‚ ç°åœ¨ï¼Œæ–°çš„ `replace()` æ–¹æ³•ä½¿å¾—é€šè¿‡å°‘é‡ä¿®æ”¹çš„å½¢å‚åˆ›å»ºå…‹éš†å¯¹è±¡æˆä¸ºå¯èƒ½ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªä¿®æ”¹ [`statistics.mean()`](statistics.md#statistics.mean "statistics.mean") å‡½æ•°æ¥é˜²æ­¢ _data_ å½¢å‚è¢«ç”¨ä½œå…³é”®å­—å‚æ•°çš„ä¾‹å­:

    
        >>> from statistics import mean
    >>> mean(data=[10, 20, 90])
    40
    >>> mean.__code__ = mean.__code__.replace(co_posonlyargcount=1)
    >>> mean(data=[10, 20, 90])
    Traceback (most recent call last):
      ...
    TypeError: mean() got some positional-only arguments passed as keyword arguments: 'data'
    

ï¼ˆç”± Victor Stinner åœ¨ [bpo-37032](https://bugs.python.org/issue?@action=redirect&bpo=37032) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å¯¹äºæ•´æ•°ï¼Œç°åœ¨ [`pow()`](functions.md#pow "pow") å‡½æ•°çš„ä¸‰å‚æ•°å½¢å¼åœ¨åº•æ•°ä¸æ¨¡æ•°ä¸å¯çº¦çš„æƒ…å†µä¸‹å…è®¸æŒ‡æ•°ä¸ºè´Ÿå€¼ã€‚ éšåå®ƒä¼šåœ¨æŒ‡æ•°ä¸º `-1` æ—¶è®¡ç®—åº•æ•°çš„æ¨¡ä¹˜é€†å…ƒï¼Œå¹¶å¯¹å…¶ä»–è´ŸæŒ‡æ•°è®¡ç®—åæ¨¡çš„é€‚å½“å¹‚æ¬¡ã€‚ ä¾‹å¦‚ï¼Œè¦è®¡ç®— 38 æ¨¡ 137 çš„ [æ¨¡ä¹˜é€†å…ƒ](https://en.wikipedia.org/wiki/Modular_multiplicative_inverse) åˆ™å¯å†™ä¸º:
    
        >>> pow(38, -1, 137)
    119
    >>> 119 * 38 % 137
    1
    

æ¨¡ä¹˜é€†å…ƒåœ¨æ±‚è§£ [çº¿æ€§ä¸¢ç•ªå›¾æ–¹ç¨‹](https://en.wikipedia.org/wiki/Diophantine_equation) ä¼šè¢«ç”¨åˆ°ã€‚ ä¾‹å¦‚ï¼Œæƒ³è¦æ±‚å‡º `4258ğ‘¥ + 147ğ‘¦ = 369` çš„æ•´æ•°è§£ï¼Œé¦–å…ˆåº”é‡å†™ä¸º `4258ğ‘¥ â‰¡ 369 (mod 147)` ç„¶åæ±‚è§£ï¼š

    
        >>> x = 369 * pow(4258, -1, 147) % 147
    >>> y = (4258 * x - 369) // -147
    >>> 4258 * x + 147 * y
    369
    

ï¼ˆç”± Mark Dickinson åœ¨ [bpo-36027](https://bugs.python.org/issue?@action=redirect&bpo=36027) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å­—å…¸æ¨å¯¼å¼å·²ä¸å­—å…¸å­—é¢å€¼å®ç°åŒæ­¥ï¼Œä¼šå…ˆè®¡ç®—é”®å†è®¡ç®—å€¼:
    
        >>> # Dict comprehension
    >>> cast = {input('role? '): input('actor? ') for i in range(2)}
    role? King Arthur
    actor? Chapman
    role? Black Knight
    actor? Cleese
    
    >>> # Dict literal
    >>> cast = {input('role? '): input('actor? ')}
    role? Sir Robin
    actor? Eric Idle
    

å¯¹æ‰§è¡Œé¡ºåºçš„ä¿è¯å¯¹èµ‹å€¼è¡¨è¾¾å¼æ¥è¯´å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºåœ¨é”®è¡¨è¾¾å¼ä¸­èµ‹å€¼çš„å˜é‡å°†å¯åœ¨å€¼è¡¨è¾¾å¼ä¸­è¢«ä½¿ç”¨:

    
        >>> names = ['Martin von LÃ¶wis', 'Åukasz Langa', 'Walter DÃ¶rwald']
    >>> {(n := normalize('NFC', name)).casefold() : n for name in names}
    {'martin von lÃ¶wis': 'Martin von LÃ¶wis',
     'Å‚ukasz langa': 'Åukasz Langa',
     'walter dÃ¶rwald': 'Walter DÃ¶rwald'}
    

ï¼ˆç”± JÃ¶rn Heissler åœ¨ [bpo-35224](https://bugs.python.org/issue?@action=redirect&bpo=35224) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`object.__reduce__()`](pickle.md#object.__reduce__ "object.__reduce__") æ–¹æ³•ç°åœ¨å¯è¿”å›é•¿åº¦ä¸ºäºŒè‡³å…­ä¸ªå…ƒç´ çš„å…ƒç»„ã€‚ ä¹‹å‰çš„ä¸Šé™ä¸ºäº”ä¸ªã€‚ æ–°å¢çš„ç¬¬å…­ä¸ªå¯é€‰å…ƒç´ æ˜¯ç­¾åä¸º `(obj, state)` çš„å¯è°ƒç”¨å¯¹è±¡ã€‚ è¿™æ ·å°±å…è®¸ç›´æ¥æ§åˆ¶ç‰¹å®šå¯¹è±¡çš„çŠ¶æ€æ›´æ–°ã€‚ å¦‚æœå…ƒç´ å€¼ä¸ä¸º _None_ ï¼Œè¯¥å¯è°ƒç”¨å¯¹è±¡å°†ä¼˜å…ˆäºå¯¹è±¡çš„ `__setstate__()` æ–¹æ³•ã€‚ ï¼ˆç”± Pierre Glaser å’Œ Olivier Grisel åœ¨ [bpo-35900](https://bugs.python.org/issue?@action=redirect&bpo=35900) ä¸­è´¡çŒ®ã€‚ï¼‰

## æ–°å¢æ¨¡å—Â¶

  * æ–°å¢çš„ [`importlib.metadata`](importlib.metadata.md#module-importlib.metadata "importlib.metadata: Accessing package metadata") æ¨¡å—æä¾›äº†ä»ç¬¬ä¸‰æ–¹åŒ…è¯»å–å…ƒæ•°æ®çš„ï¼ˆä¸´æ—¶ï¼‰æ”¯æŒã€‚ ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥æå–ä¸€ä¸ªå·²å®‰è£…è½¯ä»¶åŒ…çš„ç‰ˆæœ¬å·ã€å…¥å£ç‚¹åˆ—è¡¨ç­‰ç­‰:
    
        >>> # Note following example requires that the popular "requests"
    >>> # package has been installed.
    >>>
    >>> from importlib.metadata import version, requires, files
    >>> version('requests')
    '2.22.0'
    >>> list(requires('requests'))
    ['chardet (<3.1.0,>=3.0.2)']
    >>> list(files('requests'))[:5]
    [PackagePath('requests-2.22.0.dist-info/INSTALLER'),
     PackagePath('requests-2.22.0.dist-info/LICENSE'),
     PackagePath('requests-2.22.0.dist-info/METADATA'),
     PackagePath('requests-2.22.0.dist-info/RECORD'),
     PackagePath('requests-2.22.0.dist-info/WHEEL')]
    

ï¼ˆç”± Barry Warsaw å’Œ Jason R. Coombs åœ¨ [bpo-34632](https://bugs.python.org/issue?@action=redirect&bpo=34632) ä¸­è´¡çŒ®ï¼‰ã€‚

## æ”¹è¿›çš„æ¨¡å—Â¶

### astÂ¶

AST èŠ‚ç‚¹ç°åœ¨å…·æœ‰ `end_lineno` å’Œ `end_col_offset` å±æ€§ï¼Œå®ƒä»¬ç»™å‡ºèŠ‚ç‚¹ç»“æŸçš„ç²¾ç¡®ä½ç½®ã€‚ ï¼ˆè¿™åªé€‚ç”¨äºå…·æœ‰ `lineno` å’Œ `col_offset` å±æ€§çš„èŠ‚ç‚¹ã€‚ï¼‰

æ–°å¢å‡½æ•° [`ast.get_source_segment()`](ast.md#ast.get_source_segment "ast.get_source_segment") è¿”å›æŒ‡å®š AST èŠ‚ç‚¹çš„æºä»£ç ã€‚

ï¼ˆç”± Ivan Levkivskyi åœ¨ [bpo-33416](https://bugs.python.org/issue?@action=redirect&bpo=33416) ä¸­è´¡çŒ®ã€‚ï¼‰

[`ast.parse()`](ast.md#ast.parse "ast.parse") å‡½æ•°å…·æœ‰ä¸€äº›æ–°çš„æ——æ ‡ï¼š

  * `type_comments=True` å¯¼è‡´å…¶è¿”å›ä¸ç‰¹å®š AST èŠ‚ç‚¹ç›¸å…³è”çš„ [**PEP 484**](https://peps.python.org/pep-0484/) å’Œ [**PEP 526**](https://peps.python.org/pep-0526/) ç±»å‹æ³¨é‡Šæ–‡æœ¬ï¼›

  * `mode='func_type'` å¯è¢«ç”¨äºè§£æ [**PEP 484**](https://peps.python.org/pep-0484/) "ç­¾åç±»å‹æ³¨é‡Š" (ä¸ºå‡½æ•°å®šä¹‰ AST èŠ‚ç‚¹è€Œè¿”å›)ï¼›

  * `feature_version=(3, N)` å…è®¸æŒ‡å®šä¸€ä¸ªæ›´æ—©çš„ Python 3 ç‰ˆæœ¬ã€‚ ä¾‹å¦‚ï¼Œ`feature_version=(3, 4)` å°†æŠŠ [`async`](8.%20å¤åˆè¯­å¥.md#async) å’Œ [`await`](6.%20è¡¨è¾¾å¼.md#await) è§†ä¸ºéä¿ç•™å­—ã€‚

ï¼ˆç”± Guido van Rossum åœ¨ [bpo-35766](https://bugs.python.org/issue?@action=redirect&bpo=35766) ä¸­è´¡çŒ®ã€‚ï¼‰

### asyncioÂ¶

[`asyncio.run()`](asyncio-runner.md#asyncio.run "asyncio.run") å·²ç»ä»æš‚å®šçŠ¶æ€æ™‹çº§ä¸ºç¨³å®š APIã€‚ æ­¤å‡½æ•°å¯è¢«ç”¨äºæ‰§è¡Œä¸€ä¸ª [coroutine](../glossary.md#term-coroutine) å¹¶è¿”å›ç»“æœï¼ŒåŒæ—¶è‡ªåŠ¨ç®¡ç†äº‹ä»¶å¾ªç¯ã€‚ ä¾‹å¦‚:

    
    
~~~
import asyncio

async def main():
    await asyncio.sleep(0)
    return 42

asyncio.run(main())
~~~

è¿™ _å¤§è‡´_ ç­‰ä»·äº:

    
    
~~~
import asyncio

async def main():
    await asyncio.sleep(0)
    return 42

loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
try:
    loop.run_until_complete(main())
finally:
    asyncio.set_event_loop(None)
    loop.close()
~~~

å®é™…çš„å®ç°è¦æ›´å¤æ‚è®¸å¤šã€‚ å› æ­¤ [`asyncio.run()`](asyncio-runner.md#asyncio.run "asyncio.run") åº”è¯¥ä½œä¸ºè¿è¡Œ asyncio ç¨‹åºçš„é¦–é€‰æ–¹å¼ã€‚

ï¼ˆç”± Yury Selivanov åœ¨ [bpo-32314](https://bugs.python.org/issue?@action=redirect&bpo=32314) ä¸­è´¡çŒ®ã€‚ï¼‰

è¿è¡Œ `python -m asyncio` å°†å¯åŠ¨ä¸€ä¸ªåŸç”Ÿå¼‚æ­¥ REPLã€‚ è¿™å…è®¸å¿«é€Ÿä½“éªŒå…·æœ‰æœ€é«˜å±‚çº§ [`await`](6.%20è¡¨è¾¾å¼.md#await) çš„ä»£ç ã€‚ è¿™æ—¶ä¸å†éœ€è¦ç›´æ¥è°ƒç”¨ `asyncio.run()`ï¼Œå› ä¸ºæ­¤æ“ä½œä¼šåœ¨æ¯æ¬¡å‘èµ·è°ƒç”¨æ—¶äº§ç”Ÿä¸€ä¸ªæ–°äº‹ä»¶å¾ªç¯ï¼š

    
    
~~~
$ python -m asyncio
asyncio REPL 3.8.0
Use "await" directly instead of "asyncio.run()".
Type "help", "copyright", "credits" or "license" for more information.
>>> import asyncio
>>> await asyncio.sleep(10, result='hello')
hello
~~~

ï¼ˆç”± Yury Selivanov åœ¨ [bpo-37028](https://bugs.python.org/issue?@action=redirect&bpo=37028) ä¸­è´¡çŒ®ã€‚ï¼‰

å¼‚å¸¸ [`asyncio.CancelledError`](asyncio-exceptions.md#asyncio.CancelledError "asyncio.CancelledError") ç°åœ¨ç»§æ‰¿è‡ª [`BaseException`](3.æ ‡å‡†åº“/exceptions.md#BaseException "BaseException") è€Œä¸æ˜¯ [`Exception`](3.æ ‡å‡†åº“/exceptions.md#Exception "Exception") å¹¶ä¸”ä¸å†ç»§æ‰¿è‡ª [`concurrent.futures.CancelledError`](concurrent.futures.md#concurrent.futures.CancelledError "concurrent.futures.CancelledError")ã€‚ ï¼ˆç”± Yury Selivanov åœ¨ [bpo-32528](https://bugs.python.org/issue?@action=redirect&bpo=32528) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨ Windows ä¸Šï¼Œç°åœ¨é»˜è®¤çš„äº‹ä»¶å¾ªç¯ä¸º [`ProactorEventLoop`](asyncio-eventloop.md#asyncio.ProactorEventLoop "asyncio.ProactorEventLoop")ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-34687](https://bugs.python.org/issue?@action=redirect&bpo=34687) ä¸­è´¡çŒ®ã€‚ï¼‰

[`ProactorEventLoop`](asyncio-eventloop.md#asyncio.ProactorEventLoop "asyncio.ProactorEventLoop") ç°åœ¨ä¹Ÿæ”¯æŒ UDPã€‚ ï¼ˆç”± Adam Meily å’Œ Andrew Svetlov åœ¨ [bpo-29883](https://bugs.python.org/issue?@action=redirect&bpo=29883) ä¸­è´¡çŒ®ã€‚ï¼‰

[`ProactorEventLoop`](asyncio-eventloop.md#asyncio.ProactorEventLoop "asyncio.ProactorEventLoop") ç°åœ¨å¯é€šè¿‡ [`KeyboardInterrupt`](3.æ ‡å‡†åº“/exceptions.md#KeyboardInterrupt "KeyboardInterrupt") ("CTRL+C") æ¥ä¸­æ–­ã€‚ ï¼ˆç”± Vladimir Matveev åœ¨ [bpo-23057](https://bugs.python.org/issue?@action=redirect&bpo=23057) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº† [`asyncio.Task.get_coro()`](asyncio-task.md#asyncio.Task.get_coro "asyncio.Task.get_coro") ç”¨æ¥è·å– [`asyncio.Task`](asyncio-task.md#asyncio.Task "asyncio.Task") ä¸­çš„å·²åŒ…è£…åç¨‹ã€‚ ï¼ˆç”± Alex GrÃ¶nholm åœ¨ [bpo-36999](https://bugs.python.org/issue?@action=redirect&bpo=36999) ä¸­è´¡çŒ®ã€‚ï¼‰

asyncio ä»»åŠ¡ç°åœ¨å¯ä»¥è¢«å‘½åï¼Œæˆ–è€…æ˜¯é€šè¿‡å°† `name` å…³é”®å­—å‚æ•°ä¼ ç»™ [`asyncio.create_task()`](asyncio-task.md#asyncio.create_task "asyncio.create_task") æˆ– [`create_task()`](asyncio-eventloop.md#asyncio.loop.create_task "asyncio.loop.create_task") äº‹ä»¶å¾ªç¯æ–¹æ³•ï¼Œæˆ–è€…æ˜¯é€šè¿‡åœ¨ä»»åŠ¡å¯¹è±¡ä¸Šè°ƒç”¨ [`set_name()`](asyncio-task.md#asyncio.Task.set_name "asyncio.Task.set_name") æ–¹æ³•ã€‚ ä»»åŠ¡åç§°åœ¨ [`asyncio.Task`](asyncio-task.md#asyncio.Task "asyncio.Task") çš„ `repr()` è¾“å‡ºä¸­å¯è§ï¼Œå¹¶ä¸”è¿˜å¯ä»¥ä½¿ç”¨ [`get_name()`](asyncio-task.md#asyncio.Task.get_name "asyncio.Task.get_name") æ–¹æ³•æ¥è·å–ã€‚ ï¼ˆç”± Alex GrÃ¶nholm åœ¨ [bpo-34270](https://bugs.python.org/issue?@action=redirect&bpo=34270) ä¸­è´¡çŒ®ã€‚ï¼‰

å°†å¯¹ [Happy Eyeballs](https://en.wikipedia.org/wiki/Happy_Eyeballs) çš„æ”¯æŒæ·»åŠ åˆ° [`asyncio.loop.create_connection()`](asyncio-eventloop.md#asyncio.loop.create_connection "asyncio.loop.create_connection")ã€‚ è¦æŒ‡å®šæ­¤è¡Œä¸ºï¼Œå·²å¢åŠ äº†ä¸¤ä¸ªæ–°çš„å½¢å‚: _happy_eyeballs_delay_ å’Œ _interleave_ ã€‚ Happy Eyeballs ç®—æ³•å¯æå‡æ”¯æŒ IPv4 å’Œ IPv6 çš„åº”ç”¨çš„å“åº”é€Ÿåº¦ï¼Œå…·ä½“åšæ³•æ˜¯å°è¯•åŒæ—¶ä½¿ç”¨ä¸¤è€…è¿›è¡Œè¿æ¥ã€‚ ï¼ˆç”± twisteroid ambassador åœ¨ [bpo-33530](https://bugs.python.org/issue?@action=redirect&bpo=33530) ä¸­è´¡çŒ®ã€‚ï¼‰

### builtinsÂ¶

å†…ç½®çš„ [`compile()`](functions.md#compile "compile") å·²æ”¹è¿›ä¸ºå¯æ¥å— `ast.PyCF_ALLOW_TOP_LEVEL_AWAIT` æ——æ ‡ã€‚ å½“ä¼ å…¥æ­¤æ–°æ——æ ‡æ—¶ï¼Œ[`compile()`](functions.md#compile "compile") å°†å…è®¸é€šå¸¸è¢«è§†ä¸ºæ— æ•ˆè¯­æ³•çš„æœ€é«˜å±‚çº§ `await`, `async for` å’Œ `async with` æ„é€ ã€‚ æ­¤åå°†å¯è¿”å›å¸¦æœ‰ `CO_COROUTINE` æ——æ ‡çš„å¼‚æ­¥ä»£ç å¯¹è±¡ã€‚ ï¼ˆç”± Matthias Bussonnier åœ¨ [bpo-34616](https://bugs.python.org/issue?@action=redirect&bpo=34616) ä¸­è´¡çŒ®ã€‚ï¼‰

### collectionsÂ¶

[`collections.namedtuple()`](collections.md#collections.namedtuple "collections.namedtuple") çš„ [`_asdict()`](collections.md#collections.somenamedtuple._asdict "collections.somenamedtuple._asdict") æ–¹æ³•ç°åœ¨å°†è¿”å› [`dict`](stdtypes.md#dict "dict") è€Œä¸æ˜¯ [`collections.OrderedDict`](collections.md#collections.OrderedDict "collections.OrderedDict")ã€‚ æ­¤é¡¹æ›´æ”¹æ˜¯ç”±äºæ™®é€šå­—å…¸è‡ª Python 3.7 èµ·å·²ä¿è¯å…·æœ‰ç¡®å®šçš„å…ƒç´ é¡ºåºã€‚ å¦‚æœè¿˜éœ€è¦ `OrderedDict` çš„é¢å¤–ç‰¹æ€§ï¼Œå»ºè®®çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†ç»“æœè½¬æ¢ä¸ºéœ€è¦çš„ç±»å‹: `OrderedDict(nt._asdict())`ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-35864](https://bugs.python.org/issue?@action=redirect&bpo=35864) ä¸­è´¡çŒ®ã€‚ï¼‰

### cProfileÂ¶

[`cProfile.Profile`](profile.md#profile.Profile "profile.Profile") ç±»ç°åœ¨å¯è¢«ç”¨ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚ åœ¨è¿è¡Œæ—¶å¯¹ä¸€ä¸ªä»£ç å—å®ç°æ€§èƒ½åˆ†æ:

    
    
~~~
import cProfile

with cProfile.Profile() as profiler:
      # code to be profiled
      ...
~~~

ï¼ˆç”± Scott Sanderson åœ¨ [bpo-29235](https://bugs.python.org/issue?@action=redirect&bpo=29235) ä¸­è´¡çŒ®ã€‚ï¼‰

### csvÂ¶

[`csv.DictReader`](csv.md#csv.DictReader "csv.DictReader") ç°åœ¨å°†è¿”å› [`dict`](stdtypes.md#dict "dict") è€Œä¸æ˜¯ [`collections.OrderedDict`](collections.md#collections.OrderedDict "collections.OrderedDict")ã€‚ æ­¤å·¥å…·ç°åœ¨ä¼šæ›´å¿«é€Ÿä¸”æ¶ˆè€—æ›´å°‘å†…å­˜åŒæ—¶ä»ç„¶ä¿ç•™å­—æ®µé¡ºåºã€‚ ï¼ˆç”± Michael Selik åœ¨ [bpo-34003](https://bugs.python.org/issue?@action=redirect&bpo=34003) ä¸­è´¡çŒ®ã€‚ï¼‰

### cursesÂ¶

æ·»åŠ äº†ä¸€ä¸ªæ–°å˜é‡ç”¨äºä¿å­˜ä¸‹å±‚ ncurses åº“çš„ç»“æ„ç‰ˆä¿¡æ¯: [`ncurses_version`](3.æ ‡å‡†åº“/curses.md#curses.ncurses_version "curses.ncurses_version")ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-31680](https://bugs.python.org/issue?@action=redirect&bpo=31680) ä¸­è´¡çŒ®ã€‚ï¼‰

### ctypesÂ¶

åœ¨ Windows ä¸Šï¼Œ[`CDLL`](ctypes.md#ctypes.CDLL "ctypes.CDLL") åŠå…¶å­ç±»ç°åœ¨æ¥å— _winmode_ å½¢å‚æ¥æŒ‡å®šç”¨äºåº•å±‚ `LoadLibraryEx` è°ƒç”¨çš„æ——æ ‡ã€‚ é»˜è®¤æ——æ ‡è¢«è®¾ä¸ºä»…åŠ è½½æ¥è‡ªå¯ä¿¡ä»»ä½ç½®çš„ DLL ä¾èµ–é¡¹ï¼ŒåŒ…æ‹¬ DLL çš„å­˜æ”¾è·¯å¾„ï¼ˆå¦‚æœåŠ è½½åˆå§‹ DLL æ—¶ä½¿ç”¨äº†å®Œæ•´æˆ–éƒ¨åˆ†è·¯å¾„ï¼‰ä»¥åŠé€šè¿‡ [`add_dll_directory()`](os.md#os.add_dll_directory "os.add_dll_directory") æ·»åŠ çš„è·¯å¾„ã€‚ ï¼ˆç”± Steve Dower åœ¨ [bpo-36085](https://bugs.python.org/issue?@action=redirect&bpo=36085) ä¸­è´¡çŒ®ã€‚ï¼‰

### datetimeÂ¶

æ·»åŠ äº†æ–°çš„æ›¿ä»£æ„é€ å™¨ [`datetime.date.fromisocalendar()`](3.æ ‡å‡†åº“/datetime.md#datetime.date.fromisocalendar "datetime.date.fromisocalendar") å’Œ [`datetime.datetime.fromisocalendar()`](3.æ ‡å‡†åº“/datetime.md#datetime.datetime.fromisocalendar "datetime.datetime.fromisocalendar")ï¼Œå®ƒä»¬åˆ†åˆ«åŸºäº ISO å¹´ä»½ã€å‘¨åºå·å’Œå‘¨å†…æ—¥åºå·æ¥æ„é€  `date` å’Œ [`datetime`](3.æ ‡å‡†åº“/datetime.md#module-datetime "datetime: Basic date and time types.") å¯¹è±¡ï¼›è¿™ä¸¤è€…åˆ†åˆ«æ˜¯å…¶æ‰€å¯¹åº”ç±»ä¸­ `isocalendar` æ–¹æ³•çš„é€†æ“ä½œã€‚ ï¼ˆç”± Paul Ganssle åœ¨ [bpo-36004](https://bugs.python.org/issue?@action=redirect&bpo=36004) ä¸­è´¡çŒ®ã€‚ï¼‰

### functoolsÂ¶

[`functools.lru_cache()`](functools.md#functools.lru_cache "functools.lru_cache") ç°åœ¨å¯ç›´æ¥ä½œä¸ºè£…é¥°å™¨è€Œä¸æ˜¯ä½œä¸ºè¿”å›è£…é¥°å™¨çš„å‡½æ•°ã€‚ å› æ­¤è¿™ä¸¤ç§å†™æ³•ç°åœ¨éƒ½è¢«æ”¯æŒ:

    
    
~~~
@lru_cache
def f(x):
    ...

@lru_cache(maxsize=256)
def f(x):
    ...
~~~

ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-36772](https://bugs.python.org/issue?@action=redirect&bpo=36772) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº†æ–°çš„ [`functools.cached_property()`](functools.md#functools.cached_property "functools.cached_property") è£…é¥°å™¨ï¼Œç”¨äºåœ¨å®ä¾‹ç”Ÿå‘½å‘¨æœŸå†…ç¼“å­˜çš„å·²è®¡ç®—ç‰¹å¾å±æ€§ã€‚

    
    
~~~
import functools
import statistics

class Dataset:
   def __init__(self, sequence_of_numbers):
      self.data = sequence_of_numbers

   @functools.cached_property
   def variance(self):
      return statistics.variance(self.data)
~~~

ï¼ˆç”± Carl Meyer åœ¨ [bpo-21145](https://bugs.python.org/issue?@action=redirect&bpo=21145) ä¸­è´¡çŒ®ï¼‰

æ·»åŠ äº†æ–°çš„ [`functools.singledispatchmethod()`](functools.md#functools.singledispatchmethod "functools.singledispatchmethod") è£…é¥°å™¨å¯ä½¿ç”¨ [single dispatch](../glossary.md#term-single-dispatch) å°†æ–¹æ³•è½¬æ¢ä¸º [æ³›å‹å‡½æ•°](../glossary.md#term-generic-function):

    
    
~~~
from functools import singledispatchmethod
from contextlib import suppress

class TaskManager:

    def __init__(self, tasks):
        self.tasks = list(tasks)

    @singledispatchmethod
    def discard(self, value):
        with suppress(ValueError):
            self.tasks.remove(value)

    @discard.register(list)
    def _(self, tasks):
        targets = set(tasks)
        self.tasks = [x for x in self.tasks if x not in targets]
~~~

ï¼ˆç”± Ethan Smith åœ¨ [bpo-32380](https://bugs.python.org/issue?@action=redirect&bpo=32380) ä¸­è´¡çŒ®ï¼‰

### gcÂ¶

[`get_objects()`](gc.md#gc.get_objects "gc.get_objects") ç°åœ¨èƒ½æ¥å—ä¸€ä¸ªå¯é€‰çš„ _generation_ å½¢å‚æ¥æŒ‡å®šä¸€ä¸ªç”¨äºè·å–å¯¹è±¡çš„ç”Ÿæˆå™¨ã€‚ ï¼ˆç”± Pablo Galindo åœ¨ [bpo-36016](https://bugs.python.org/issue?@action=redirect&bpo=36016) ä¸­è´¡çŒ®ã€‚ï¼‰

### gettextÂ¶

æ·»åŠ äº† [`pgettext()`](gettext.md#gettext.pgettext "gettext.pgettext") åŠå…¶å˜åŒ–å½¢å¼ã€‚ ï¼ˆç”± Franz Glasner, Ã‰ric Araujo å’Œ Cheryl Sabella åœ¨ [bpo-2504](https://bugs.python.org/issue?@action=redirect&bpo=2504) ä¸­è´¡çŒ®ã€‚ï¼‰

### gzipÂ¶

æ·»åŠ  _mtime_ å½¢å‚åˆ° [`gzip.compress()`](gzip.md#gzip.compress "gzip.compress") ç”¨äºå¯é‡ç°çš„è¾“å‡ºã€‚ ï¼ˆç”± Guo Ci Teo åœ¨ [bpo-34898](https://bugs.python.org/issue?@action=redirect&bpo=34898) ä¸­è´¡çŒ®ã€‚ï¼‰

å¯¹äºç‰¹å®šç±»å‹çš„æ— æ•ˆæˆ–å·²æŸå gzip æ–‡ä»¶ç°åœ¨å°†å¼•å‘ [`BadGzipFile`](gzip.md#gzip.BadGzipFile "gzip.BadGzipFile") è€Œä¸æ˜¯ [`OSError`](3.æ ‡å‡†åº“/exceptions.md#OSError "OSError")ã€‚ ï¼ˆç”± Filip GruszczyÅ„ski, Michele OrrÃ¹ å’Œ Zackery Spytz åœ¨ [bpo-6584](https://bugs.python.org/issue?@action=redirect&bpo=6584) ä¸­è´¡çŒ®ã€‚ï¼‰

### IDLE ä¸ idlelibÂ¶

è¶…è¿‡ N è¡Œï¼ˆé»˜è®¤å€¼ä¸º 50ï¼‰çš„è¾“å‡ºå°†è¢«æŠ˜å ä¸ºä¸€ä¸ªæŒ‰é’®ã€‚ N å¯ä»¥åœ¨ Settings å¯¹è¯æ¡†çš„ General é¡µçš„ PyShell éƒ¨åˆ†ä¸­è¿›è¡Œä¿®æ”¹ã€‚ æ•°é‡è¾ƒå°‘ä½†æ˜¯è¶…é•¿çš„è¡Œå¯ä»¥é€šè¿‡åœ¨è¾“å‡ºä¸Šå³å‡»æ¥æŠ˜å ã€‚ è¢«æŠ˜å çš„è¾“å‡ºå¯é€šè¿‡åŒå‡»æŒ‰é’®æ¥å±•å¼€ï¼Œæˆ–æ˜¯é€šè¿‡å³å‡»æŒ‰é’®æ¥æ”¾å…¥å‰ªè´´æ¿æˆ–æ˜¯å•ç‹¬çš„çª—å£ã€‚ ï¼ˆç”± Tal Einat åœ¨ [bpo-1529353](https://bugs.python.org/issue?@action=redirect&bpo=1529353) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨ Run èœå•ä¸­å¢åŠ äº† "Run Customized" ä»¥ä½¿ç”¨è‡ªå®šä¹‰è®¾ç½®æ¥è¿è¡Œæ¨¡å—ã€‚ è¾“å…¥çš„ä»»ä½•å‘½ä»¤è¡Œå‚æ•°éƒ½ä¼šè¢«åŠ å…¥ sys.argvã€‚ å®ƒä»¬åœ¨ä¸‹æ¬¡è‡ªå®šä¹‰è¿è¡Œæ—¶ä¼šå†æ¬¡æ˜¾ç¤ºåœ¨çª—ä½“ä¸­ã€‚ ç”¨æˆ·ä¹Ÿå¯ä»¥ç¦ç”¨é€šå¸¸çš„ Shell ä¸»æ¨¡å—é‡å¯ã€‚ ï¼ˆç”± Cheryl Sabella, Terry Jan Reedy ç­‰äººåœ¨ [bpo-5680](https://bugs.python.org/issue?@action=redirect&bpo=5680) å’Œ [bpo-37627](https://bugs.python.org/issue?@action=redirect&bpo=37627) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨ IDLE ç¼–è¾‘å™¨çª—å£ä¸­å¢åŠ äº†å¯é€‰çš„è¡Œå·ã€‚ çª—å£æ‰“å¼€æ—¶é»˜è®¤ä¸æ˜¾ç¤ºè¡Œå·ï¼Œé™¤éåœ¨é…ç½®å¯¹è¯æ¡†çš„ General é€‰é¡¹å¡ä¸­ç‰¹åˆ«è®¾ç½®ã€‚ å·²æ‰“å¼€çª—å£ä¸­çš„è¡Œå·å¯ä»¥åœ¨ Options èœå•ä¸­æ˜¾ç¤ºå’Œéšè—ã€‚ ï¼ˆç”± Tal Einat å’Œ Saimadhav Heblikar åœ¨ [bpo-17535](https://bugs.python.org/issue?@action=redirect&bpo=17535) ä¸­è´¡çŒ®ã€‚ï¼‰

ç°åœ¨ä¼šä½¿ç”¨ OS æœ¬æœºç¼–ç æ ¼å¼åœ¨ Python å­—ç¬¦ä¸²å’Œ Tcl å¯¹è±¡é—´è¿›è¡Œè½¬æ¢ã€‚ è¿™å…è®¸åœ¨ IDLE ä¸­å¤„ç† emoji å’Œå…¶ä»–é BMP å­—ç¬¦ã€‚ è¿™äº›å­—ç¬¦å°†å¯è¢«æ˜¾ç¤ºæˆ–æ˜¯ä»å‰ªè´´æ¿å¤åˆ¶å’Œç²˜è´´ã€‚ å­—ç¬¦ä¸²ä» Tcl åˆ° Python çš„æ¥å›è½¬æ¢ç°åœ¨ä¸ä¼šå†å‘ç”Ÿå¤±è´¥ã€‚ ï¼ˆè¿‡å»å…«å¹´æœ‰è®¸å¤šäººéƒ½ä¸ºæ­¤ä»˜å‡ºè¿‡åŠªåŠ›ï¼Œé—®é¢˜æœ€ç»ˆç”± Serhiy Storchaka åœ¨ [bpo-13153](https://bugs.python.org/issue?@action=redirect&bpo=13153) ä¸­è§£å†³ã€‚ï¼‰

åœ¨ 3.8.1 ä¸­æ–°å¢:

æ·»åŠ åˆ‡æ¢å…‰æ ‡é—ªçƒåœæ­¢çš„é€‰é¡¹ã€‚ ï¼ˆç”± Zackery Spytz åœ¨ [bpo-4603](https://bugs.python.org/issue?@action=redirect&bpo=4603) ä¸­è´¡çŒ®ã€‚ï¼‰

Esc é”®ç°åœ¨ä¼šå…³é—­ IDLE è¡¥å…¨æç¤ºçª—å£ã€‚ ï¼ˆç”± Johnny Najera åœ¨ [bpo-38944](https://bugs.python.org/issue?@action=redirect&bpo=38944) ä¸­è´¡çŒ®ã€‚ï¼‰

ä¸Šè¿°ä¿®æ”¹å·²è¢«åå‘ç§»æ¤åˆ° 3.7 ç»´æŠ¤å‘è¡Œç‰ˆä¸­ã€‚

æ·»åŠ å…³é”®å­—åˆ°æ¨¡å—åç§°è¡¥å…¨åˆ—è¡¨ã€‚ ï¼ˆç”± Terry J. Reedy åœ¨ [bpo-37765](https://bugs.python.org/issue?@action=redirect&bpo=37765) ä¸­è´¡çŒ®ã€‚ï¼‰

### inspectÂ¶

[`inspect.getdoc()`](inspect.md#inspect.getdoc "inspect.getdoc") å‡½æ•°ç°åœ¨å¯ä»¥æ‰¾åˆ° `__slots__` çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼Œå¦‚æœè¯¥å±æ€§æ˜¯ä¸€ä¸ªå…ƒç´ å€¼ä¸ºæ–‡æ¡£å­—ç¬¦ä¸²çš„ [`dict`](stdtypes.md#dict "dict") çš„è¯ã€‚ è¿™æä¾›äº†ç±»ä¼¼äºç›®å‰å·²æœ‰çš„ [`property()`](functions.md#property "property"), [`classmethod()`](functions.md#classmethod "classmethod") å’Œ [`staticmethod()`](functions.md#staticmethod "staticmethod") ç­‰å‡½æ•°çš„æ–‡æ¡£é€‰é¡¹:

    
    
~~~
class AudioClip:
    __slots__ = {'bit_rate': 'expressed in kilohertz to one decimal place',
                 'duration': 'in seconds, rounded up to an integer'}
    def __init__(self, bit_rate, duration):
        self.bit_rate = round(bit_rate / 1000.0, 1)
        self.duration = ceil(duration)
~~~

ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-36326](https://bugs.python.org/issue?@action=redirect&bpo=36326) ä¸­è´¡çŒ®ã€‚ï¼‰

### ioÂ¶

åœ¨å¼€å‘æ¨¡å¼ ([`-X`](1.%20å‘½ä»¤è¡Œä¸ç¯å¢ƒ.md#cmdoption-X) `env`) å’Œ [è°ƒè¯•ç¼–è¯‘ç‰ˆ](3.%20é…ç½®%20Python.md#debug-build) ä¸­ï¼Œ[`io.IOBase`](io.md#io.IOBase "io.IOBase") ç»ˆç»“å™¨ç°åœ¨ä¼šåœ¨ `close()` æ–¹æ³•å¤±è´¥æ—¶å°†å¼‚å¸¸å†™å…¥æ—¥å¿—ã€‚ å‘ç”Ÿçš„å¼‚å¸¸åœ¨å‘å¸ƒç¼–è¯‘ç‰ˆä¸­ä¼šè¢«é™é»˜åœ°å¿½ç•¥ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-18748](https://bugs.python.org/issue?@action=redirect&bpo=18748) ä¸­è´¡çŒ®ã€‚ï¼‰

### itertoolsÂ¶

[`itertools.accumulate()`](itertools.md#itertools.accumulate "itertools.accumulate") å‡½æ•°å¢åŠ äº†å¯é€‰çš„ _initial_ å…³é”®å­—å‚æ•°ç”¨æ¥æŒ‡å®šä¸€ä¸ªåˆå§‹å€¼:

    
    
~~~shell
>>> from itertools import accumulate
>>> list(accumulate([10, 5, 30, 15], initial=1000))
[1000, 1010, 1015, 1045, 1060]
~~~

ï¼ˆç”± Lisa Roach åœ¨ [bpo-34659](https://bugs.python.org/issue?@action=redirect&bpo=34659) ä¸­è´¡çŒ®ã€‚ï¼‰

### json.toolÂ¶

æ·»åŠ é€‰é¡¹ `--json-lines` ç”¨äºå°†æ¯ä¸ªè¾“å…¥è¡Œè§£æä¸ºå•ç‹¬çš„ JSON å¯¹è±¡ã€‚ ï¼ˆç”± Weipeng Hong åœ¨ [bpo-31553](https://bugs.python.org/issue?@action=redirect&bpo=31553) ä¸­è´¡çŒ®ã€‚ï¼‰

### loggingÂ¶

ä¸º [`logging.basicConfig()`](3.æ ‡å‡†åº“/logging.md#logging.basicConfig "logging.basicConfig") æ·»åŠ äº† _force_ å…³é”®å­—å‚æ•°ï¼Œå½“è®¾ä¸ºçœŸå€¼æ—¶ï¼Œå…³è”åˆ°æ ¹æ—¥å¿—è®°å½•å™¨çš„ä»»ä½•ç°æœ‰å¤„ç†ç¨‹åºéƒ½å°†åœ¨æ‰§è¡Œç”±å…¶ä»–å‚æ•°æ‰€æŒ‡å®šçš„é…ç½®ä¹‹å‰è¢«ç§»é™¤å¹¶å…³é—­ã€‚

è¿™è§£å†³äº†ä¸€ä¸ªé•¿æœŸå­˜åœ¨çš„é—®é¢˜ã€‚ å½“ä¸€ä¸ªæ—¥å¿—å¤„ç†å™¨æˆ– _basicConfig()_ è¢«è°ƒç”¨æ—¶ï¼Œå¯¹ _basicConfig()_ çš„åç»­è°ƒç”¨ä¼šè¢«é™é»˜åœ°å¿½ç•¥ã€‚ è¿™å¯¼è‡´ä½¿ç”¨äº¤äº’æç¤ºç¬¦æˆ– Jupyter ç¬”è®°æœ¬æ›´æ–°ã€è¯•éªŒæˆ–è®²è§£å„ç§æ—¥å¿—é…ç½®é€‰é¡¹å˜å¾—ç›¸å½“å›°éš¾ã€‚

ï¼ˆç”± Raymond Hettinger æè®®ï¼Œç”± Dong-hee Na å®ç°ï¼Œå¹¶ç”± Vinay Sajip åœ¨ [bpo-33897](https://bugs.python.org/issue?@action=redirect&bpo=33897) ä¸­å®Œæˆå®¡æ ¸ã€‚ï¼‰

### mathÂ¶

æ·»åŠ äº†æ–°çš„å‡½æ•° [`math.dist()`](math.md#math.dist "math.dist") ç”¨äºè®¡ç®—ä¸¤ç‚¹ä¹‹é—´çš„æ¬§å‡ é‡Œå¾—è·ç¦»ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-33089](https://bugs.python.org/issue?@action=redirect&bpo=33089) ä¸­è´¡çŒ®ã€‚ï¼‰

æ‰©å±•äº† [`math.hypot()`](math.md#math.hypot "math.hypot") å‡½æ•°ä»¥ä¾¿å¤„ç†æ›´å¤šçš„ç»´åº¦ã€‚ ä¹‹å‰å®ƒä»…æ”¯æŒ 2-D çš„æƒ…å†µã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-33089](https://bugs.python.org/issue?@action=redirect&bpo=33089) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº†æ–°çš„å‡½æ•° [`math.prod()`](math.md#math.prod "math.prod") ä½œä¸ºçš„ [`sum()`](functions.md#sum "sum") åŒç±»ï¼Œè¯¥å‡½æ•°è¿”å› 'start' å€¼ (é»˜è®¤å€¼: 1) ä¹˜ä»¥ä¸€ä¸ªæ•°å­—å¯è¿­ä»£å¯¹è±¡çš„ç§¯:

    
    
~~~shell
>>> prior = 0.8
>>> likelihoods = [0.625, 0.84, 0.30]
>>> math.prod(likelihoods, start=prior)
0.126
~~~

ï¼ˆç”± Pablo Galindo åœ¨ [bpo-35606](https://bugs.python.org/issue?@action=redirect&bpo=35606) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº†ä¸¤ä¸ªæ–°çš„ç»„åˆå‡½æ•° [`math.perm()`](math.md#math.perm "math.perm") å’Œ [`math.comb()`](math.md#math.comb "math.comb"):

    
    
~~~shell
>>> math.perm(10, 3)    # Permutations of 10 things taken 3 at a time
720
>>> math.comb(10, 3)    # Combinations of 10 things taken 3 at a time
120
~~~

ï¼ˆç”± Yash Aggarwal, Keller Fuchs, Serhiy Storchaka å’Œ Raymond Hettinger åœ¨ [bpo-37128](https://bugs.python.org/issue?@action=redirect&bpo=37128), [bpo-37178](https://bugs.python.org/issue?@action=redirect&bpo=37178) å’Œ [bpo-35431](https://bugs.python.org/issue?@action=redirect&bpo=35431) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº†ä¸€ä¸ªæ–°å‡½æ•° [`math.isqrt()`](math.md#math.isqrt "math.isqrt") ç”¨äºè®¡ç®—ç²¾ç¡®æ•´æ•°å¹³æ–¹æ ¹è€Œæ— éœ€è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚ è¯¥æ–°å‡½æ•°æ”¯æŒä»»æ„å¤§æ•´æ•°ã€‚ å®ƒçš„æ‰§è¡Œé€Ÿåº¦æ¯” `floor(sqrt(n))` å¿«ä½†æ˜¯æ¯” [`math.sqrt()`](math.md#math.sqrt "math.sqrt") æ…¢:

    
    
~~~shell
>>> r = 650320427
>>> s = r ** 2
>>> isqrt(s - 1)         # correct
650320426
>>> floor(sqrt(s - 1))   # incorrect
650320427
~~~

ï¼ˆç”± Mark Dickinson åœ¨ [bpo-36887](https://bugs.python.org/issue?@action=redirect&bpo=36887) ä¸­è´¡çŒ®ã€‚ï¼‰

å‡½æ•° [`math.factorial()`](math.md#math.factorial "math.factorial") ä¸å†æ¥å—éæ•´æ•°ç±»å‚æ•°ã€‚ ï¼ˆç”± Pablo Galindo åœ¨ [bpo-33083](https://bugs.python.org/issue?@action=redirect&bpo=33083) ä¸­è´¡çŒ®ã€‚ï¼‰

### mmapÂ¶

[`mmap.mmap`](mmap.md#mmap.mmap "mmap.mmap") ç±»ç°åœ¨å…·æœ‰ä¸€ä¸ª [`madvise()`](mmap.md#mmap.mmap.madvise "mmap.mmap.madvise") æ–¹æ³•ç”¨äºè®¿é—® `madvise()` ç³»ç»Ÿè°ƒç”¨ã€‚ ï¼ˆç”± Zackery Spytz åœ¨ [bpo-32941](https://bugs.python.org/issue?@action=redirect&bpo=32941) ä¸­è´¡çŒ®ã€‚ï¼‰

### multiprocessingÂ¶

æ·»åŠ äº†æ–°çš„ [`multiprocessing.shared_memory`](multiprocessing.shared_memory.md#module-multiprocessing.shared_memory "multiprocessing.shared_memory: Provides shared memory for direct access across processes.") æ¨¡å—ã€‚ ï¼ˆç”± Davin Potts åœ¨ [bpo-35813](https://bugs.python.org/issue?@action=redirect&bpo=35813) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨macOSä¸Šï¼Œç°åœ¨é»˜è®¤ä½¿ç”¨çš„å¯åŠ¨æ–¹å¼æ˜¯*spawn*å¯åŠ¨æ–¹å¼ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-33725](https://bugs.python.org/issue?@action=redirect&bpo=33725) ä¸­è´¡çŒ®ã€‚ï¼‰

### osÂ¶

åœ¨ Windows ä¸Šæ·»åŠ äº†æ–°å‡½æ•° [`add_dll_directory()`](os.md#os.add_dll_directory "os.add_dll_directory") ç”¨äºåœ¨å¯¼å…¥æ‰©å±•æ¨¡å—æˆ–ä½¿ç”¨ [`ctypes`](ctypes.md#module-ctypes "ctypes: A foreign function library for Python.") åŠ è½½ DLL æ—¶ä¸ºæœ¬æœºä¾èµ–æä¾›é¢å¤–æœç´¢è·¯å¾„ ã€‚ ï¼ˆç”± Steve Dower åœ¨ [bpo-36085](https://bugs.python.org/issue?@action=redirect&bpo=36085) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº†æ–°çš„ [`os.memfd_create()`](os.md#os.memfd_create "os.memfd_create") å‡½æ•°ç”¨äºåŒ…è£… `memfd_create()` ç³»ç»Ÿè°ƒç”¨ã€‚ ï¼ˆç”± Zackery Spytz å’Œ Christian Heimes åœ¨ [bpo-26836](https://bugs.python.org/issue?@action=redirect&bpo=26836) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨ Windows ä¸Šï¼Œå¤§éƒ¨åˆ†ç”¨äºå¤„ç†é‡è§£æç‚¹,ï¼ˆåŒ…æ‹¬ç¬¦å·é“¾æ¥å’Œç›®å½•è¿æ¥ï¼‰çš„æ‰‹åŠ¨é€»è¾‘å·²è¢«å§”æ‰˜ç»™æ“ä½œç³»ç»Ÿã€‚ ç‰¹åˆ«åœ°ï¼Œ[`os.stat()`](os.md#os.stat "os.stat") ç°åœ¨å°†ä¼šéå†æ“ä½œç³»ç»Ÿæ‰€æ”¯æŒçš„ä»»ä½•å†…å®¹ï¼Œè€Œ [`os.lstat()`](os.md#os.lstat "os.lstat") å°†åªæ‰“å¼€è¢«æ ‡è¯†ä¸ºâ€œåç§°ä»£ç†â€çš„é‡è§£æç‚¹ï¼Œè€Œå…¶è¦ç”± [`os.stat()`](os.md#os.stat "os.stat") æ‰“å¼€å…¶ä»–çš„é‡è§£æç‚¹ã€‚ åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œ`stat_result.st_mode` å°†åªä¸ºç¬¦å·é“¾æ¥è€Œéå…¶ä»–ç§ç±»çš„é‡è§£æç‚¹è®¾ç½® `S_IFLNK`ã€‚ è¦æ ‡è¯†å…¶ä»–ç§ç±»çš„é‡è§£æç‚¹ï¼Œè¯·æ£€æŸ¥æ–°çš„ `stat_result.st_reparse_tag` å±æ€§ã€‚

åœ¨ Windows ä¸Šï¼Œ[`os.readlink()`](os.md#os.readlink "os.readlink") ç°åœ¨èƒ½å¤Ÿè¯»å–ç›®å½•è¿æ¥ã€‚ è¯·æ³¨æ„ [`islink()`](os.path.md#os.path.islink "os.path.islink") ä¼šå¯¹ç›®å½•è¿æ¥è¿”å› `False`ï¼Œå› æ­¤é¦–å…ˆæ£€æŸ¥ `islink` çš„ä»£ç å°†è¿ç»­æŠŠè¿æ¥è§†ä¸ºç›®å½•ï¼Œè€Œä¼šå¤„ç† [`os.readlink()`](os.md#os.readlink "os.readlink") æ‰€å¼•å‘é”™è¯¯çš„ä»£ç ç°åœ¨ä¼šæŠŠè¿æ¥è§†ä¸ºé“¾æ¥ã€‚

ï¼ˆç”± Steve Dower åœ¨ [bpo-37834](https://bugs.python.org/issue?@action=redirect&bpo=37834) ä¸­è´¡çŒ®ã€‚ï¼‰

### os.pathÂ¶

è¿”å›å¸ƒå°”å€¼ç»“æœçš„ [`os.path`](os.path.md#module-os.path "os.path: Operations on pathnames.") å‡½æ•°ä¾‹å¦‚ [`exists()`](os.path.md#os.path.exists "os.path.exists"), [`lexists()`](os.path.md#os.path.lexists "os.path.lexists"), [`isdir()`](os.path.md#os.path.isdir "os.path.isdir"), [`isfile()`](os.path.md#os.path.isfile "os.path.isfile"), [`islink()`](os.path.md#os.path.islink "os.path.islink"), ä»¥åŠ [`ismount()`](os.path.md#os.path.ismount "os.path.ismount") ç°åœ¨å¯¹äºåŒ…å«åœ¨ OS å±‚çº§æ— æ³•è¡¨ç¤ºçš„å­—ç¬¦æˆ–å­—èŠ‚çš„è·¯å¾„å°†ä¼šè¿”å› `False` è€Œä¸æ˜¯å¼•å‘ [`ValueError`](3.æ ‡å‡†åº“/exceptions.md#ValueError "ValueError") æˆ–å…¶å­ç±» [`UnicodeEncodeError`](3.æ ‡å‡†åº“/exceptions.md#UnicodeEncodeError "UnicodeEncodeError") å’Œ [`UnicodeDecodeError`](3.æ ‡å‡†åº“/exceptions.md#UnicodeDecodeError "UnicodeDecodeError")ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-33721](https://bugs.python.org/issue?@action=redirect&bpo=33721) ä¸­è´¡çŒ®ã€‚ï¼‰

[`expanduser()`](os.path.md#os.path.expanduser "os.path.expanduser") åœ¨ Windows ä¸Šç°åœ¨æ”¹ç”¨ `USERPROFILE` ç¯å¢ƒå˜é‡è€Œä¸å†ä½¿ç”¨ `HOME`ï¼Œåè€…é€šå¸¸ä¸ä¼šä¸ºä¸€èˆ¬ç”¨æˆ·è´¦æˆ·è®¾ç½®ã€‚ ï¼ˆç”± Anthony Sottile åœ¨ [bpo-36264](https://bugs.python.org/issue?@action=redirect&bpo=36264) ä¸­è´¡çŒ®ã€‚ï¼‰

[`isdir()`](os.path.md#os.path.isdir "os.path.isdir") åœ¨ Windows ä¸Šå°†ä¸å†ä¸ºä¸å­˜åœ¨çš„ç›®å½•çš„é“¾æ¥è¿”å› `True`ã€‚

[`realpath()`](os.path.md#os.path.realpath "os.path.realpath") åœ¨ Windows ä¸Šç°åœ¨ä¼šè¯†åˆ«é‡è§£æç‚¹ï¼ŒåŒ…æ‹¬ç¬¦å·é“¾æ¥å’Œç›®å½•è¿æ¥ã€‚

ï¼ˆç”± Steve Dower åœ¨ [bpo-37834](https://bugs.python.org/issue?@action=redirect&bpo=37834) ä¸­è´¡çŒ®ã€‚ï¼‰

### pathlibÂ¶

è¿”å›å¸ƒå°”å€¼ç»“æœçš„ [`pathlib.Path`](pathlib.md#pathlib.Path "pathlib.Path") æ–¹æ³•ä¾‹å¦‚ [`exists()`](pathlib.md#pathlib.Path.exists "pathlib.Path.exists"), [`is_dir()`](pathlib.md#pathlib.Path.is_dir "pathlib.Path.is_dir"), [`is_file()`](pathlib.md#pathlib.Path.is_file "pathlib.Path.is_file"), [`is_mount()`](pathlib.md#pathlib.Path.is_mount "pathlib.Path.is_mount"), [`is_symlink()`](pathlib.md#pathlib.Path.is_symlink "pathlib.Path.is_symlink"), [`is_block_device()`](pathlib.md#pathlib.Path.is_block_device "pathlib.Path.is_block_device"), [`is_char_device()`](pathlib.md#pathlib.Path.is_char_device "pathlib.Path.is_char_device"), [`is_fifo()`](pathlib.md#pathlib.Path.is_fifo "pathlib.Path.is_fifo"), [`is_socket()`](pathlib.md#pathlib.Path.is_socket "pathlib.Path.is_socket") ç°åœ¨å¯¹äºåŒ…å«åœ¨ OS å±‚çº§æ— æ³•è¡¨ç¤ºçš„å­—ç¬¦æˆ–å­—èŠ‚çš„è·¯å¾„å°†ä¼šè¿”å› `False` è€Œä¸æ˜¯å¼•å‘ [`ValueError`](3.æ ‡å‡†åº“/exceptions.md#ValueError "ValueError") æˆ–å…¶å­ç±» [`UnicodeEncodeError`](3.æ ‡å‡†åº“/exceptions.md#UnicodeEncodeError "UnicodeEncodeError")ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-33721](https://bugs.python.org/issue?@action=redirect&bpo=33721) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº† `pathlib.Path.link_to()`ï¼Œå®ƒå¯ä»¥åˆ›å»ºæŒ‡å‘ä¸€ä¸ªè·¯å¾„çš„ç¡¬é“¾æ¥ã€‚ ï¼ˆç”± Joannah Nanjekye åœ¨ [bpo-26978](https://bugs.python.org/issue?@action=redirect&bpo=26978) ä¸­è´¡çŒ®ã€‚ï¼‰ è¯·æ³¨æ„ `link_to` å·²åœ¨ 3.10 ä¸­è¢«å¼ƒç”¨å¹¶åœ¨ 3.12 ä¸­è¢«ç§»é™¤å¹¶æ”¹ç”¨åœ¨ 3.10 ä¸­æ·»åŠ çš„ `hardlink_to` æ–¹æ³•ï¼Œå®ƒä¸ç°æœ‰ `symlink_to` çš„è¯­æ³•ç›¸åŒ¹é…ã€‚

### pickleÂ¶

[`pickle`](pickle.md#module-pickle "pickle: Convert Python objects to streams of bytes and back.") æ‰©å±•å­ç±»åŒ–é’ˆå¯¹ C ä¼˜åŒ–çš„ [`Pickler`](pickle.md#pickle.Pickler "pickle.Pickler") ç°åœ¨å¯é€šè¿‡å®šä¹‰ç‰¹æ®Šçš„ [`reducer_override()`](pickle.md#pickle.Pickler.reducer_override "pickle.Pickler.reducer_override") æ–¹æ³•æ¥é‡è½½å‡½æ•°å’Œç±»çš„å°å­˜é€»è¾‘ã€‚ ï¼ˆç”± Pierre Glaser å’Œ Olivier Grisel åœ¨ [bpo-35900](https://bugs.python.org/issue?@action=redirect&bpo=35900) ä¸­è´¡çŒ®ã€‚ï¼‰

### plistlibÂ¶

æ·»åŠ äº†æ–°çš„ [`plistlib.UID`](plistlib.md#plistlib.UID "plistlib.UID") å¹¶å¯åŠ¨äº†å¯¹è¯»å–å’Œå†™å…¥ç»è¿‡ NSKeyedArchiver ç¼–ç çš„äºŒè¿›åˆ¶ plists çš„æ”¯æŒã€‚ ï¼ˆç”± Jon Janzen åœ¨ [bpo-26707](https://bugs.python.org/issue?@action=redirect&bpo=26707) ä¸­è´¡çŒ®ã€‚ï¼‰

### pprintÂ¶

[`pprint`](pprint.md#module-pprint "pprint: Data pretty printer.") æ¨¡å—ä¸ºä¸€äº›å‡½æ•°æ·»åŠ äº† _sort_dicts_ å½¢å‚ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›å‡½æ•°ä¼šç»§ç»­åœ¨æ¸²æŸ“æˆ–æ‰“å°ä¹‹å‰å¯¹å­—å…¸è¿›è¡Œæ’åºã€‚ ä½†æ˜¯ï¼Œå¦‚æœ _sort_dicts_ è®¾ä¸ºå‡å€¼ï¼Œåˆ™å­—å…¸å°†ä¿æŒé”®æ’å…¥æ—¶çš„é¡ºåºã€‚ è¿™åœ¨è°ƒè¯•æœŸé—´ä¸ JSON è¾“å…¥è¿›è¡Œæ¯”è¾ƒæ—¶ä¼šå¾ˆæœ‰ç”¨ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¢åŠ äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ–°å‡½æ•° [`pprint.pp()`](pprint.md#pprint.pp "pprint.pp")ï¼Œå®ƒç±»ä¼¼äº [`pprint.pprint()`](pprint.md#pprint.pprint "pprint.pprint") ä½†å®ƒçš„ _sort_dicts_ é»˜è®¤ä¸º `False`:

    
    
~~~shell
>>> from pprint import pprint, pp
>>> d = dict(source='input.txt', operation='filter', destination='output.txt')
>>> pp(d, width=40)                  # Original order
{'source': 'input.txt',
 'operation': 'filter',
 'destination': 'output.txt'}
>>> pprint(d, width=40)              # Keys sorted alphabetically
{'destination': 'output.txt',
 'operation': 'filter',
 'source': 'input.txt'}
~~~

ï¼ˆç”± RÃ©mi Lapeyre åœ¨ [bpo-30670](https://bugs.python.org/issue?@action=redirect&bpo=30670) ä¸­è´¡çŒ®ã€‚ï¼‰

### py_compileÂ¶

[`py_compile.compile()`](py_compile.md#py_compile.compile "py_compile.compile") ç°åœ¨æ”¯æŒé™é»˜æ¨¡å¼ã€‚ ï¼ˆç”± Joannah Nanjekye åœ¨ [bpo-22640](https://bugs.python.org/issue?@action=redirect&bpo=22640) ä¸­è´¡çŒ®ã€‚ï¼‰

### shlexÂ¶

æ–°å¢äº† [`shlex.join()`](shlex.md#shlex.join "shlex.join") å‡½æ•°ä½œä¸º [`shlex.split()`](shlex.md#shlex.split "shlex.split") çš„é€†æ“ä½œã€‚ ï¼ˆç”± Bo Bayles åœ¨ [bpo-32102](https://bugs.python.org/issue?@action=redirect&bpo=32102) ä¸­è´¡çŒ®ã€‚ï¼‰

### shutilÂ¶

[`shutil.copytree()`](shutil.md#shutil.copytree "shutil.copytree") ç°åœ¨æ¥å—æ–°çš„ `dirs_exist_ok` å…³é”®å­—å‚æ•°ã€‚ ï¼ˆç”± Josh Bronson åœ¨ [bpo-20849](https://bugs.python.org/issue?@action=redirect&bpo=20849) ä¸­è´¡çŒ®ã€‚ï¼‰

[`shutil.make_archive()`](shutil.md#shutil.make_archive "shutil.make_archive") ç°åœ¨å¯¹æ–°çš„å½’æ¡£é»˜è®¤ä½¿ç”¨ modern pax (POSIX.1-2001) æ ¼å¼ä»¥æå‡å¯ç§»æ¤æ€§å’Œæ ‡å‡†ä¸€è‡´æ€§ï¼Œæ­¤ç‰¹æ€§ç»§æ‰¿è‡ªå¯¹ [`tarfile`](tarfile.md#module-tarfile "tarfile: Read and write tar-format archive files.") æ¨¡å—çš„ç›¸åº”æ›´æ”¹ã€‚ ï¼ˆç”± C.A.M. Gerlach åœ¨ [bpo-30661](https://bugs.python.org/issue?@action=redirect&bpo=30661) ä¸­è´¡çŒ®ã€‚ï¼‰

[`shutil.rmtree()`](shutil.md#shutil.rmtree "shutil.rmtree") åœ¨ Windows ä¸Šç°åœ¨ä¼šç§»é™¤ç›®å½•è¿æ¥è€Œä¸ä¼šé€’å½’åœ°å…ˆç§»é™¤å…¶ä¸­çš„å†…å®¹ã€‚ ï¼ˆç”± Steve Dower åœ¨ [bpo-37834](https://bugs.python.org/issue?@action=redirect&bpo=37834) ä¸­è´¡çŒ®ã€‚ï¼‰

### socketÂ¶

æ·»åŠ äº†ä¾¿æ·çš„ [`create_server()`](socket.md#socket.create_server "socket.create_server") å’Œ [`has_dualstack_ipv6()`](socket.md#socket.has_dualstack_ipv6 "socket.has_dualstack_ipv6") å‡½æ•°ä»¥è‡ªåŠ¨åŒ–åœ¨åˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—æ—¶é€šå¸¸æƒ…å†µä¸‹æ‰€å¿…é¡»çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬åœ¨åŒä¸€å¥—æ¥å­—ä¸­åŒæ—¶æ¥å— IPv4 å’Œ IPv6 è¿æ¥ã€‚ ï¼ˆç”± Giampaolo RodolÃ  åœ¨ [bpo-17561](https://bugs.python.org/issue?@action=redirect&bpo=17561) ä¸­è´¡çŒ®ã€‚ï¼‰

[`socket.if_nameindex()`](socket.md#socket.if_nameindex "socket.if_nameindex"), [`socket.if_nametoindex()`](socket.md#socket.if_nametoindex "socket.if_nametoindex") å’Œ [`socket.if_indextoname()`](socket.md#socket.if_indextoname "socket.if_indextoname") å‡½æ•°å·²ç»åœ¨ Windows ä¸Šå®ç°ã€‚ ï¼ˆç”± Zackery Spytz åœ¨ [bpo-37007](https://bugs.python.org/issue?@action=redirect&bpo=37007) ä¸­è´¡çŒ®ã€‚ï¼‰

### sslÂ¶

å¢åŠ äº† [`post_handshake_auth`](ssl.md#ssl.SSLContext.post_handshake_auth "ssl.SSLContext.post_handshake_auth") å’Œ [`verify_client_post_handshake()`](ssl.md#ssl.SSLSocket.verify_client_post_handshake "ssl.SSLSocket.verify_client_post_handshake") åˆ†åˆ«å¯ç”¨å’Œåˆå§‹åŒ– TLS 1.3 æ¡æ‰‹åéªŒè¯ã€‚ ï¼ˆç”± Christian Heimes åœ¨ [bpo-34670](https://bugs.python.org/issue?@action=redirect&bpo=34670) ä¸­è´¡çŒ®ã€‚ï¼‰

### statisticsÂ¶

æ·»åŠ äº† [`statistics.fmean()`](statistics.md#statistics.fmean "statistics.fmean") ä½œä¸º [`statistics.mean()`](statistics.md#statistics.mean "statistics.mean") çš„æ›´å¿«é€Ÿçš„æµ®ç‚¹æ•°ç‰ˆç‰ˆæœ¬ã€‚ ï¼ˆç”± Raymond Hettinger å’Œ Steven D'Aprano åœ¨ [bpo-35904](https://bugs.python.org/issue?@action=redirect&bpo=35904) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº† [`statistics.geometric_mean()`](statistics.md#statistics.geometric_mean "statistics.geometric_mean") ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-27181](https://bugs.python.org/issue?@action=redirect&bpo=27181) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº† [`statistics.multimode()`](statistics.md#statistics.multimode "statistics.multimode") ç”¨äºè¿”å›æœ€å¸¸è§å€¼çš„åˆ—è¡¨ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-35892](https://bugs.python.org/issue?@action=redirect&bpo=35892) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº† [`statistics.quantiles()`](statistics.md#statistics.quantiles "statistics.quantiles") ç”¨äºå°†æ•°æ®æˆ–åˆ†å¸ƒåˆ’åˆ†ä¸ºå¤šä¸ªç­‰æ¦‚ç‡åŒºé—´ï¼ˆä¾‹å¦‚å››åˆ†ä½ã€ååˆ†ä½æˆ–ç™¾åˆ†ä½ï¼‰ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-36546](https://bugs.python.org/issue?@action=redirect&bpo=36546) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº† [`statistics.NormalDist`](statistics.md#statistics.NormalDist "statistics.NormalDist") ç”¨äºåˆ›å»ºå’Œæ“çºµéšæœºå˜é‡çš„æ­£æ€åˆ†å¸ƒã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-36018](https://bugs.python.org/issue?@action=redirect&bpo=36018) ä¸­è´¡çŒ®ã€‚ï¼‰

    
    
~~~shell
>>> temperature_feb = NormalDist.from_samples([4, 12, -3, 2, 7, 14])
>>> temperature_feb.mean
6.0
>>> temperature_feb.stdev
6.356099432828281

>>> temperature_feb.cdf(3)            # Chance of being under 3 degrees
0.3184678262814532
>>> # Relative chance of being 7 degrees versus 10 degrees
>>> temperature_feb.pdf(7) / temperature_feb.pdf(10)
1.2039930378537762

>>> el_niÃ±o = NormalDist(4, 2.5)
>>> temperature_feb += el_niÃ±o        # Add in a climate effect
>>> temperature_feb
NormalDist(mu=10.0, sigma=6.830080526611674)

>>> temperature_feb * (9/5) + 32      # Convert to Fahrenheit
NormalDist(mu=50.0, sigma=12.294144947901014)
>>> temperature_feb.samples(3)        # Generate random samples
[7.672102882379219, 12.000027119750287, 4.647488369766392]
~~~

### sysÂ¶

æ·»åŠ äº†æ–°çš„ [`sys.unraisablehook()`](3.æ ‡å‡†åº“/sys.md#sys.unraisablehook "sys.unraisablehook") å‡½æ•°ï¼Œå¯è¢«é‡è½½ä»¥ä¾¿æ§åˆ¶å¦‚ä½•å¤„ç†â€œä¸å¯å¼•å‘çš„å¼‚å¸¸â€ã€‚ å®ƒä¼šåœ¨å‘ç”Ÿäº†ä¸€ä¸ªå¼‚å¸¸ä½† Python æ²¡æœ‰åŠæ³•å¤„ç†æ—¶è¢«è°ƒç”¨ã€‚ ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªææ„å™¨åœ¨åƒåœ¾å›æ”¶æ—¶ ([`gc.collect()`](gc.md#gc.collect "gc.collect")) æ‰€å¼•å‘çš„å¼‚å¸¸ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-36829](https://bugs.python.org/issue?@action=redirect&bpo=36829) ä¸­è´¡çŒ®ã€‚ï¼‰

### tarfileÂ¶

[`tarfile`](tarfile.md#module-tarfile "tarfile: Read and write tar-format archive files.") æ¨¡å—ç°åœ¨å¯¹æ–°çš„å½’æ¡£é»˜è®¤ä½¿ç”¨ modern pax (POSIX.1-2001) æ ¼å¼è€Œä¸å†æ˜¯ä¹‹å‰çš„ GNU ä¸“å±æ ¼å¼ã€‚ è¿™é€šè¿‡æ ‡å‡†åŒ–å’Œå¯æ‰©å±•æ ¼å¼çš„ç»Ÿä¸€ç¼–ç  (UTF-8) æå‡äº†è·¨å¹³å°å¯ç§»æ¤æ€§ï¼Œè¿˜æä¾›äº†å…¶ä»–ä¸€äº›ç›Šå¤„ã€‚ ï¼ˆç”± C.A.M. Gerlach åœ¨ [bpo-36268](https://bugs.python.org/issue?@action=redirect&bpo=36268) ä¸­è´¡çŒ®ã€‚ï¼‰

### threadingÂ¶

æ·»åŠ äº†æ–°çš„ [`threading.excepthook()`](threading.md#threading.excepthook "threading.excepthook") å‡½æ•°ç”¨æ¥å¤„ç†æœªæ•è·çš„ [`threading.Thread.run()`](threading.md#threading.Thread.run "threading.Thread.run") å¼‚å¸¸ã€‚ å®ƒå¯è¢«é‡è½½ä»¥ä¾¿æ§åˆ¶å¦‚ä½•å¤„ç†æœªæ•è·çš„ [`threading.Thread.run()`](threading.md#threading.Thread.run "threading.Thread.run") å¼‚å¸¸ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-1230540](https://bugs.python.org/issue?@action=redirect&bpo=1230540) ä¸­è´¡çŒ®ã€‚ï¼‰

æ·»åŠ äº†æ–°çš„ [`threading.get_native_id()`](threading.md#threading.get_native_id "threading.get_native_id") å‡½æ•°ä»¥åŠ [`threading.Thread`](threading.md#threading.Thread "threading.Thread") ç±»çš„ [`native_id`](threading.md#threading.Thread.native_id "threading.Thread.native_id") å±æ€§ã€‚ å®ƒä»¬ä¼šè¿”å›å†…æ ¸æ‰€åˆ†é…ç»™å½“å‰çº¿ç¨‹çš„åŸç”Ÿæ•´æ•°çº¿ç¨‹ IDã€‚ æ­¤ç‰¹æ€§ä»…åœ¨ç‰¹å®šå¹³å°ä¸Šå¯ç”¨ï¼Œå‚è§ [`get_native_id`](threading.md#threading.get_native_id "threading.get_native_id") äº†è§£è¯¦æƒ…ã€‚ ï¼ˆç”± Jake Tesler åœ¨ [bpo-36084](https://bugs.python.org/issue?@action=redirect&bpo=36084) ä¸­è´¡çŒ®ã€‚ï¼‰

### tokenizeÂ¶

å½“æä¾›ä¸å¸¦æœ«å°¾æ–°è¡Œçš„è¾“å…¥æ—¶ï¼Œ[`tokenize`](tokenize.md#module-tokenize "tokenize: Lexical scanner for Python source code.") æ¨¡å—ç°åœ¨ä¼šéšå¼åœ°æ·»åŠ  `NEWLINE` å½¢ç¬¦ã€‚ æ­¤è¡Œä¸ºç°åœ¨å·²ä¸ C è¯æ³•åˆ†æå™¨çš„å†…éƒ¨è¡Œä¸ºç›¸åŒ¹é…ã€‚ ï¼ˆç”± Ammar Askar åœ¨ [bpo-33899](https://bugs.python.org/issue?@action=redirect&bpo=33899) ä¸­è´¡çŒ®ã€‚ï¼‰

### tkinterÂ¶

åœ¨ `tkinter.Spinbox` ä¸­æ·»åŠ äº†æ–¹æ³• `selection_from()`, `selection_present()`, `selection_range()` å’Œ `selection_to()`ã€‚ ï¼ˆç”± Juliette Monsel åœ¨ [bpo-34829](https://bugs.python.org/issue?@action=redirect&bpo=34829) ä¸­è´¡çŒ®ã€‚ï¼‰

åœ¨ `tkinter.Canvas` ç±»ä¸­æ·»åŠ äº†æ–¹æ³• `moveto()`ã€‚ ï¼ˆç”± Juliette Monsel åœ¨ [bpo-23831](https://bugs.python.org/issue?@action=redirect&bpo=23831) ä¸­è´¡çŒ®ã€‚ï¼‰

`tkinter.PhotoImage` ç±»ç°åœ¨å…·æœ‰ `transparency_get()` å’Œ `transparency_set()` æ–¹æ³•ã€‚ ï¼ˆç”± Zackery Spytz åœ¨ [bpo-25451](https://bugs.python.org/issue?@action=redirect&bpo=25451) ä¸­è´¡çŒ®ã€‚ï¼‰

### timeÂ¶

ä¸º macOS 10.12 æ·»åŠ äº†æ–°çš„æ—¶é’Ÿ [`CLOCK_UPTIME_RAW`](time.md#time.CLOCK_UPTIME_RAW "time.CLOCK_UPTIME_RAW")ã€‚ ï¼ˆç”± Joannah Nanjekye åœ¨ [bpo-35702](https://bugs.python.org/issue?@action=redirect&bpo=35702) ä¸­è´¡çŒ®ã€‚ï¼‰

### typingÂ¶

[`typing`](typing.md#module-typing "typing: Support for type hints \(see :pep:`484`\).") æ¨¡å—åŠ å…¥äº†ä¸€äº›æ–°ç‰¹æ€§ï¼š

  * ä¸€ä¸ªå¸¦æœ‰é”®ä¸“å±ç±»å‹çš„å­—å…¸ç±»å‹ã€‚ å‚è§ [**PEP 589**](https://peps.python.org/pep-0589/) å’Œ [`typing.TypedDict`](typing.md#typing.TypedDict "typing.TypedDict")ã€‚ TypedDict åªä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºé”®ã€‚ é»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªé”®éƒ½è¦æ±‚æä¾›ã€‚ æŒ‡å®š "total=False" ä»¥å…è®¸é”®ä½œä¸ºå¯é€‰é¡¹:
    
        class Location(TypedDict, total=False):
        lat_long: tuple
        grid_square: str
        xy_coordinate: tuple
    

  * Literal ç±»å‹ã€‚ å‚è§ [**PEP 586**](https://peps.python.org/pep-0586/) å’Œ [`typing.Literal`](typing.md#typing.Literal "typing.Literal")ã€‚ Literal ç±»å‹æŒ‡æ˜ä¸€ä¸ªå½¢å‚æˆ–è¿”å›å€¼è¢«é™å®šä¸ºä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å®šçš„å­—é¢å€¼:
    
        def get_status(port: int) -> Literal['connected', 'disconnected']:
        ...
    

  * "Final" å˜é‡ã€å‡½æ•°ã€æ–¹æ³•å’Œç±»ã€‚ å‚è§ [**PEP 591**](https://peps.python.org/pep-0591/), [`typing.Final`](typing.md#typing.Final "typing.Final") å’Œ [`typing.final()`](typing.md#typing.final "typing.final")ã€‚ final é™å®šç¬¦ä¼šæŒ‡ç¤ºé™æ€ç±»å‹æ£€æŸ¥å™¨é™åˆ¶è¿›è¡Œå­ç±»åŒ–ã€é‡è½½æˆ–é‡æ–°èµ‹å€¼:
    
        pi: Final[float] = 3.1415926536
    

  * åè®®å®šä¹‰ã€‚ å‚è§ [**PEP 544**](https://peps.python.org/pep-0544/), [`typing.Protocol`](typing.md#typing.Protocol "typing.Protocol") å’Œ [`typing.runtime_checkable()`](typing.md#typing.runtime_checkable "typing.runtime_checkable")ã€‚ ç®€å•çš„ ABC ä¾‹å¦‚ [`typing.SupportsInt`](typing.md#typing.SupportsInt "typing.SupportsInt") ç°åœ¨æ˜¯ `Protocol` çš„å­ç±»ã€‚

  * æ–°çš„åè®®ç±» [`typing.SupportsIndex`](typing.md#typing.SupportsIndex "typing.SupportsIndex")ã€‚

  * æ–°çš„å‡½æ•° [`typing.get_origin()`](typing.md#typing.get_origin "typing.get_origin") å’Œ [`typing.get_args()`](typing.md#typing.get_args "typing.get_args")ã€‚

### unicodedataÂ¶

[`unicodedata`](unicodedata.md#module-unicodedata "unicodedata: Access the Unicode Database.") æ¨¡å—ç°åœ¨å·²å‡çº§ä¸ºä½¿ç”¨ [Unicode 12.1.0](https://blog.unicode.org/2019/05/unicode-12-1-en.md) å‘å¸ƒç‰ˆã€‚

æ–°çš„å‡½æ•° [`is_normalized()`](unicodedata.md#unicodedata.is_normalized "unicodedata.is_normalized") å¯è¢«ç”¨æ¥éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç‰¹å®šæ­£è§„å½¢å¼ï¼Œé€šå¸¸ä¼šæ¯”å®é™…è¿›è¡Œå­—ç¬¦ä¸²æ­£è§„åŒ–è¦å¿«å¾—å¤šã€‚ ï¼ˆç”± Max Belanger, David Euresti å’Œ Greg Price åœ¨ [bpo-32285](https://bugs.python.org/issue?@action=redirect&bpo=32285) å’Œ [bpo-37966](https://bugs.python.org/issue?@action=redirect&bpo=37966) ä¸­è´¡çŒ®ã€‚ï¼‰

### unittestÂ¶

æ·»åŠ äº† [`AsyncMock`](unittest.mock.md#unittest.mock.AsyncMock "unittest.mock.AsyncMock") ä»¥æ”¯æŒå¼‚æ­¥ç‰ˆæœ¬çš„ [`Mock`](unittest.mock.md#unittest.mock.Mock "unittest.mock.Mock")ã€‚ åŒæ—¶ä¹Ÿæ·»åŠ äº†ç›¸åº”çš„æ–­è¨€å‡½æ•°ç”¨äºæµ‹è¯•ã€‚ ï¼ˆç”± Lisa Roach åœ¨ [bpo-26467](https://bugs.python.org/issue?@action=redirect&bpo=26467) ä¸­è´¡çŒ®ã€‚ï¼‰

unittest æ·»åŠ äº† [`addModuleCleanup()`](unittest.md#unittest.addModuleCleanup "unittest.addModuleCleanup") å’Œ [`addClassCleanup()`](unittest.md#unittest.TestCase.addClassCleanup "unittest.TestCase.addClassCleanup") ä»¥æ”¯æŒå¯¹ `setUpModule()` å’Œ [`setUpClass()`](unittest.md#unittest.TestCase.setUpClass "unittest.TestCase.setUpClass") è¿›è¡Œæ¸…ç†ã€‚ ï¼ˆç”± Lisa Roach åœ¨ [bpo-24412](https://bugs.python.org/issue?@action=redirect&bpo=24412) ä¸­è´¡çŒ®ã€‚ï¼‰

ä¸€äº›æ¨¡æ‹Ÿæ–­è¨€å‡½æ•°ç°åœ¨ä¹Ÿä¼šåœ¨å¤±è´¥æ—¶æ‰“å°ä¸€ä¸ªå®é™…è°ƒç”¨åˆ—è¡¨ã€‚ ï¼ˆç”± Petter Strandmark åœ¨ [bpo-35047](https://bugs.python.org/issue?@action=redirect&bpo=35047) ä¸­è´¡çŒ®ã€‚ï¼‰

[`unittest`](unittest.md#module-unittest "unittest: Unit testing framework for Python.") æ¨¡å—å·²æ”¯æŒé€šè¿‡ [`unittest.IsolatedAsyncioTestCase`](unittest.md#unittest.IsolatedAsyncioTestCase "unittest.IsolatedAsyncioTestCase") æ¥ä½¿ç”¨åç¨‹ä½œä¸ºæµ‹è¯•ç”¨ä¾‹ã€‚ ï¼ˆç”± Andrew Svetlov åœ¨ [bpo-32972](https://bugs.python.org/issue?@action=redirect&bpo=32972) ä¸­è´¡çŒ®ã€‚ï¼‰

ç¤ºä¾‹:

    
    
~~~
import unittest
~~~
    
    class TestRequest(unittest.IsolatedAsyncioTestCase):
    
        async def asyncSetUp(self):
            self.connection = await AsyncConnection()
    
        async def test_get(self):
            response = await self.connection.get("https://example.com")
            self.assertEqual(response.status_code, 200)
    
        async def asyncTearDown(self):
            await self.connection.close()
    
    
    if __name__ == "__main__":
        unittest.main()
    

### venvÂ¶

ç°åœ¨ [`venv`](3.æ ‡å‡†åº“/venv.md#module-venv "venv: Creation of virtual environments.") åœ¨æ‰€æœ‰å¹³å°ä¸Šéƒ½ä¼šåŒ…å« `Activate.ps1` è„šæœ¬ç”¨äºåœ¨ PowerShell Core 6.1 ä¸‹æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚ ï¼ˆç”± Brett Cannon åœ¨ [bpo-32718](https://bugs.python.org/issue?@action=redirect&bpo=32718) ä¸­è´¡çŒ®ã€‚ï¼‰

### weakrefÂ¶

ç”± [`weakref.proxy()`](3.æ ‡å‡†åº“/weakref.md#weakref.proxy "weakref.proxy") è¿”å›çš„ä»£ç†å¯¹è±¡ç°åœ¨é™¤å…¶ä»–ç®—æœ¯è¿ç®—ç¬¦å¤–ä¹Ÿæ”¯æŒçŸ©é˜µä¹˜æ³•è¿ç®—ç¬¦ `@` å’Œ `@=`ã€‚ ï¼ˆç”± Mark Dickinson åœ¨ [bpo-36669](https://bugs.python.org/issue?@action=redirect&bpo=36669) ä¸­è´¡çŒ®ã€‚ï¼‰

### xmlÂ¶

ä½œä¸ºå¯¹ DTD å’Œå¤–éƒ¨å®ä½“æ£€ç´¢çš„ç¼“è§£ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ [`xml.dom.minidom`](xml.dom.minidom.md#module-xml.dom.minidom "xml.dom.minidom: Minimal Document Object Model \(DOM\) implementation.") å’Œ [`xml.sax`](xml.sax.md#module-xml.sax "xml.sax: Package containing SAX2 base classes and convenience functions.") æ¨¡å—ä¸å†å¤„ç†å¤–éƒ¨å®ä½“ã€‚ ï¼ˆç”± Christian Heimes åœ¨ [bpo-17239](https://bugs.python.org/issue?@action=redirect&bpo=17239) ä¸­è´¡çŒ®ã€‚ï¼‰

[`xml.etree.ElementTree`](xml.etree.elementtree.md#module-xml.etree.ElementTree "xml.etree.ElementTree: Implementation of the ElementTree API.") æ¨¡å—ä¸­çš„ `.find*()` æ–¹æ³•æ”¯æŒé€šé…ç¬¦æœç´¢ä¾‹å¦‚ `{*}tag`ï¼Œæ­¤æœç´¢ä¼šå¿½ç•¥å‘½åç©ºé—´ä»¥åŠè¿”å›ç»™å®šå‘½åç©ºé—´ä¸­æ‰€æœ‰æ ‡ç­¾çš„ `{namespace}*`ã€‚ ï¼ˆç”± Stefan Behnel åœ¨ [bpo-28238](https://bugs.python.org/issue?@action=redirect&bpo=28238) ä¸­è´¡çŒ®ã€‚ï¼‰

[`xml.etree.ElementTree`](xml.etree.elementtree.md#module-xml.etree.ElementTree "xml.etree.ElementTree: Implementation of the ElementTree API.") æ¨¡å—æä¾›äº†å®ç° C14N 2.0 çš„æ–°å‡½æ•° `â€“xml.etree.ElementTree.canonicalize()`ã€‚ ï¼ˆç”± Stefan Behnel åœ¨ [bpo-13611](https://bugs.python.org/issue?@action=redirect&bpo=13611) ä¸­è´¡çŒ®ã€‚ï¼‰

[`xml.etree.ElementTree.XMLParser`](xml.etree.elementtree.md#xml.etree.ElementTree.XMLParser "xml.etree.ElementTree.XMLParser") çš„ç›®æ ‡å¯¹è±¡å¯é€šè¿‡æ–°çš„å›è°ƒæ–¹æ³• `start_ns()` å’Œ `end_ns()` æ¥æ¥å—å‘½åç©ºé—´å£°æ˜äº‹ä»¶ã€‚ æ­¤å¤–ï¼Œ[`xml.etree.ElementTree.TreeBuilder`](xml.etree.elementtree.md#xml.etree.ElementTree.TreeBuilder "xml.etree.ElementTree.TreeBuilder") ç›®æ ‡å¯è¢«é…ç½®ä¸ºå¤„ç†æœ‰å…³æ³¨é‡Šå’Œå¤„ç†æŒ‡ä»¤äº‹ä»¶ä»¥å°†å®ƒä»¬åŒ…å«åœ¨æ‰€ç”Ÿæˆçš„æ ‘å½“ä¸­ã€‚ ï¼ˆç”± Stefan Behnel åœ¨ [bpo-36676](https://bugs.python.org/issue?@action=redirect&bpo=36676) å’Œ [bpo-36673](https://bugs.python.org/issue?@action=redirect&bpo=36673) ä¸­è´¡çŒ®ã€‚ï¼‰

### xmlrpcÂ¶

[`xmlrpc.client.ServerProxy`](xmlrpc.client.md#xmlrpc.client.ServerProxy "xmlrpc.client.ServerProxy") ç°åœ¨æ”¯æŒå¯é€‰çš„ _headers_ å…³é”®å­—å‚æ•°ä½œä¸ºéšåŒæ¯æ¬¡è¯·æ±‚å‘é€çš„ HTTP æ ‡å¤´åºåˆ—ã€‚ æ­¤ç‰¹å¾çš„ä½œç”¨ä¹‹ä¸€æ˜¯ä½¿å¾—ä»é»˜è®¤çš„åŸºç¡€è®¤è¯å‡çº§åˆ°æ›´å¿«é€Ÿçš„ä¼šè¯è®¤è¯æˆä¸ºå¯èƒ½ã€‚ ï¼ˆç”± CÃ©dric Krier åœ¨ [bpo-35153](https://bugs.python.org/issue?@action=redirect&bpo=35153) ä¸­è´¡çŒ®ã€‚ï¼‰

## æ€§èƒ½ä¼˜åŒ–Â¶

  * [`subprocess`](subprocess.md#module-subprocess "subprocess: Subprocess management.") æ¨¡å—ç°åœ¨èƒ½åœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨ [`os.posix_spawn()`](os.md#os.posix_spawn "os.posix_spawn") å‡½æ•°ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚ ç›®å‰ï¼Œå®ƒçš„ä½¿ç”¨ä»…é™ macOS å’Œ Linuxï¼ˆä½¿ç”¨ glibc 2.24 æˆ–æ›´æ–°ç‰ˆæœ¬ï¼‰ï¼Œå¹¶è¦æ±‚æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

    * _close_fds_ ä¸ºå‡å€¼ï¼›

    * _preexec_fn_ , _pass_fds_ , _cwd_ å’Œ _start_new_session_ å½¢å‚æœªè®¾ç½®ï¼›

    * _executable_ è·¯å¾„åŒ…å«ä¸€ä¸ªç›®å½•ã€‚

ï¼ˆç”± Joannah Nanjekye å’Œ Victor Stinner åœ¨ [bpo-35537](https://bugs.python.org/issue?@action=redirect&bpo=35537) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`shutil.copyfile()`](shutil.md#shutil.copyfile "shutil.copyfile"), [`shutil.copy()`](shutil.md#shutil.copy "shutil.copy"), [`shutil.copy2()`](shutil.md#shutil.copy2 "shutil.copy2"), [`shutil.copytree()`](shutil.md#shutil.copytree "shutil.copytree") å’Œ [`shutil.move()`](shutil.md#shutil.move "shutil.move") åœ¨ Linux å’Œ macOS ä¸Šä¼šä½¿ç”¨å¹³å°ä¸“å±çš„ "fast-copy" ç³»ç»Ÿè°ƒç”¨ä»¥æé«˜æ•ˆç‡ã€‚ "fast-copy" æ„å‘³ç€æ‹·è´æ“ä½œå‘ç”Ÿäºå†…æ ¸ä¸­ï¼Œä»è€Œé¿å…åœ¨è¿›è¡Œ "`outfd.write(infd.read())`" ç­‰æ“ä½œæ—¶ä½¿ç”¨ Python ä¸­çš„ç”¨æˆ·ç©ºé—´ç¼“å†²åŒºã€‚ åœ¨ Windows ä¸Š [`shutil.copyfile()`](shutil.md#shutil.copyfile "shutil.copyfile") ä¼šä½¿ç”¨æ›´å¤§çš„é»˜è®¤ç¼“å†²åŒºï¼ˆ1 MiB è€Œä¸æ˜¯ 16 KiBï¼‰å¹¶ä¸”ä½¿ç”¨åŸºäº [`memoryview()`](stdtypes.md#memoryview "memoryview") çš„ [`shutil.copyfileobj()`](shutil.md#shutil.copyfileobj "shutil.copyfileobj") ç‰ˆæœ¬ã€‚ åœ¨åŒä¸€åˆ†åŒºå†…æ‹·è´ä¸€ä¸ª 512 MiB æ–‡ä»¶çš„é€Ÿåº¦æå‡åœ¨ Linux ä¸Šçº¦ä¸º +26%ï¼Œåœ¨ macOS ä¸Šä¸º +50%ï¼Œåœ¨ Windows ä¸Šä¸º +40%ã€‚ æ­¤å¤–è¿˜å°†æ¶ˆè€—æ›´å°‘çš„ CPU å‘¨æœŸã€‚ å‚è§ [ä¾èµ–äºå…·ä½“å¹³å°çš„é«˜æ•ˆæ‹·è´æ“ä½œ](shutil.md#shutil-platform-dependent-efficient-copy-operations) ä¸€èŠ‚ã€‚ ï¼ˆç”± Giampaolo RodolÃ  åœ¨ [bpo-33671](https://bugs.python.org/issue?@action=redirect&bpo=33671) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`shutil.copytree()`](shutil.md#shutil.copytree "shutil.copytree") ä¼šæ ¹æ®å…¶æ‰€ç”¨ç¼“å­˜çš„ [`os.stat()`](os.md#os.stat "os.stat") å€¼ä½¿ç”¨ [`os.scandir()`](os.md#os.scandir "os.scandir") å‡½æ•°åŠæ‰€æœ‰æ‹·è´å‡½æ•°ã€‚ æ‹·è´ä¸€ä¸ªåŒ…å« 8000 æ–‡ä»¶çš„ç›®å½•çš„é€Ÿåº¦æå‡åœ¨ Linux ä¸Šçº¦ä¸º +9%ï¼Œåœ¨ Windows ä¸Šä¸º +20%ï¼Œå¯¹äº Windows SMB å…±äº«ç›®å½•åˆ™ä¸º +30%ã€‚ æ­¤å¤– [`os.stat()`](os.md#os.stat "os.stat") ç³»ç»Ÿè°ƒç”¨çš„æ¬¡æ•°ä¹Ÿå‡å°‘äº† 38%ï¼Œä½¿å¾— [`shutil.copytree()`](shutil.md#shutil.copytree "shutil.copytree") åœ¨ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿä¸Šä¼šç‰¹åˆ«å¿«é€Ÿã€‚ ï¼ˆç”±Giampaolo RodolÃ  åœ¨ [bpo-33695](https://bugs.python.org/issue?@action=redirect&bpo=33695) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`pickle`](pickle.md#module-pickle "pickle: Convert Python objects to streams of bytes and back.") æ¨¡å—ä½¿ç”¨çš„é»˜è®¤åè®®ç°åœ¨ä¸º Protocol 4ï¼Œæœ€æ—©åœ¨ Python 3.4 ä¸­è¢«å¼•å…¥ã€‚ å®ƒæä¾›äº†æ¯”è‡ª Python 3.0 èµ·å¯ç”¨çš„ Protocol 3 æ›´å¥½çš„æ€§èƒ½å’Œæ›´å°çš„æ•°æ®å°ºå¯¸ã€‚

  * ä» `PyGC_Head` ç§»é™¤äº†ä¸€ä¸ª [`Py_ssize_t`](10.C%20APIæ¥å£/intro.md#c.Py_ssize_t "Py_ssize_t") æˆå‘˜ã€‚ æ‰€æœ‰è·Ÿè¸ª GC çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ tuple, list, dictï¼‰å¤§å°å‡å°‘äº† 4 æˆ– 8 å­—èŠ‚ã€‚ ï¼ˆç”± Inada Naoki åœ¨ [bpo-33597](https://bugs.python.org/issue?@action=redirect&bpo=33597) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`uuid.UUID`](uuid.md#uuid.UUID "uuid.UUID") ç°åœ¨ä¼šä½¿ç”¨ `__slots__` ä»¥å‡å°‘å†…å­˜è¶³è¿¹ã€‚ ï¼ˆç”± Wouter Bolsterlee å’Œ Tal Einat åœ¨ [bpo-30977](https://bugs.python.org/issue?@action=redirect&bpo=30977) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`operator.itemgetter()`](operator.md#operator.itemgetter "operator.itemgetter") çš„æ€§èƒ½æå‡äº† 33%ã€‚ ä¼˜åŒ–äº†å‚æ•°å¤„ç†ï¼Œå¹¶ä¸ºå¸¸è§çš„åœ¨å…ƒç»„ä¸­å•ä¸ªéè´Ÿæ•´æ•°ç´¢å¼•çš„æƒ…å†µæ–°å¢äº†ä¸€æ¡å¿«é€Ÿè·¯å¾„ï¼ˆè¿™æ˜¯æ ‡å‡†åº“ä¸­çš„å…¸å‹ç”¨ä¾‹ï¼‰ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-35664](https://bugs.python.org/issue?@action=redirect&bpo=35664) ä¸­è´¡çŒ®ã€‚

  * åŠ å¿«äº†åœ¨ [`collections.namedtuple()`](collections.md#collections.namedtuple "collections.namedtuple") ä¸­çš„å­—æ®µæŸ¥æ‰¾ã€‚ å®ƒä»¬ç°åœ¨çš„é€Ÿåº¦å¿«äº†ä¸¤å€ä»¥ä¸Šï¼Œæˆä¸º Python ä¸­æœ€å¿«çš„å®ä¾‹å˜é‡æŸ¥æ‰¾å½¢å¼ã€‚ ï¼ˆç”± Raymond Hettinger, Pablo Galindo å’Œ Joe Jevnik, Serhiy Storchaka åœ¨ [bpo-32492](https://bugs.python.org/issue?@action=redirect&bpo=32492) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å¦‚æœè¾“å…¥çš„å¯è¿­ä»£å¯¹è±¡çš„é•¿åº¦å·²çŸ¥ (å³è¾“å…¥å¯¹è±¡å®ç°äº† `__len__`)ï¼Œ[`list`](stdtypes.md#list "list") æ„é€ å™¨ä¸ä¼šè¿‡åº¦åˆ†é…å†…éƒ¨é¡¹ç¼“å†²åŒºã€‚ è¿™ä½¿å¾—æ‰€åˆ›å»ºçš„åˆ—è¡¨èµ„æºå ç”¨å¹³å‡å‡å°‘äº† 12%ã€‚ ï¼ˆç”± Raymond Hettinger å’Œ Pablo Galindo åœ¨ [bpo-33234](https://bugs.python.org/issue?@action=redirect&bpo=33234) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ç±»å˜é‡å†™å…¥é€Ÿåº¦åŠ å€ã€‚ å½“ä¸€ä¸ªéå†—ä½™å±æ€§è¢«æ›´æ–°æ—¶ï¼Œä¹‹å‰å­˜åœ¨ä¸€ä¸ªæ›´æ–° slots çš„éå¿…è¦è°ƒç”¨ã€‚ ï¼ˆç”± Stefan Behnel, Pablo Galindo Salgado, Raymond Hettinger, Neil Schemenauer, å’Œ Serhiy Storchaka åœ¨ [bpo-36012](https://bugs.python.org/issue?@action=redirect&bpo=36012) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å‡å°‘äº†ä¼ é€’ç»™è®¸å¤šå†…ç½®å‡½æ•°å’Œæ–¹æ³•çš„å‚æ•°è½¬æ¢çš„å¼€é”€ã€‚ è¿™ä½¿å¾—æŸäº›ç®€å•å†…ç½®å‡½æ•°å’Œæ–¹æ³•çš„é€Ÿåº¦æå‡äº† 20--50%ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-23867](https://bugs.python.org/issue?@action=redirect&bpo=23867), [bpo-35582](https://bugs.python.org/issue?@action=redirect&bpo=35582) å’Œ [bpo-36127](https://bugs.python.org/issue?@action=redirect&bpo=36127) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `LOAD_GLOBAL` æŒ‡ä»¤ç°åœ¨ä¼šä½¿ç”¨æ–°çš„ "per opcode cache" æœºåˆ¶ã€‚ å®ƒçš„é€Ÿåº¦ç°åœ¨æå‡äº†å¤§çº¦ 40%ã€‚ ï¼ˆç”± Yury Selivanov å’Œ Inada Naoki åœ¨ [bpo-26219](https://bugs.python.org/issue?@action=redirect&bpo=26219) ä¸­è´¡çŒ®ã€‚ï¼‰

## æ„å»ºå’Œ C API çš„æ”¹å˜Â¶

  * é»˜è®¤çš„ [`sys.abiflags`](3.æ ‡å‡†åº“/sys.md#sys.abiflags "sys.abiflags") æˆä¸ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼špymalloc çš„ `m` æ——æ ‡ä¸å†æœ‰æ„ä¹‰ï¼ˆæ— è®ºæ˜¯å¦å¯ç”¨ pymalloc æ„å»ºéƒ½æ˜¯å…¼å®¹ ABI çš„ï¼‰å› æ­¤å·²è¢«ç§»é™¤ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-36707](https://bugs.python.org/issue?@action=redirect&bpo=36707) ä¸­è´¡çŒ®ã€‚ï¼‰

æ”¹å˜çš„ä¾‹å­ï¼š

    * åªä¼šå®‰è£… `python3.8` ç¨‹åºï¼Œä¸å†æœ‰ `python3.8m` ç¨‹åºã€‚

    * åªä¼šå®‰è£… `python3.8-config` è„šæœ¬ï¼Œä¸å†æœ‰ `python3.8m-config` è„šæœ¬ã€‚

    * `m` æ——æ ‡å·²ç»ä»åŠ¨æ€åº“æ–‡ä»¶ååç¼€ä¸­ç§»é™¤ï¼šåŒ…æ‹¬æ ‡å‡†åº“ä¸­çš„æ‰©å±•æ¨¡å—ä»¥åŠç¬¬ä¸‰æ–¹åŒ…æ‰€äº§ç”Ÿå’Œå®‰è£…çš„æ¨¡å—ä¾‹å¦‚ä» PyPI ä¸‹è½½çš„æ¨¡å—ã€‚ ä»¥ Linux ä¸ºä¾‹ï¼ŒPython 3.7 çš„åç¼€ `.cpython-37m-x86_64-linux-gnu.so` åœ¨ Python 3.8 ä¸­æ”¹ä¸º `.cpython-38-x86_64-linux-gnu.so`ã€‚

  * é‡æ–°ç»„ç»‡äº†æ‰€æœ‰å¤´æ–‡ä»¶ä»¥æ›´å¥½åœ°åŒºåˆ†ä¸åŒç§ç±»çš„ APIï¼š

    * `Include/*.h` åº”ä¸ºå¯ç§»æ¤çš„å…¬æœ‰ç¨³å®šç‰ˆ C APIã€‚

    * `Include/cpython/*.h` åº”ä¸º CPython ä¸“å±çš„ä¸ç¨³å®šç‰ˆ C APIï¼›å…¬æœ‰ APIï¼Œéƒ¨åˆ†ç§æœ‰ API é™„åŠ  `_Py` or `_PY` å‰ç¼€ã€‚

    * `Include/internal/*.h` åº”ä¸º CPython ç‰¹åˆ«ä¸“å±çš„ç§æœ‰å†…éƒ¨ C APIã€‚ æ­¤ API ä¸å…·å¤‡å‘ä¸‹å…¼å®¹ä¿è¯å¹¶ä¸”ä¸åº”åœ¨ CPython ä»¥å¤–è¢«ä½¿ç”¨ã€‚ å®ƒä»¬çš„å…¬å¼€ä»…é€‚ç”¨äºç‰¹åˆ«é™å®šçš„éœ€æ±‚ä¾‹å¦‚è°ƒè¯•å™¨å’Œæ€§èƒ½åˆ†æç­‰å¿…é¡»ç›´æ¥è®¿é—® CPython å†…éƒ¨æ•°æ®è€Œä¸é€šè¿‡è°ƒç”¨å‡½æ•°çš„åº”ç”¨ã€‚ æ­¤ API ç°åœ¨æ˜¯é€šè¿‡ `make install` å®‰è£…çš„ã€‚

ï¼ˆç”± Victor Stinner åœ¨ [bpo-35134](https://bugs.python.org/issue?@action=redirect&bpo=35134) å’Œ [bpo-35081](https://bugs.python.org/issue?@action=redirect&bpo=35081) ä¸­è´¡çŒ®ï¼Œç›¸å…³å·¥ä½œç”± Eric Snow åœ¨ Python 3.7 ä¸­å‘èµ·ã€‚ï¼‰

  * æŸäº›å®å·²è¢«è½¬æ¢ä¸ºé™æ€å†…è”å‡½æ•°ï¼šå½¢å‚ç±»å‹å’Œè¿”å›ç±»å‹å®šä¹‰è‰¯å¥½ï¼Œå®ƒä»¬ä¸å†ä¼šæœ‰ä¸å®ç›¸å…³çš„é—®é¢˜ï¼Œå˜é‡å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸã€‚ ä¾‹å¦‚ï¼š

    * [`Py_INCREF()`](refcounting.md#c.Py_INCREF "Py_INCREF"), [`Py_DECREF()`](refcounting.md#c.Py_DECREF "Py_DECREF")

    * [`Py_XINCREF()`](refcounting.md#c.Py_XINCREF "Py_XINCREF"), [`Py_XDECREF()`](refcounting.md#c.Py_XDECREF "Py_XDECREF")

    * `PyObject_INIT()`, `PyObject_INIT_VAR()`

    * ç§æœ‰å‡½æ•°: `_PyObject_GC_TRACK()`, `_PyObject_GC_UNTRACK()`, `_Py_Dealloc()`

ï¼ˆç”± Victor Stinner åœ¨ [bpo-35059](https://bugs.python.org/issue?@action=redirect&bpo=35059) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `PyByteArray_Init()` å’Œ `PyByteArray_Fini()` å‡½æ•°å·²è¢«ç§»é™¤ã€‚ å®ƒä»¬è‡ª Python 2.7.4 å’Œ Python 3.2.0 èµ·å°±æ²¡æœ‰ä»»ä½•ç”¨å¤„ï¼Œè¢«æ’é™¤åœ¨å—é™ API (ç¨³å®š ABI) ä¹‹å¤–ï¼Œå¹¶ä¸”æœªè¢«å†™å…¥æ–‡æ¡£ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-35713](https://bugs.python.org/issue?@action=redirect&bpo=35713) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `PyExceptionClass_Name()` çš„ç»“æœç±»å‹ç°åœ¨æ˜¯ `const char *` è€Œé `char *`ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-33818](https://bugs.python.org/issue?@action=redirect&bpo=33818) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `Modules/Setup.dist` ä¸ `Modules/Setup` ä¸¤è€…çš„å…±å­˜å·²è¢«ç§»é™¤ã€‚ ä¹‹å‰åœ¨æ›´æ–° CPython æºç æ ‘æ—¶ï¼Œå¼€å‘è€…å¿…é¡»æ‰‹åŠ¨æ‹·è´ `Modules/Setup.dist` (åœ¨æºç æ ‘å†…) åˆ° `Modules/Setup` (åœ¨æ„å»ºæ ‘å†…) ä»¥åæ˜ ä¸Šæ¸¸çš„ä»»ä½•æ”¹å˜ã€‚ æ—§ç‰¹æ€§å¯¹æ‰“åŒ…è€…æ¥è¯´æœ‰ä¸€ç‚¹ç›Šå¤„ï¼Œä½†ä»£ä»·æ˜¯å¯¹è¿½è¸ª CPython å¼€å‘è¿›ç¨‹çš„å¼€å‘è€…é€ æˆç»å¸¸æ€§çš„éº»çƒ¦ï¼Œå› ä¸ºå¿˜è®°æ‹·è´è¯¥æ–‡ä»¶å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥ã€‚

ç°åœ¨æ„å»ºç³»ç»Ÿæ€»æ˜¯ä¼šä»æºç æ ‘å†…çš„ `Modules/Setup` è¯»å–æ•°æ®ã€‚ å»ºè®®å¸Œæœ›å®šåˆ¶è¯¥æ–‡ä»¶çš„å¼€å‘è€…åœ¨ CPython çš„ä¸€ä¸ª git åˆ†å‰æˆ–è¡¥ä¸æ–‡ä»¶ä¸­ç»´æŠ¤ä»–ä»¬çš„æ›´æ”¹ï¼Œå°±å¦‚ä»–ä»¬å¯¹æºç æ ‘åšä»»ä½•å…¶ä»–æ”¹å˜æ—¶ä¸€æ ·ã€‚

ï¼ˆç”± Antoine Pitrou åœ¨ [bpo-32430](https://bugs.python.org/issue?@action=redirect&bpo=32430) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å°† Python æ•°å­—è½¬æ¢ä¸º C æ•´å‹çš„å‡½æ•°ä¾‹å¦‚ [`PyLong_AsLong()`](long.md#c.PyLong_AsLong "PyLong_AsLong") ä»¥åŠå¸¦æœ‰ `'i'` ä¹‹ç±»æ•´å‹è½¬æ¢æ ¼å¼å•å…ƒçš„å‚æ•°è§£æå‡½æ•°ä¾‹å¦‚ [`PyArg_ParseTuple()`](arg.md#c.PyArg_ParseTuple "PyArg_ParseTuple") ç°åœ¨å¦‚æœå¯èƒ½å°†ä¼šä½¿ç”¨ [`__index__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__index__ "object.__index__") ç‰¹æ®Šæ–¹æ³•è€Œä¸æ˜¯ [`__int__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__int__ "object.__int__")ã€‚ å¯¹äºå¸¦æœ‰ `__int__()` æ–¹æ³•ä½†æ²¡æœ‰ `__index__()` æ–¹æ³•çš„å¯¹è±¡ (ä¾‹å¦‚ [`Decimal`](decimal.md#decimal.Decimal "decimal.Decimal") å’Œ [`Fraction`](fractions.md#fractions.Fraction "fractions.Fraction")) å°†ä¼šå‘å‡ºå¼ƒç”¨è­¦å‘Šã€‚ å¯¹äºå®ç°äº† `__index__()` çš„å¯¹è±¡ [`PyNumber_Check()`](number.md#c.PyNumber_Check "PyNumber_Check") ç°åœ¨å°†è¿”å› `1`ã€‚ [`PyNumber_Long()`](number.md#c.PyNumber_Long "PyNumber_Long"), [`PyNumber_Float()`](number.md#c.PyNumber_Float "PyNumber_Float") å’Œ [`PyFloat_AsDouble()`](float.md#c.PyFloat_AsDouble "PyFloat_AsDouble") ç°åœ¨å¦‚æœå¯èƒ½ä¹Ÿå°†ä¼šä½¿ç”¨ `__index__()` æ–¹æ³•ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-36048](https://bugs.python.org/issue?@action=redirect&bpo=36048) å’Œ [bpo-20092](https://bugs.python.org/issue?@action=redirect&bpo=20092) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å †åˆ†é…ç±»å‹å¯¹è±¡ç°åœ¨å°†å¢åŠ å®ƒä»¬åœ¨ [`PyObject_Init()`](allocation.md#c.PyObject_Init "PyObject_Init") (åŠå…¶å¯¹åº”çš„å® `PyObject_INIT`) ä¸­çš„å¼•ç”¨è®¡æ•°è€Œä¸æ˜¯åœ¨ [`PyType_GenericAlloc()`](type.md#c.PyType_GenericAlloc "PyType_GenericAlloc") ä¸­ã€‚ ä¿®æ”¹å®ä¾‹åˆ†é…æˆ–ä¸­æ­¢åˆ†é…çš„ç±»å‹å¯èƒ½éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚ ï¼ˆç”± Elizondo åœ¨ [bpo-35810](https://bugs.python.org/issue?@action=redirect&bpo=35810) ä¸­è´¡çŒ®ã€‚ï¼‰

  * æ–°å¢å‡½æ•° `PyCode_NewWithPosOnlyArgs()` å…è®¸åˆ›å»ºä»£ç å¯¹è±¡ä¾‹å¦‚ `PyCode_New()`ï¼Œä½†å¸¦æœ‰ä¸€ä¸ªé¢å¤–çš„ _posonlyargcount_ å½¢å‚ä»¥æŒ‡æ˜ä»…é™ä½ç½®å‚æ•°çš„æ•°é‡ã€‚ ï¼ˆç”± Pablo Galindo åœ¨ [bpo-37221](https://bugs.python.org/issue?@action=redirect&bpo=37221) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `Py_SetPath()` ç°åœ¨ä¼šå°† [`sys.executable`](3.æ ‡å‡†åº“/sys.md#sys.executable "sys.executable") è®¾ç½®ä¸ºç¨‹åºå®Œæ•´è·¯å¾„ ([`Py_GetProgramFullPath()`](init.md#c.Py_GetProgramFullPath "Py_GetProgramFullPath")) è€Œä¸æ˜¯ç¨‹åºåç§° ([`Py_GetProgramName()`](init.md#c.Py_GetProgramName "Py_GetProgramName"))ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-38234](https://bugs.python.org/issue?@action=redirect&bpo=38234) ä¸­è´¡çŒ®ã€‚ï¼‰

## å¼ƒç”¨Â¶

  * distutils çš„ `bdist_wininst` å‘½ä»¤ç°åœ¨å·²å¼ƒç”¨ï¼Œè¯·æ”¹ç”¨ `bdist_wheel` (wheel åŒ…)ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-37481](https://bugs.python.org/issue?@action=redirect&bpo=37481) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`ElementTree`](xml.etree.elementtree.md#module-xml.etree.ElementTree "xml.etree.ElementTree: Implementation of the ElementTree API.") æ¨¡å—ä¸­çš„å·²å¼ƒç”¨æ–¹æ³• `getchildren()` å’Œ `getiterator()` ç°åœ¨ä¼šå¼•å‘ [`DeprecationWarning`](3.æ ‡å‡†åº“/exceptions.md#DeprecationWarning "DeprecationWarning") è€Œä¸æ˜¯ [`PendingDeprecationWarning`](3.æ ‡å‡†åº“/exceptions.md#PendingDeprecationWarning "PendingDeprecationWarning")ã€‚ å®ƒä»¬å°†åœ¨ Python 3.9 ä¸­è¢«ç§»é™¤ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-29209](https://bugs.python.org/issue?@action=redirect&bpo=29209) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å°†ä¸æ˜¯ [`concurrent.futures.ThreadPoolExecutor`](concurrent.futures.md#concurrent.futures.ThreadPoolExecutor "concurrent.futures.ThreadPoolExecutor") çš„å®ä¾‹çš„å¯¹è±¡ä¼ ç»™ [`loop.set_default_executor()`](asyncio-eventloop.md#asyncio.loop.set_default_executor "asyncio.loop.set_default_executor") å·²è¢«å¼ƒç”¨ï¼Œå¹¶å°†åœ¨ Python 3.9 ä¸­è¢«ç¦æ­¢ã€‚ ï¼ˆç”± Elvis Pranskevichus åœ¨ [bpo-34075](https://bugs.python.org/issue?@action=redirect&bpo=34075) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`xml.dom.pulldom.DOMEventStream`](xml.dom.pulldom.md#xml.dom.pulldom.DOMEventStream "xml.dom.pulldom.DOMEventStream"), [`wsgiref.util.FileWrapper`](wsgiref.md#wsgiref.util.FileWrapper "wsgiref.util.FileWrapper") å’Œ [`fileinput.FileInput`](fileinput.md#fileinput.FileInput "fileinput.FileInput") çš„ `__getitem__()` æ–¹æ³•å·²è¢«å¼ƒç”¨ã€‚

è¿™äº›æ–¹æ³•çš„å®ç°ä¼šå¿½ç•¥å®ƒä»¬çš„ _index_ å½¢å‚ï¼Œå¹¶æ”¹ä¸ºè¿”å›ä¸‹ä¸€æ¡ç›®ã€‚ ï¼ˆç”± Berker Peksag åœ¨ [bpo-9372](https://bugs.python.org/issue?@action=redirect&bpo=9372) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`typing.NamedTuple`](typing.md#typing.NamedTuple "typing.NamedTuple") ç±»å·²å¼ƒç”¨äº† `_field_types` å±æ€§è€Œæ”¹ç”¨å…·æœ‰åŒæ ·ä¿¡æ¯çš„ `__annotations__` å±æ€§ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-36320](https://bugs.python.org/issue?@action=redirect&bpo=36320) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`ast`](ast.md#module-ast "ast: Abstract Syntax Tree classes and manipulation.") ç±» `Num`, `Str`, `Bytes`, `NameConstant` å’Œ `Ellipsis` è¢«è§†ä¸ºå·²å¼ƒç”¨å¹¶å°†åœ¨æœªæ¥çš„ Python ç‰ˆæœ¬ä¸­è¢«ç§»é™¤ã€‚ åº”å½“æ”¹ç”¨ [`Constant`](ast.md#ast.Constant "ast.Constant")ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-32892](https://bugs.python.org/issue?@action=redirect&bpo=32892) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`ast.NodeVisitor`](ast.md#ast.NodeVisitor "ast.NodeVisitor") çš„æ–¹æ³• `visit_Num()`, `visit_Str()`, `visit_Bytes()`, `visit_NameConstant()` å’Œ `visit_Ellipsis()` ç°åœ¨å·²è¢«å¼ƒç”¨ï¼Œå¹¶ä¸”åœ¨æœªæ¥çš„ Python ç‰ˆæœ¬ä¸­å°†ä¸å†è¢«è°ƒç”¨ã€‚ æ·»åŠ  `visit_Constant()` æ–¹æ³•æ¥å¤„ç†æ‰€æœ‰å¸¸é‡èŠ‚ç‚¹ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-36917](https://bugs.python.org/issue?@action=redirect&bpo=36917) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `asyncio.coroutine()` [decorator](../glossary.md#term-decorator) å·²å¼ƒç”¨å¹¶å°†åœ¨ 3.10 ç‰ˆä¸­è¢«ç§»é™¤ã€‚ åŸæœ‰çš„ `@asyncio.coroutine` è¯·æ”¹ç”¨ [`async def`](8.%20å¤åˆè¯­å¥.md#async-def) æ¥æ›¿ä»£ã€‚ ï¼ˆç”± Andrew Svetlov åœ¨ [bpo-36921](https://bugs.python.org/issue?@action=redirect&bpo=36921) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨ [`asyncio`](asyncio.md#module-asyncio "asyncio: Asynchronous I/O.") ä¸­ï¼Œ _loop_ å‚æ•°çš„æ˜¾å¼ä¼ é€’å·²è¢«å¼ƒç”¨å¹¶ä¸”åˆ° 3.10 ç‰ˆæ—¶å°†ä¼šåœ¨ä»¥ä¸‹å‡½æ•°ä¸­è¢«ç§»é™¤: [`asyncio.sleep()`](asyncio-task.md#asyncio.sleep "asyncio.sleep"), [`asyncio.gather()`](asyncio-task.md#asyncio.gather "asyncio.gather"), [`asyncio.shield()`](asyncio-task.md#asyncio.shield "asyncio.shield"), [`asyncio.wait_for()`](asyncio-task.md#asyncio.wait_for "asyncio.wait_for"), [`asyncio.wait()`](asyncio-task.md#asyncio.wait "asyncio.wait"), [`asyncio.as_completed()`](asyncio-task.md#asyncio.as_completed "asyncio.as_completed"), [`asyncio.Task`](asyncio-task.md#asyncio.Task "asyncio.Task"), [`asyncio.Lock`](asyncio-sync.md#asyncio.Lock "asyncio.Lock"), [`asyncio.Event`](asyncio-sync.md#asyncio.Event "asyncio.Event"), [`asyncio.Condition`](asyncio-sync.md#asyncio.Condition "asyncio.Condition"), [`asyncio.Semaphore`](asyncio-sync.md#asyncio.Semaphore "asyncio.Semaphore"), [`asyncio.BoundedSemaphore`](asyncio-sync.md#asyncio.BoundedSemaphore "asyncio.BoundedSemaphore"), [`asyncio.Queue`](asyncio-queue.md#asyncio.Queue "asyncio.Queue"), [`asyncio.create_subprocess_exec()`](asyncio-subprocess.md#asyncio.create_subprocess_exec "asyncio.create_subprocess_exec") ä»¥åŠ [`asyncio.create_subprocess_shell()`](asyncio-subprocess.md#asyncio.create_subprocess_shell "asyncio.create_subprocess_shell")ã€‚

  * å°†åç¨‹å¯¹è±¡æ˜¾å¼ä¼ é€’ç»™ [`asyncio.wait()`](asyncio-task.md#asyncio.wait "asyncio.wait") çš„åšæ³•å·²è¢«å¼ƒç”¨å¹¶ä¸”å°†åœ¨ 3.11 ç‰ˆä¸­è¢«ç§»é™¤ã€‚ ï¼ˆç”± Yury Selivanov åœ¨ [bpo-34790](https://bugs.python.org/issue?@action=redirect&bpo=34790) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`gettext`](gettext.md#module-gettext "gettext: Multilingual internationalization services.") æ¨¡å—ä¸­çš„ä¸‹åˆ—å‡½æ•°å’Œæ–¹æ³•å·²è¢«å¼ƒç”¨: `lgettext()`, `ldgettext()`, `lngettext()` å’Œ `ldngettext()`ã€‚ å®ƒä»¬è¿”å›å·²ç¼–ç çš„å­—èŠ‚ä¸²ï¼Œå¦‚æœè½¬æ¢åçš„å­—ç¬¦ä¸²å­˜åœ¨ç¼–ç é—®é¢˜ä½ å°†å¯èƒ½é­é‡é¢„æœŸä¹‹å¤–çš„å¼‚å¸¸ã€‚ æ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨ Python 3 ä¸­è¿”å› Unicode å­—ç¬¦ä¸²çš„æ“ä½œä½œä¸ºæ›¿ä»£ã€‚ å‰é¢çš„å‡½æ•°éƒ½æ—©å·²ä¸å®œä½¿ç”¨ã€‚

å‡½æ•° `bind_textdomain_codeset()`ï¼Œæ–¹æ³• `output_charset()` å’Œ `set_output_charset()`ï¼Œä»¥åŠå‡½æ•° [`translation()`](gettext.md#gettext.translation "gettext.translation") å’Œ [`install()`](gettext.md#gettext.install "gettext.install") çš„ _codeset_ å½¢å‚ä¹Ÿå·²è¢«å¼ƒç”¨ï¼Œå› ä¸ºå®ƒä»¬ä»…é€‚ç”¨äº `l*gettext()` å‡½æ•°ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-33710](https://bugs.python.org/issue?@action=redirect&bpo=33710) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`threading.Thread`](threading.md#threading.Thread "threading.Thread") çš„ `isAlive()` æ–¹æ³•å·²å¼ƒç”¨ã€‚ ï¼ˆç”± Dong-hee Na åœ¨ [bpo-35283](https://bugs.python.org/issue?@action=redirect&bpo=35283) ä¸­è´¡çŒ®ã€‚ï¼‰

  * è®¸å¤šæ¥å—æ•´æ•°å‚æ•°çš„å†…ç½®å’Œæ‰©å±•æ¨¡å—çš„å‡½æ•°ç°åœ¨å°†å¯¹ä¼ å…¥ [`Decimal`](decimal.md#decimal.Decimal "decimal.Decimal"), [`Fraction`](fractions.md#fractions.Fraction "fractions.Fraction") ä»¥åŠä»»ä½•å…¶ä»–å¯è¢«è½¬æ¢ä¸ºæ•´æ•°ä½†ä¼šä¸¢å¤±ç²¾åº¦ï¼ˆå³å…·æœ‰ [`__int__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__int__ "object.__int__") æ–¹æ³•ä½†æ²¡æœ‰ [`__index__()`](3.%20æ•°æ®æ¨¡å‹.md#object.__index__ "object.__index__") æ–¹æ³•ï¼‰çš„å¯¹è±¡å‘å‡ºå¼ƒç”¨è­¦å‘Šã€‚ åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­åˆ™å°†æŠ¥é”™ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-36048](https://bugs.python.org/issue?@action=redirect&bpo=36048) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ä»¥ä¸‹å‚æ•°ä½œä¸ºå…³é”®å­—å‚æ•°ä¼ é€’çš„æ–¹å¼å·²è¢«å¼ƒç”¨ï¼š

    * [`functools.partialmethod()`](functools.md#functools.partialmethod "functools.partialmethod"), [`weakref.finalize()`](3.æ ‡å‡†åº“/weakref.md#weakref.finalize "weakref.finalize"), [`profile.Profile.runcall()`](profile.md#profile.Profile.runcall "profile.Profile.runcall"), `cProfile.Profile.runcall()`, [`bdb.Bdb.runcall()`](bdb.md#bdb.Bdb.runcall "bdb.Bdb.runcall"), [`trace.Trace.runfunc()`](trace.md#trace.Trace.runfunc "trace.Trace.runfunc") ä¸ [`curses.wrapper()`](3.æ ‡å‡†åº“/curses.md#curses.wrapper "curses.wrapper") ä¸­çš„ _func_ ã€‚

    * [`unittest.TestCase.addCleanup()`](unittest.md#unittest.TestCase.addCleanup "unittest.TestCase.addCleanup") ä¸­çš„ _function_ ã€‚

    * [`concurrent.futures.ThreadPoolExecutor`](concurrent.futures.md#concurrent.futures.ThreadPoolExecutor "concurrent.futures.ThreadPoolExecutor") å’Œ [`concurrent.futures.ProcessPoolExecutor`](concurrent.futures.md#concurrent.futures.ProcessPoolExecutor "concurrent.futures.ProcessPoolExecutor") çš„ [`submit()`](concurrent.futures.md#concurrent.futures.Executor.submit "concurrent.futures.Executor.submit") æ–¹æ³•ä¸­çš„ _fn_ ã€‚

    * [`contextlib.ExitStack.callback()`](contextlib.md#contextlib.ExitStack.callback "contextlib.ExitStack.callback"), `contextlib.AsyncExitStack.callback()` å’Œ [`contextlib.AsyncExitStack.push_async_callback()`](contextlib.md#contextlib.AsyncExitStack.push_async_callback "contextlib.AsyncExitStack.push_async_callback") ä¸­çš„ _callback_ ã€‚

    * `multiprocessing.managers.Server` å’Œ `multiprocessing.managers.SharedMemoryServer` çš„ `create()` æ–¹æ³•ä¸­çš„ _c_ å’Œ _typeid_ ã€‚

    * [`weakref.finalize()`](3.æ ‡å‡†åº“/weakref.md#weakref.finalize "weakref.finalize") ä¸­çš„ _obj_ ã€‚

åœ¨æœªæ¥ç‰ˆæœ¬çš„ Python ä¸­ï¼Œå®ƒä»¬å°†æˆä¸º [ä»…é™ä½ç½®å‚æ•°](../glossary.md#positional-only-parameter)ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-36492](https://bugs.python.org/issue?@action=redirect&bpo=36492) ä¸­è´¡çŒ®ã€‚ï¼‰

## API ä¸ç‰¹æ€§çš„ç§»é™¤Â¶

ä¸‹åˆ—ç‰¹æ€§ä¸ API å·²ä» Python 3.8 ä¸­ç§»é™¤ï¼š

  * è‡ª Python 3.3 èµ·ï¼Œä» [`collections`](collections.md#module-collections "collections: Container datatypes") å¯¼å…¥ ABC çš„åšæ³•å·²å¼ƒç”¨ï¼Œè€Œåº”å½“ä» [`collections.abc`](collections.abc.md#module-collections.abc "collections.abc: Abstract base classes for containers") æ‰§è¡Œå¯¼å…¥ã€‚ ä» collections å¯¼å…¥çš„æ“ä½œåœ¨ 3.8 ä¸­å·²æ ‡è®°ä¸ºè¢«ç§»é™¤ï¼Œä½†å°†æ¨è¿Ÿåˆ° 3.9 ä¸­å®æ–½ã€‚ ï¼ˆå‚è§ [bpo-36952](https://bugs.python.org/issue?@action=redirect&bpo=36952)ã€‚ï¼‰

  * `macpath` æ¨¡å—ï¼Œåœ¨ Python 3.7 ä¸­å¼ƒç”¨ï¼Œç°å·²è¢«ç§»é™¤ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-35471](https://bugs.python.org/issue?@action=redirect&bpo=35471) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å‡½æ•° `platform.popen()` å·²è¢«ç§»é™¤ï¼Œå®ƒè‡ª Python 3.3 èµ·å°±å·²è¢«å¼ƒç”¨ï¼šè¯·æ”¹ç”¨ [`os.popen()`](os.md#os.popen "os.popen")ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-35345](https://bugs.python.org/issue?@action=redirect&bpo=35345) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å‡½æ•° `time.clock()` å·²è¢«ç§»é™¤ï¼Œå®ƒè‡ª Python 3.3 èµ·å°±å·²è¢«å¼ƒç”¨ï¼šè¯·æ ¹æ®å…·ä½“éœ€æ±‚æ”¹ç”¨ [`time.perf_counter()`](time.md#time.perf_counter "time.perf_counter") æˆ– [`time.process_time()`](time.md#time.process_time "time.process_time") ä»¥è·å¾—å…·æœ‰è‰¯å¥½å®šä¹‰çš„è¡Œä¸ºã€‚ ï¼ˆç”± Matthias Bussonnier åœ¨ [bpo-36895](https://bugs.python.org/issue?@action=redirect&bpo=36895) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `pyvenv` è„šæœ¬å·²è¢«ç§»é™¤ï¼Œæ¨èæ”¹ç”¨ `python3.8 -m venv` æ¥å¸®åŠ©æ¶ˆé™¤å®¹æ˜“æ··æ·† `pyvenv` è„šæœ¬æ‰€å…³è”çš„ Python è§£é‡Šå™¨è¿™ä¸€é—®é¢˜ã€‚ ï¼ˆç”± Brett Cannon åœ¨ [bpo-25427](https://bugs.python.org/issue?@action=redirect&bpo=25427) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `parse_qs`, `parse_qsl`, and `escape` are removed from the `cgi` module. They are deprecated in Python 3.2 or older. They should be imported from the `urllib.parse` and `html` modules instead.

  * `filemode` å‡½æ•°å·²ä» [`tarfile`](tarfile.md#module-tarfile "tarfile: Read and write tar-format archive files.") æ¨¡å—ä¸­è¢«ç§»é™¤ã€‚ è¯¥å‡½æ•°æœªè¢«å†™å…¥æ–‡æ¡£ï¼Œè‡ª Python 3.3 èµ·å°±å·²å¼ƒç”¨ã€‚

  * [`XMLParser`](xml.etree.elementtree.md#xml.etree.ElementTree.XMLParser "xml.etree.ElementTree.XMLParser") æ„é€ å™¨ä¸å†æ¥å— _html_ å‚æ•°ã€‚ å®ƒä»æ¥æ²¡æœ‰ä»»ä½•ä½œç”¨å¹¶åœ¨ Python 3.4 ä¸­å·²è¢«å¼ƒç”¨ã€‚ æ‰€æœ‰å…¶ä»–å½¢å‚ç°åœ¨éƒ½æ˜¯ [ä»…é™å…³é”®å­—å‚æ•°](../glossary.md#keyword-only-parameter)ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-29209](https://bugs.python.org/issue?@action=redirect&bpo=29209) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`XMLParser`](xml.etree.elementtree.md#xml.etree.ElementTree.XMLParser "xml.etree.ElementTree.XMLParser") çš„ `doctype()` æ–¹æ³•å·²è¢«ç§»é™¤ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-29209](https://bugs.python.org/issue?@action=redirect&bpo=29209) ä¸­è´¡çŒ®ã€‚ï¼‰

  * "unicode_internal" ç¼–è§£ç å™¨å·²è¢«ç§»é™¤ã€‚ ï¼ˆç”± Inada Naoki åœ¨ [bpo-36297](https://bugs.python.org/issue?@action=redirect&bpo=36297) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`sqlite3`](sqlite3.md#module-sqlite3 "sqlite3: A DB-API 2.0 implementation using SQLite 3.x.") æ¨¡å—çš„ `Cache` å’Œ `Statement` å¯¹è±¡å·²ä¸å†å…¬å¼€ç»™ç”¨æˆ·ã€‚ ï¼ˆç”± Aviv Palivoda åœ¨ [bpo-30262](https://bugs.python.org/issue?@action=redirect&bpo=30262) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`fileinput.input()`](fileinput.md#fileinput.input "fileinput.input") å’Œ [`fileinput.FileInput()`](fileinput.md#fileinput.FileInput "fileinput.FileInput") ä¸­è‡ª Python 3.6 èµ·å°±å·²è¢«å¿½ç•¥å¹¶å¼ƒç”¨çš„ `bufsize` å…³é”®å­—å‚æ•°å·²è¢«ç§»é™¤ã€‚ ç”± Matthias Bussonnier åœ¨ [bpo-36952](https://bugs.python.org/issue?@action=redirect&bpo=36952) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨ Python 3.7 ä¸­å¼ƒç”¨çš„å‡½æ•° `sys.set_coroutine_wrapper()` å’Œ `sys.get_coroutine_wrapper()` å·²è¢«ç§»é™¤ã€‚ ï¼ˆç”± Matthias Bussonnier åœ¨ [bpo-36933](https://bugs.python.org/issue?@action=redirect&bpo=36933) ä¸­è´¡çŒ®ã€‚ï¼‰

## ç§»æ¤åˆ° Python 3.8Â¶

æœ¬èŠ‚åˆ—å‡ºäº†å…ˆå‰æè¿°çš„æ›´æ”¹ä»¥åŠå¯èƒ½éœ€è¦æ›´æ”¹ä»£ç çš„å…¶ä»–é”™è¯¯ä¿®æ­£.

### Python è¡Œä¸ºçš„æ”¹å˜Â¶

  * yield è¡¨è¾¾å¼ï¼ˆåŒ…æ‹¬ `yield` å’Œ `yield from` å­å¥ï¼‰ç°åœ¨ä¸å…è®¸åœ¨æ¨å¯¼å¼å’Œç”Ÿæˆå™¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼ˆä½†æœ€å·¦è¾¹çš„ `for` å­å¥ä¸­çš„å¯è¿­ä»£å¯¹è±¡è¡¨è¾¾å¼é™¤å¤–ï¼‰ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-10544](https://bugs.python.org/issue?@action=redirect&bpo=10544) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å½“æ ‡è¯†å·æ£€æµ‹ (`is` å’Œ `is not`) ä¸ç‰¹å®šç±»å‹çš„å­—é¢å€¼ (ä¾‹å¦‚å­—ç¬¦ä¸²å’Œæ•°å­—) ä¸€åŒä½¿ç”¨æ—¶ç¼–è¯‘å™¨ç°åœ¨ä¼šäº§ç”Ÿ [`SyntaxWarning`](3.æ ‡å‡†åº“/exceptions.md#SyntaxWarning "SyntaxWarning")ã€‚ è¿™åœ¨ CPython ä¸­é€šå¸¸æ˜¯å¯è¡Œçš„ï¼Œä½†å¹¶ä¸è¢«è¯­è¨€å®šä¹‰æ‰€ä¿è¯ã€‚ è¯¥è­¦å‘Šä¼šå»ºè®®ç”¨æˆ·æ”¹ç”¨ç›¸ç­‰æ€§æ£€æµ‹ (`==` and `!=`)ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-34850](https://bugs.python.org/issue?@action=redirect&bpo=34850) ä¸­è´¡çŒ®ã€‚ï¼‰

  * CPython è§£é‡Šå™¨åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥å¼‚å¸¸ã€‚ åœ¨ Python 3.8 ä¸­è¿™ç§æƒ…å†µä¼šæ›´å°‘å‘ç”Ÿã€‚ ç‰¹åˆ«åœ°ï¼Œä»ç±»å‹å­—å…¸è·å–å±æ€§æ—¶å¼•å‘çš„å¼‚å¸¸ä¸ä¼šå†è¢«å¿½ç•¥ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-35459](https://bugs.python.org/issue?@action=redirect&bpo=35459) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ä»å†…ç½®ç±»å‹ [`bool`](functions.md#bool "bool"), [`int`](functions.md#int "int"), [`float`](functions.md#float "float"), [`complex`](functions.md#complex "complex") å’Œæ ‡å‡†åº“çš„ä¸€äº›ç±»ä¸­ç§»é™¤äº† `__str__` å®ç°ã€‚ å®ƒä»¬ç°åœ¨ä¼šä» [`object`](functions.md#object "object") ç»§æ‰¿ `__str__()`ã€‚ ä½œä¸ºç»“æœï¼Œåœ¨è¿™äº›ç±»çš„å­ç±»ä¸­å®šä¹‰ `__repr__()` æ–¹æ³•å°†ä¼šå½±å“å®ƒä»¬çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-36793](https://bugs.python.org/issue?@action=redirect&bpo=36793) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨ AIX ä¸Šï¼Œ[`sys.platform`](3.æ ‡å‡†åº“/sys.md#sys.platform "sys.platform") å°†ä¸å†åŒ…å«ä¸»è¦ç‰ˆæœ¬å·ã€‚ å®ƒå°†æ€»æ˜¯ `'aix'`ï¼Œè€Œä¸æ˜¯ `'aix3'` .. `'aix7'`ã€‚ ç”±äºè¾ƒæ—§çš„ Python ç‰ˆæœ¬ä¼šåŒ…å«ç‰ˆæœ¬å·ï¼Œå› æ­¤æ¨èæ€»æ˜¯ä½¿ç”¨ `sys.platform.startswith('aix')`ã€‚ ï¼ˆç”± M. Felt åœ¨ [bpo-36588](https://bugs.python.org/issue?@action=redirect&bpo=36588) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ç°åœ¨ `PyEval_AcquireLock()` å’Œ `PyEval_AcquireThread()` å½“è§£é‡Šå™¨æ­£åœ¨æœ€ç»ˆåŒ–æ—¶è¢«è°ƒç”¨å°†ä¼šç»ˆç»“å½“å‰çº¿ç¨‹ï¼Œä»¥ä½¿å®ƒä»¬ä¸ [`PyEval_RestoreThread()`](init.md#c.PyEval_RestoreThread "PyEval_RestoreThread"), [`Py_END_ALLOW_THREADS()`](init.md#c.Py_END_ALLOW_THREADS "Py_END_ALLOW_THREADS") å’Œ [`PyGILState_Ensure()`](init.md#c.PyGILState_Ensure "PyGILState_Ensure") ä¿æŒä¸€è‡´ã€‚ å¦‚æœä¸æƒ³è¦æ­¤ç§è¡Œä¸ºï¼Œè¯·é€šè¿‡æ£€æµ‹ `_Py_IsFinalizing()` æˆ– [`sys.is_finalizing()`](3.æ ‡å‡†åº“/sys.md#sys.is_finalizing "sys.is_finalizing") æ¥ä¿æŠ¤è¯¥è°ƒç”¨ã€‚ ï¼ˆç”± Joannah Nanjekye åœ¨ [bpo-36475](https://bugs.python.org/issue?@action=redirect&bpo=36475) ä¸­è´¡çŒ®ã€‚ï¼‰

### Python API çš„å˜åŒ–Â¶

  * åœ¨ Windows ä¸Š [`os.getcwdb()`](os.md#os.getcwdb "os.getcwdb") å‡½æ•°ç°åœ¨ä¼šä½¿ç”¨ UTF-8 ç¼–ç æ ¼å¼è€Œä¸æ˜¯ ANSI ä»£ç é¡µï¼šè¯·å‚çœ‹ [**PEP 529**](https://peps.python.org/pep-0529/) äº†è§£å…·ä½“åŸå› ã€‚ è¯¥å‡½æ•°åœ¨ Windows ä¸Šä¸å†è¢«å¼ƒç”¨ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-37412](https://bugs.python.org/issue?@action=redirect&bpo=37412) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ç°åœ¨ [`subprocess.Popen`](subprocess.md#subprocess.Popen "subprocess.Popen") åœ¨æŸäº›æƒ…å†µä¸‹ä¼šä½¿ç”¨ [`os.posix_spawn()`](os.md#os.posix_spawn "os.posix_spawn") ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚ åœ¨é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿå’Œ QEMU ç”¨æˆ·æ¨¡æ‹Ÿå™¨ä¸Šï¼Œä½¿ç”¨ [`os.posix_spawn()`](os.md#os.posix_spawn "os.posix_spawn") çš„ `Popen` æ„é€ å™¨ä¸ä¼šå†å› ä¸ºâ€œæ‰¾ä¸åˆ°ç¨‹åºâ€è¿™æ ·çš„é”™è¯¯å¼•å‘å¼‚å¸¸ã€‚ è€Œæ˜¯è®©å­è¿›ç¨‹å¤±è´¥å¹¶è¿”å›ä¸€ä¸ªéé›¶çš„ `returncode`ã€‚ ï¼ˆç”± Joannah Nanjekye å’Œ Victor Stinner åœ¨ [bpo-35537](https://bugs.python.org/issue?@action=redirect&bpo=35537) ä¸­è´¡çŒ®ã€‚ï¼‰

  * The _preexec_fn_ argument of * [`subprocess.Popen`](subprocess.md#subprocess.Popen "subprocess.Popen") is no longer compatible with subinterpreters. The use of the parameter in a subinterpreter now raises [`RuntimeError`](3.æ ‡å‡†åº“/exceptions.md#RuntimeError "RuntimeError"). (Contributed by Eric Snow in [bpo-34651](https://bugs.python.org/issue?@action=redirect&bpo=34651), modified by Christian Heimes in [bpo-37951](https://bugs.python.org/issue?@action=redirect&bpo=37951).)

  * `imap.IMAP4.logout()` æ–¹æ³•ä¸ä¼šå†é™é»˜åœ°å¿½ç•¥ä»»æ„å¼‚å¸¸ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-36348](https://bugs.python.org/issue?@action=redirect&bpo=36348) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å‡½æ•° `platform.popen()` å·²è¢«ç§»é™¤ï¼Œå®ƒè‡ª Python 3.3 èµ·å°±å·²è¢«å¼ƒç”¨ï¼šè¯·æ”¹ç”¨ [`os.popen()`](os.md#os.popen "os.popen")ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-35345](https://bugs.python.org/issue?@action=redirect&bpo=35345) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å½“ä¼ å…¥å¤šæ¨¡æ•°æ®æ—¶ [`statistics.mode()`](statistics.md#statistics.mode "statistics.mode") å‡½æ•°ä¸ä¼šå†å¼•å‘å¼‚å¸¸ã€‚ å®ƒå°†æ”¹ä¸ºè¿”å›åœ¨è¾“å…¥æ•°æ®ä¸­é‡åˆ°çš„ç¬¬ä¸€ä¸ªæ¨¡å¼ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-35892](https://bugs.python.org/issue?@action=redirect&bpo=35892) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`tkinter.ttk.Treeview`](tkinter.ttk.md#tkinter.ttk.Treeview "tkinter.ttk.Treeview") ç±»çš„ [`selection()`](tkinter.ttk.md#tkinter.ttk.Treeview.selection "tkinter.ttk.Treeview.selection") æ–¹æ³•ä¸å†æ¥å—å‚æ•°ã€‚ å¸¦å‚æ•°è°ƒç”¨è¯¥æ–¹æ³•æ¥æ”¹å˜é€‰æ‹©åœ¨ Python 3.6 ä¸­å·²å¼ƒç”¨ã€‚ è¯·ä½¿ç”¨ä¸“é—¨æ–¹æ³•ä¾‹å¦‚ [`selection_set()`](tkinter.ttk.md#tkinter.ttk.Treeview.selection_set "tkinter.ttk.Treeview.selection_set") æ¥æ”¹å˜é€‰æ‹©ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-31508](https://bugs.python.org/issue?@action=redirect&bpo=31508) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`xml.dom.minidom`](xml.dom.minidom.md#module-xml.dom.minidom "xml.dom.minidom: Minimal Document Object Model \(DOM\) implementation.") çš„ `writexml()`, `toxml()` å’Œ `toprettyxml()` æ–¹æ³•ä»¥åŠ `xml.etree` çš„ `write()` æ–¹æ³•ç°åœ¨ä¼šä¿ç•™ç”¨æˆ·æŒ‡å®šçš„å±æ€§é¡ºåºã€‚ ï¼ˆç”± Diego Rojas å’Œ Raymond Hettinger åœ¨ [bpo-34160](https://bugs.python.org/issue?@action=redirect&bpo=34160) ä¸­è´¡çŒ®ã€‚ï¼‰

  * é™„å¸¦ `'r'` æ——æ ‡æ‰“å¼€çš„ [`dbm.dumb`](dbm.md#module-dbm.dumb "dbm.dumb: Portable implementation of the simple DBM interface.") æ•°æ®åº“ç°åœ¨å°†æ˜¯åªè¯»çš„ã€‚ å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œé™„å¸¦ `'r'` å’Œ `'w'` æ——æ ‡çš„ [`dbm.dumb.open()`](dbm.md#dbm.dumb.open "dbm.dumb.open") ä¸ä¼šå†åˆ›å»ºæ•°æ®åº“ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-32749](https://bugs.python.org/issue?@action=redirect&bpo=32749) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨ [`XMLParser`](xml.etree.elementtree.md#xml.etree.ElementTree.XMLParser "xml.etree.ElementTree.XMLParser") çš„å­ç±»ä¸­å®šä¹‰çš„ `doctype()` æ–¹æ³•å°†ä¸ä¼šå†è¢«è°ƒç”¨ï¼Œå¹¶å°†å¯¼è‡´å‘å‡º [`RuntimeWarning`](3.æ ‡å‡†åº“/exceptions.md#RuntimeWarning "RuntimeWarning") è€Œä¸æ˜¯ [`DeprecationWarning`](3.æ ‡å‡†åº“/exceptions.md#DeprecationWarning "DeprecationWarning")ã€‚ è¯·åœ¨ç›®æ ‡ä¸Šå®šä¹‰ [`doctype()`](xml.etree.elementtree.md#xml.etree.ElementTree.TreeBuilder.doctype "xml.etree.ElementTree.TreeBuilder.doctype") æ–¹æ³•æ¥å¤„ç† XML doctype å£°æ˜ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-29209](https://bugs.python.org/issue?@action=redirect&bpo=29209) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ç°åœ¨å½“è‡ªå®šä¹‰å…ƒç±»æœªåœ¨ä¼ ç»™ `type.__new__` çš„å‘½åç©ºé—´ä¸­æä¾› `__classcell__` å…¥å£æ—¶å°†å¼•å‘ [`RuntimeError`](3.æ ‡å‡†åº“/exceptions.md#RuntimeError "RuntimeError")ã€‚ åœ¨ Python 3.6--3.7 ä¸­æ˜¯åˆ™æ˜¯å¼•å‘ [`DeprecationWarning`](3.æ ‡å‡†åº“/exceptions.md#DeprecationWarning "DeprecationWarning")ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-23722](https://bugs.python.org/issue?@action=redirect&bpo=23722) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `cProfile.Profile` ç±»ç°åœ¨å¯è¢«ç”¨ä½œä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚ ï¼ˆç”± Scott Sanderson åœ¨ [bpo-29235](https://bugs.python.org/issue?@action=redirect&bpo=29235) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`shutil.copyfile()`](shutil.md#shutil.copyfile "shutil.copyfile"), [`shutil.copy()`](shutil.md#shutil.copy "shutil.copy"), [`shutil.copy2()`](shutil.md#shutil.copy2 "shutil.copy2"), [`shutil.copytree()`](shutil.md#shutil.copytree "shutil.copytree") å’Œ [`shutil.move()`](shutil.md#shutil.move "shutil.move") ä¼šä½¿ç”¨å¹³å°ä¸“å±çš„ "fast-copy" ç³»ç»Ÿè°ƒç”¨ï¼ˆå‚è§ [ä¾èµ–äºå…·ä½“å¹³å°çš„é«˜æ•ˆæ‹·è´æ“ä½œ](shutil.md#shutil-platform-dependent-efficient-copy-operations) ä¸€èŠ‚ï¼‰ã€‚

  * [`shutil.copyfile()`](shutil.md#shutil.copyfile "shutil.copyfile") åœ¨ Windows ä¸Šçš„é»˜è®¤ç¼“å†²åŒºå¤§å°ä» 16 KiB æ”¹ä¸º 1 MiBã€‚

  * `PyGC_Head` ç»“æ„å·²è¢«å®Œå…¨æ”¹å˜ã€‚ æ‰€æœ‰æ¥è§¦åˆ°è¯¥ç»“æ„çš„ä»£ç éƒ½åº”å½“è¢«é‡å†™ã€‚ ï¼ˆå‚è§ [bpo-33597](https://bugs.python.org/issue?@action=redirect&bpo=33597)ã€‚ï¼‰

  * [`PyInterpreterState`](init.md#c.PyInterpreterState "PyInterpreterState") ç»“æ„å·²è¢«ç§»å…¥ "internal" å¤´æ–‡ä»¶ï¼ˆç‰¹åˆ«æ˜¯ Include/internal/pycore_pystate.hï¼‰ã€‚ ä¸é€æ˜çš„ `PyInterpreterState` ä½œä¸ºä»…æœ‰ APIï¼ˆä»¥åŠç¨³å®šç‰ˆ ABIï¼‰çš„ä¸€éƒ¨åˆ†ä»ç„¶å¯ç”¨ã€‚ æ–‡æ¡£æŒ‡æ˜è¯¥ç»“æ„çš„ä»»ä½•å­—æ®µéƒ½ä¸æ˜¯å…¬æœ‰çš„ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›æ²¡äººåœ¨ä½¿ç”¨å®ƒä»¬ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½ ç¡®å®ä¾èµ–å…¶ä¸­æŸä¸€ä¸ªæˆ–æ›´å¤šä¸ªç§æœ‰å­—æ®µå¹¶ä¸”æ²¡æœ‰å…¶ä»–æ›¿ä»£é€‰é¡¹ï¼Œåˆ™è¯·å¼€ä¸€ä¸ª BPO é—®é¢˜ã€‚ æˆ‘ä»¬å°†å°½åŠ›å¸®åŠ©ä½ è¿›è¡Œè°ƒæ•´ï¼ˆå¯èƒ½åŒ…æ‹¬å‘å…¬æœ‰ API æ·»åŠ è®¿é—®å™¨å‡½æ•°ï¼‰ã€‚ ï¼ˆå‚è§ [bpo-35886](https://bugs.python.org/issue?@action=redirect&bpo=35886)ã€‚ï¼‰

  * ç°åœ¨æ‰€æœ‰å¹³å°ä¸‹çš„ [`mmap.flush()`](mmap.md#mmap.mmap.flush "mmap.mmap.flush") æ–¹æ³•éƒ½ä¼šåœ¨æˆåŠŸæ—¶è¿”å› `None` å¹¶åœ¨é”™è¯¯æ—¶å¼•å‘å¼‚å¸¸ã€‚ ä¹‹å‰å®ƒçš„è¡Œä¸ºå–å†³äºå…·ä½“å¹³å°ï¼š Windows ä¸‹ä¼šåœ¨æˆåŠŸæ—¶è¿”å›éé›¶å€¼ï¼›åœ¨å¤±è´¥æ—¶è¿”å›é›¶ã€‚ Unix ä¸‹ä¼šåœ¨æˆåŠŸæ—¶è¿”å›é›¶ï¼›åœ¨å¤±è´¥æ—¶å¼•å‘é”™è¯¯ã€‚ ï¼ˆç”± Berker Peksag åœ¨ [bpo-2122](https://bugs.python.org/issue?@action=redirect&bpo=2122) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`xml.dom.minidom`](xml.dom.minidom.md#module-xml.dom.minidom "xml.dom.minidom: Minimal Document Object Model \(DOM\) implementation.") å’Œ [`xml.sax`](xml.sax.md#module-xml.sax "xml.sax: Package containing SAX2 base classes and convenience functions.") æ¨¡å—é»˜è®¤å°†ä¸å†å¤„ç†å¤–éƒ¨å®ä½“ã€‚ ï¼ˆç”± Christian Heimes åœ¨ [bpo-17239](https://bugs.python.org/issue?@action=redirect&bpo=17239) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ä»åªè¯»çš„ [`dbm`](../library/dbm.md#module-dbm "dbm: Interfaces to various Unix "database" formats.") æ•°æ®åº“ ([`dbm.dumb`](dbm.md#module-dbm.dumb "dbm.dumb: Portable implementation of the simple DBM interface."), [`dbm.gnu`](dbm.md#module-dbm.gnu "dbm.gnu: GNU's reinterpretation of dbm. \(Unix\)") æˆ– [`dbm.ndbm`](../library/dbm.md#module-dbm.ndbm "dbm.ndbm: The standard "database" interface, based on ndbm. \(Unix\)")) åˆ é™¤é”®å°†ä¼šå¼•å‘ `error` ([`dbm.dumb.error`](dbm.md#dbm.dumb.error "dbm.dumb.error"), [`dbm.gnu.error`](dbm.md#dbm.gnu.error "dbm.gnu.error") æˆ– [`dbm.ndbm.error`](dbm.md#dbm.ndbm.error "dbm.ndbm.error")) è€Œä¸æ˜¯ [`KeyError`](3.æ ‡å‡†åº“/exceptions.md#KeyError "KeyError")ã€‚ ï¼ˆç”± Xiang Zhang åœ¨ [bpo-33106](https://bugs.python.org/issue?@action=redirect&bpo=33106) ä¸­è´¡çŒ®ã€‚ï¼‰

  * ç®€åŒ–äº†å­—é¢å€¼çš„ ASTã€‚ æ‰€æœ‰å¸¸é‡å°†è¢«è¡¨ç¤ºä¸º [`ast.Constant`](ast.md#ast.Constant "ast.Constant") çš„å®ä¾‹ã€‚ å®ä¾‹åŒ–æ—§ç±» `Num`, `Str`, `Bytes`, `NameConstant` å’Œ `Ellipsis` éƒ½å°†è¿”å› `Constant` çš„å®ä¾‹ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-32892](https://bugs.python.org/issue?@action=redirect&bpo=32892) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`expanduser()`](os.path.md#os.path.expanduser "os.path.expanduser") åœ¨ Windows ä¸Šç°åœ¨æ”¹ç”¨ `USERPROFILE` ç¯å¢ƒå˜é‡è€Œä¸å†ä½¿ç”¨ `HOME`ï¼Œåè€…é€šå¸¸ä¸ä¼šä¸ºä¸€èˆ¬ç”¨æˆ·è´¦æˆ·è®¾ç½®ã€‚ ï¼ˆç”± Anthony Sottile åœ¨ [bpo-36264](https://bugs.python.org/issue?@action=redirect&bpo=36264) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å¼‚å¸¸ [`asyncio.CancelledError`](asyncio-exceptions.md#asyncio.CancelledError "asyncio.CancelledError") ç°åœ¨ç»§æ‰¿è‡ª [`BaseException`](3.æ ‡å‡†åº“/exceptions.md#BaseException "BaseException") è€Œä¸æ˜¯ [`Exception`](3.æ ‡å‡†åº“/exceptions.md#Exception "Exception") å¹¶ä¸”ä¸å†ç»§æ‰¿è‡ª [`concurrent.futures.CancelledError`](concurrent.futures.md#concurrent.futures.CancelledError "concurrent.futures.CancelledError")ã€‚ ï¼ˆç”± Yury Selivanov åœ¨ [bpo-32528](https://bugs.python.org/issue?@action=redirect&bpo=32528) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å½“ä½¿ç”¨ [`asyncio.Task`](asyncio-task.md#asyncio.Task "asyncio.Task") çš„å®ä¾‹æ—¶ï¼Œå‡½æ•° [`asyncio.wait_for()`](asyncio-task.md#asyncio.wait_for "asyncio.wait_for") ç°åœ¨ä¼šæ­£ç¡®åœ°ç­‰å¾…æ’¤é”€ã€‚ åœ¨æ­¤ä¹‹å‰å½“è¾¾åˆ° _timeout_ æ—¶ï¼Œå®ƒä¼šè¢«æ’¤é”€å¹¶ç«‹å³è¿”å›ã€‚ ï¼ˆç”± Elvis Pranskevichus åœ¨ [bpo-32751](https://bugs.python.org/issue?@action=redirect&bpo=32751) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å½“å°† 'socket' ä½œä¸º _name_ å½¢å‚ä¼ å…¥æ—¶ï¼Œå‡½æ•° [`asyncio.BaseTransport.get_extra_info()`](asyncio-protocol.md#asyncio.BaseTransport.get_extra_info "asyncio.BaseTransport.get_extra_info") ç°åœ¨ä¼šè¿”å›ä¸€ä¸ªå¯å®‰å…¨ä½¿ç”¨çš„å¥—æ¥å­—å¯¹è±¡ã€‚ ï¼ˆç”± Yury Selivanov åœ¨ [bpo-37027](https://bugs.python.org/issue?@action=redirect&bpo=37027) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`asyncio.BufferedProtocol`](asyncio-protocol.md#asyncio.BufferedProtocol "asyncio.BufferedProtocol") å·²ç»æ™‹çº§ä¸ºç¨³å®š APIã€‚

  * åœ¨ Windows ä¸Šå¯¹æ‰©å±•æ¨¡å—çš„ DLL ä¾èµ–ä»¥åŠé€šè¿‡ [`ctypes`](ctypes.md#module-ctypes "ctypes: A foreign function library for Python.") åŠ è½½çš„ DLL çš„è§£æç°åœ¨å°†æ›´ä¸ºå®‰å…¨ã€‚ åªæœ‰ç³»ç»Ÿè·¯å¾„ã€åŒ…å«ç›¸ä¿¡ DLL æˆ– PYD æ–‡ä»¶çš„è·¯å¾„ä»¥åŠé€šè¿‡ [`add_dll_directory()`](os.md#os.add_dll_directory "os.add_dll_directory") æ·»åŠ çš„ç›®å½•æ‰ä¼šè¢«ä½œä¸ºåŠ è½½æ—¶ä¾èµ–çš„æœç´¢ä½ç½®ã€‚ ç‰¹åˆ«åœ°ï¼Œ`PATH` å’Œå½“å‰å·¥ä½œç›®å½•å°†ä¸å†è¢«ä½¿ç”¨ï¼Œå¯¹å®ƒä»¬çš„ä¿®æ”¹å°†ä¸å†å¯¹æ­£å¸¸çš„ DLL è§£æäº§ç”Ÿå½±å“ã€‚ å¦‚æœä½ çš„åº”ç”¨ä¾èµ–äºè¿™äº›æœºåˆ¶ï¼Œä½ åº”å½“å…ˆæ£€æŸ¥ [`add_dll_directory()`](os.md#os.add_dll_directory "os.add_dll_directory")ï¼Œå¦‚æœå®ƒå­˜åœ¨å°±ç”¨å®ƒåœ¨åŠ è½½ä½ çš„åº“æ—¶æ·»åŠ ä½ çš„ DLL ç›®å½•ã€‚ è¯·æ³¨æ„ Windows 7 ç”¨æˆ·è¿˜éœ€è¦ç¡®ä¿ Windows æ›´æ–°åŒ… KB2533623 å·²å®‰è£…ï¼ˆè¿™ä¸€ç‚¹ä¹Ÿä¼šç”±å®‰è£…å™¨è¿›è¡ŒéªŒè¯ï¼‰ã€‚ ï¼ˆç”± Steve Dower åœ¨ [bpo-36085](https://bugs.python.org/issue?@action=redirect&bpo=36085) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å…³è”åˆ° pgen çš„å¤´æ–‡ä»¶å’Œå‡½æ•°åœ¨å…¶è¢«çº¯ Python å®ç°å–ä»£åå·²è¢«ç§»é™¤ã€‚ ï¼ˆç”± Pablo Galindo åœ¨ [bpo-36623](https://bugs.python.org/issue?@action=redirect&bpo=36623) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`types.CodeType`](types.md#types.CodeType "types.CodeType") åœ¨æ„é€ å™¨çš„ç¬¬äºŒä¸ªä½ç½®æ–°å¢äº†ä¸€ä¸ªå½¢å‚ ( _posonlyargcount_ ) ä»¥æ”¯æŒåœ¨ [**PEP 570**](https://peps.python.org/pep-0570/) ä¸­å®šä¹‰çš„ä»…é™ä½ç½®å‚æ•°ã€‚ ç¬¬ä¸€ä¸ªå‚æ•° ( _argcount_ ) ç°åœ¨è¡¨ç¤ºä½ç½®å‚æ•°çš„æ€»æ•°é‡ (åŒ…æ‹¬ä»…é™ä½ç½®å‚æ•°)ã€‚ [`types.CodeType`](types.md#types.CodeType "types.CodeType") ä¸­æ–°å¢çš„ `replace()` æ–¹æ³•å¯ç”¨äºè®©ä»£ç æ”¯æŒ future ç‰¹æ€§ã€‚

  * [`hmac.new()`](hmac.md#hmac.new "hmac.new") çš„ `digestmod` å½¢å‚ä¸å†é»˜è®¤ä½¿ç”¨ MD5 æ‘˜è¦ã€‚

### C API çš„å˜åŒ–Â¶

  * [`PyCompilerFlags`](veryhigh.md#c.PyCompilerFlags "PyCompilerFlags") ç»“æ„ä½“å¢åŠ äº†ä¸€ä¸ªæ–°çš„ _cf_feature_version_ å­—æ®µã€‚ å®ƒåº”å½“è¢«åˆå§‹åŒ–ä¸º `PY_MINOR_VERSION`ã€‚ è¯¥å­—æ®µé»˜è®¤ä¼šè¢«å¿½ç•¥ï¼Œå½“ä¸”ä»…å½“åœ¨ _cf_flags_ ä¸­è®¾ç½®äº† `PyCF_ONLY_AST` æ——æ ‡æ—¶æ‰ä¼šè¢«ä½¿ç”¨ã€‚ ï¼ˆç”± Guido van Rossum åœ¨ [bpo-35766](https://bugs.python.org/issue?@action=redirect&bpo=35766) ä¸­è´¡çŒ®ã€‚ï¼‰

  * `PyEval_ReInitThreads()` å‡½æ•°å·²è¢« C API ä¸­ç§»é™¤ã€‚ å®ƒä¸åº”è¢«æ˜¾å¼åœ°è°ƒç”¨ï¼šè¯·æ”¹ç”¨ [`PyOS_AfterFork_Child()`](10.C%20APIæ¥å£/sys.md#c.PyOS_AfterFork_Child "PyOS_AfterFork_Child")ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-36728](https://bugs.python.org/issue?@action=redirect&bpo=36728) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨ Unix ä¸Šï¼ŒC æ‰©å±•ä¸ä¼šå†è¢«é“¾æ¥åˆ° libpythonï¼Œä½† Android å’Œ Cygwin ä¾‹å¤–ã€‚ å½“ Python è¢«åµŒå…¥æ—¶ï¼Œ`libpython` ä¸å¯ä½¿ç”¨ `RTLD_LOCAL` åŠ è½½ï¼Œè€Œè¦æ”¹ç”¨ `RTLD_GLOBAL`ã€‚ ä¹‹å‰ä½¿ç”¨ `RTLD_LOCAL` å·²ç»ä¸å¯èƒ½åŠ è½½æœªé“¾æ¥åˆ° `libpython` çš„ C æ‰©å±•äº†ï¼Œä¾‹å¦‚é€šè¿‡ `Modules/Setup` çš„ `*shared*` éƒ¨åˆ†æ„å»ºçš„æ ‡å‡†åº“ C æ‰©å±•ã€‚ ï¼ˆç”± Victor Stinner åœ¨ [bpo-21536](https://bugs.python.org/issue?@action=redirect&bpo=21536) ä¸­è´¡çŒ®ã€‚ï¼‰

  * åœ¨è§£ææˆ–æ„å»ºå€¼æ—¶ï¼ˆä¾‹å¦‚ [`PyArg_ParseTuple()`](arg.md#c.PyArg_ParseTuple "PyArg_ParseTuple"), [`Py_BuildValue()`](arg.md#c.Py_BuildValue "Py_BuildValue"), [`PyObject_CallFunction()`](call.md#c.PyObject_CallFunction "PyObject_CallFunction") ç­‰ç­‰ï¼‰ä½¿ç”¨å½¢å¦‚ `#` çš„æ ¼å¼è€Œä¸å®šä¹‰ `PY_SSIZE_T_CLEAN` ç°åœ¨å°†ä¼šå¼•å‘ `DeprecationWarning`ã€‚ å®ƒå°†åœ¨ 3.10 æˆ– 4.0 ä¸­è¢«ç§»é™¤ã€‚ è¯·å‚é˜… [è§£æå‚æ•°å¹¶æ„å»ºå€¼å˜é‡](arg.md#arg-parsing) äº†è§£è¯¦æƒ…ã€‚ ï¼ˆç”± Inada Naoki åœ¨ [bpo-36381](https://bugs.python.org/issue?@action=redirect&bpo=36381) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å †åˆ†é…ç±»å‹çš„å®ä¾‹ï¼ˆä¾‹å¦‚ä½¿ç”¨ [`PyType_FromSpec()`](type.md#c.PyType_FromSpec "PyType_FromSpec") åˆ›å»ºçš„å®ä¾‹ï¼‰ä¼šä¿å­˜ä¸€ä¸ªå¯¹å…¶ç±»å‹å¯¹è±¡çš„å¼•ç”¨ã€‚ æå‡è¿™äº›ç±»å‹å¯¹è±¡å¼•ç”¨è®¡æ•°çš„æ“ä½œå·²ä» [`PyType_GenericAlloc()`](type.md#c.PyType_GenericAlloc "PyType_GenericAlloc") ç§»è‡³æ›´ä½å±‚çº§çš„å‡½æ•° [`PyObject_Init()`](allocation.md#c.PyObject_Init "PyObject_Init") å’Œ `PyObject_INIT()`ã€‚ è¿™ä½¿ç”¨é€šè¿‡This makes types created through [`PyType_FromSpec()`](type.md#c.PyType_FromSpec "PyType_FromSpec") æ‰€åˆ›å»ºç±»å‹çš„è¡Œä¸ºä¸ç®¡ç†ä»£ç ä¸­çš„å…¶ä»–ç±»ä¿æŒä¸€è‡´ã€‚

[é™æ€åˆ†é…ç±»å‹](typeobj.md#static-types) å°†ä¸å—å½±å“ã€‚

åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™åº”è¯¥éƒ½ä¸ä¼šæœ‰é™„å¸¦å½±å“ã€‚ ä½†æ˜¯ï¼Œåœ¨åˆ†é…å®ä¾‹åæ‰‹åŠ¨æå‡å¼•ç”¨è®¡æ•°çš„ç±»å‹ï¼ˆä¹Ÿè®¸æ˜¯ä¸ºäº†ç»•è¿‡æ¼æ´ï¼‰ç°åœ¨å¯èƒ½æ°¸è¿œä¸ä¼šè¢«é”€æ¯ã€‚ è¦é¿å…è¿™ç§æƒ…å†µï¼Œè¿™äº›ç±»éœ€è¦åœ¨å®ä¾‹æ’¤é”€åˆ†é…æœŸé—´åœ¨ç±»å‹å¯¹è±¡ä¸Šè°ƒç”¨ Py_DECREFã€‚

è¦æ­£ç¡®åœ°å°†è¿™äº›ç±»å‹ç§»æ¤åˆ° 3.8ï¼Œè¯·åº”ç”¨ä»¥ä¸‹ä¿®æ”¹ï¼š

    * åœ¨åˆ†é…å®ä¾‹ä¹‹ååœ¨ç±»å‹å¯¹è±¡ä¸Šç§»é™¤ [`Py_INCREF`](../c-api/refcounting.md#c.Py_INCREF "Py_INCREF") â€”â€” å¦‚æœæœ‰çš„è¯ã€‚ è¿™å¯èƒ½å‘ç”Ÿåœ¨è°ƒç”¨ [`PyObject_New`](../c-api/allocation.md#c.PyObject_New "PyObject_New"), [`PyObject_NewVar`](../c-api/allocation.md#c.PyObject_NewVar "PyObject_NewVar"), [`PyObject_GC_New()`](../c-api/gcsupport.md#c.PyObject_GC_New "PyObject_GC_New"), [`PyObject_GC_NewVar()`](../c-api/gcsupport.md#c.PyObject_GC_NewVar "PyObject_GC_NewVar") æˆ–ä»»ä½•å…¶ä»–ä½¿ç”¨ [`PyObject_Init()`](../c-api/allocation.md#c.PyObject_Init "PyObject_Init") æˆ– `PyObject_INIT()` çš„è‡ªå®šä¹‰åˆ†é…å™¨ä¹‹åã€‚

ç¤ºä¾‹:

        
                static foo_struct *
        foo_new(PyObject *type) {
            foo_struct *foo = PyObject_GC_New(foo_struct, (PyTypeObject *) type);
            if (foo == NULL)
                return NULL;
        #if PY_VERSION_HEX < 0x03080000
            // Workaround for Python issue 35810; no longer necessary in Python 3.8
            PY_INCREF(type)
        #endif
            return foo;
        }
        

    * ç¡®ä¿æ‰€æœ‰å †åˆ†é…ç±»å‹çš„è‡ªå®šä¹‰ `tp_dealloc` å‡½æ•°ä¼šå‡å°‘ç±»å‹çš„å¼•ç”¨è®¡æ•°ã€‚

ç¤ºä¾‹:

        
                static void
        foo_dealloc(foo_struct *instance) {
            PyObject *type = Py_TYPE(instance);
            PyObject_GC_Del(instance);
        #if PY_VERSION_HEX >= 0x03080000
            // This was not needed before Python 3.8 (Python issue 35810)
            Py_DECREF(type);
        #endif
        }
        

ï¼ˆç”± Eddie Elizondo åœ¨ [bpo-35810](https://bugs.python.org/issue?@action=redirect&bpo=35810) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`Py_DEPRECATED()`](10.C%20APIæ¥å£/intro.md#c.Py_DEPRECATED "Py_DEPRECATED") å®å·²ç»é’ˆå¯¹ MSVC å®ç°ã€‚ è¿™ä¸ªå®ç°åœ¨å¿…é¡»æ”¾åœ¨ç¬¦å·åç§°ä¹‹å‰ã€‚

ç¤ºä¾‹:

    
        Py_DEPRECATED(3.8) PyAPI_FUNC(int) Py_OldFunction(void);
    

ï¼ˆç”± Zackery Spytz åœ¨ [bpo-33407](https://bugs.python.org/issue?@action=redirect&bpo=33407) ä¸­è´¡çŒ®ã€‚ï¼‰

  * è§£é‡Šå™¨å°†ä¸å†å‡è£…æ”¯æŒè·¨å‘å¸ƒç‰ˆæœ¬çš„æ‰©å±•ç±»å‹äºŒè¿›åˆ¶å…¼å®¹æ€§ã€‚ ç”±ç¬¬ä¸‰æ–¹æ‰©å±•æ¨¡å—æ‰€å¯¼å‡ºçš„ [`PyTypeObject`](type.md#c.PyTypeObject "PyTypeObject") åº”å½“å…·æœ‰å½“å‰ Python ç‰ˆæœ¬æ‰€è¦æ±‚çš„æ‰€æœ‰æ§½ä½ï¼ŒåŒ…æ‹¬ [`tp_finalize`](typeobj.md#c.PyTypeObject.tp_finalize "PyTypeObject.tp_finalize") ([`Py_TPFLAGS_HAVE_FINALIZE`](typeobj.md#c.Py_TPFLAGS_HAVE_FINALIZE "Py_TPFLAGS_HAVE_FINALIZE") ä¸å†ä¼šåœ¨è¯»å– [`tp_finalize`](typeobj.md#c.PyTypeObject.tp_finalize "PyTypeObject.tp_finalize") ä¹‹å‰è¢«æ£€æŸ¥)ã€‚

ï¼ˆç”± Antoine Pitrou åœ¨ [bpo-32388](https://bugs.python.org/issue?@action=redirect&bpo=32388) ä¸­è´¡çŒ®ã€‚ï¼‰

  * å‡½æ•° `PyNode_AddChild()` å’Œ `PyParser_AddToken()` ç°åœ¨æ¥å—ä¸¤ä¸ªé¢å¤–çš„ `int` å‚æ•° _end_lineno_ å’Œ _end_col_offset_ ã€‚

  * å…è®¸ MinGW å·¥å…·ç›´æ¥é“¾æ¥åˆ° `python38.dll` çš„ `libpython38.a` æ–‡ä»¶å·²ä¸å†åŒ…å«äºæ ‡å‡†çš„ Windows åˆ†å‘åŒ…ä¸­ã€‚ å¦‚æœä½ éœ€è¦æ­¤æ–‡ä»¶ï¼Œå¯ä½¿ç”¨ `gendef` å’Œ `dlltool` å·¥å…·æ¥ç”Ÿæˆå®ƒï¼Œè¿™äº›å·¥å…·æ˜¯ MinGW binutils åŒ…çš„ä¸€éƒ¨åˆ†ï¼š
    
        gendef - python38.dll > tmp.def
    dlltool --dllname python38.dll --def tmp.def --output-lib libpython38.a
    

å·²å®‰è£…çš„ `pythonXY.dll` æ‰€åœ¨ä½ç½®å°†å–å†³äºå®‰è£…é€‰é¡¹ä»¥åŠ Windows çš„ç‰ˆæœ¬å’Œè¯­è¨€ã€‚ è¯·å‚é˜… [åœ¨Windowsä¸Šä½¿ç”¨ Python](4.%20åœ¨Windowsä¸Šä½¿ç”¨%20Python.md#using-on-windows) äº†è§£æ›´å¤šä¿¡æ¯ã€‚ è¯¥ç»“æœåº“åº”å½“æ”¾åœ¨ä¸ `pythonXY.lib` ç›¸åŒçš„ç›®å½•ä¸‹ï¼Œè¿™é€šå¸¸æ˜¯ä½ çš„ Python å®‰è£…è·¯å¾„ä¸‹çš„ `libs` ç›®å½•ã€‚

ï¼ˆç”± Steve Dower åœ¨ [bpo-37351](https://bugs.python.org/issue?@action=redirect&bpo=37351) ä¸­è´¡çŒ®ã€‚ï¼‰

### CPython å­—èŠ‚ç çš„æ”¹å˜Â¶

  * è§£é‡Šå™¨å¾ªç¯å·²é€šè¿‡å°†å—å †æ ˆå±•å¼€é€»è¾‘ç§»å…¥ç¼–è¯‘å™¨è·å¾—äº†ç®€åŒ–ã€‚ ç¼–è¯‘å™¨ç°åœ¨ä¼šå‘å‡ºæ˜¾å¼æŒ‡ä»¤æ¥è°ƒæ•´å€¼å †æ ˆå¹¶ä¸º [`break`](7.%20ç®€å•è¯­å¥.md#break), [`continue`](7.%20ç®€å•è¯­å¥.md#continue) å’Œ [`return`](7.%20ç®€å•è¯­å¥.md#return) è°ƒç”¨æ¸…é™¤ä»£ç ã€‚

ç§»é™¤äº†æ“ä½œç  `BREAK_LOOP`, `CONTINUE_LOOP`, `SETUP_LOOP` å’Œ `SETUP_EXCEPT`ã€‚ æ·»åŠ äº†æ–°çš„æ“ä½œç  `ROT_FOUR`, `BEGIN_FINALLY`, `CALL_FINALLY` å’Œ `POP_FINALLY`ã€‚ ä¿®æ”¹äº† `END_FINALLY` å’Œ `WITH_CLEANUP_START` çš„è¡Œä¸ºã€‚

ï¼ˆç”± Mark Shannon, Antoine Pitrou å’Œ Serhiy Storchaka åœ¨ [bpo-17611](https://bugs.python.org/issue?@action=redirect&bpo=17611) ä¸­è´¡çŒ®ã€‚ï¼‰

  * æ·»åŠ äº†æ–°çš„æ“ä½œç  [`END_ASYNC_FOR`](dis.md#opcode-END_ASYNC_FOR) ç”¨äºå¤„ç†å½“ç­‰å¾… [`async for`](8.%20å¤åˆè¯­å¥.md#async-for) å¾ªç¯çš„ä¸‹ä¸€é¡¹æ—¶å¼•å‘çš„å¼‚å¸¸ã€‚ ï¼ˆç”± Serhiy Storchaka åœ¨ [bpo-33041](https://bugs.python.org/issue?@action=redirect&bpo=33041) ä¸­è´¡çŒ®ã€‚ï¼‰

  * [`MAP_ADD`](dis.md#opcode-MAP_ADD) ç°åœ¨ä¼šé¢„æœŸå€¼ä¸ºæ ˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ è€Œé”®ä¸ºç¬¬äºŒä¸ªå…ƒç´ ã€‚ ä½œå‡ºæ­¤æ”¹å˜ä»¥ä½¿å¾—å­—å…¸æ¨å¯¼å¼èƒ½å¦‚ [**PEP 572**](https://peps.python.org/pep-0572/) æ‰€æè®®çš„é‚£æ ·ï¼Œé”®æ€»æ˜¯ä¼šåœ¨å€¼ä¹‹å‰è¢«æ±‚å€¼ã€‚ ï¼ˆç”± JÃ¶rn Heissler åœ¨ [bpo-35224](https://bugs.python.org/issue?@action=redirect&bpo=35224) ä¸­è´¡çŒ®ã€‚ï¼‰

### æ¼”ç¤ºå’Œå·¥å…·Â¶

æ·»åŠ äº†ä¸€ä¸ªæ£€æµ‹è„šæœ¬ç”¨äºå¯¹è®¿é—®å˜é‡çš„ä¸åŒæ–¹å¼è¿›è¡Œè®¡æ—¶: `Tools/scripts/var_access_benchmark.py`ã€‚ ï¼ˆç”± Raymond Hettinger åœ¨ [bpo-35884](https://bugs.python.org/issue?@action=redirect&bpo=35884) ä¸­è´¡çŒ®ã€‚ï¼‰

ä»¥ä¸‹æ˜¯è‡ª Python 3.3 ä»¥æ¥æ€§èƒ½æå‡æƒ…å†µçš„æ€»ç»“:

    
    
~~~
Python version                       3.3     3.4     3.5     3.6     3.7     3.8
--------------                       ---     ---     ---     ---     ---     ---

Variable and attribute read access:
    read_local                       4.0     7.1     7.1     5.4     5.1     3.9
    read_nonlocal                    5.3     7.1     8.1     5.8     5.4     4.4
    read_global                     13.3    15.5    19.0    14.3    13.6     7.6
    read_builtin                    20.0    21.1    21.6    18.5    19.0     7.5
    read_classvar_from_class        20.5    25.6    26.5    20.7    19.5    18.4
    read_classvar_from_instance     18.5    22.8    23.5    18.8    17.1    16.4
    read_instancevar                26.8    32.4    33.1    28.0    26.3    25.4
    read_instancevar_slots          23.7    27.8    31.3    20.8    20.8    20.2
    read_namedtuple                 68.5    73.8    57.5    45.0    46.8    18.4
    read_boundmethod                29.8    37.6    37.9    29.6    26.9    27.7

Variable and attribute write access:
    write_local                      4.6     8.7     9.3     5.5     5.3     4.3
    write_nonlocal                   7.3    10.5    11.1     5.6     5.5     4.7
    write_global                    15.9    19.7    21.2    18.0    18.0    15.8
    write_classvar                  81.9    92.9    96.0   104.6   102.1    39.2
    write_instancevar               36.4    44.6    45.8    40.0    38.9    35.5
    write_instancevar_slots         28.7    35.6    36.1    27.3    26.6    25.7

Data structure read access:
    read_list                       19.2    24.2    24.5    20.8    20.8    19.0
    read_deque                      19.9    24.7    25.5    20.2    20.6    19.8
    read_dict                       19.7    24.3    25.7    22.3    23.0    21.0
    read_strdict                    17.9    22.6    24.3    19.5    21.2    18.9

Data structure write access:
    write_list                      21.2    27.1    28.5    22.5    21.6    20.0
    write_deque                     23.8    28.7    30.1    22.7    21.8    23.5
    write_dict                      25.9    31.4    33.3    29.3    29.2    24.7
    write_strdict                   22.9    28.4    29.9    27.5    25.2    23.1

Stack (or queue) operations:
    list_append_pop                144.2    93.4   112.7    75.4    74.2    50.8
    deque_append_pop                30.4    43.5    57.0    49.4    49.2    42.5
    deque_append_popleft            30.8    43.7    57.3    49.7    49.7    42.8

Timing loop:
    loop_overhead                    0.3     0.5     0.6     0.4     0.3     0.3
~~~

åŸºå‡†æµ‹è¯•æ˜¯åœ¨ [IntelÂ® Coreâ„¢ i7-4960HQ å¤„ç†å™¨](https://ark.intel.com/content/www/us/en/ark/products/76088/intel-core-i7-4960hq-processor-6m-cache-up-to-3-80-ghz.md) ä¸Šè¿è¡Œä» [python.org](https://www.python.org/downloads/macos/) è·å–çš„ macOS 64 ä½ç¼–è¯‘ç‰ˆå¾—åˆ°çš„æ•°æ®ã€‚ è¯¥åŸºå‡†æµ‹è¯•è„šæœ¬æ˜¾ç¤ºæ—¶é—´ä»¥çº³ç§’ä¸ºå•ä½ã€‚

## Python 3.8.1 ä¸­çš„é‡è¦å˜åŒ–Â¶

å‡ºäºé‡è¦çš„å®‰å…¨æ€§è€ƒé‡ï¼Œ[`asyncio.loop.create_datagram_endpoint()`](asyncio-eventloop.md#asyncio.loop.create_datagram_endpoint "asyncio.loop.create_datagram_endpoint") çš„ _reuse_address_ å½¢å‚ä¸å†è¢«æ”¯æŒã€‚ è¿™æ˜¯ç”± UDP ä¸­çš„å¥—æ¥å­—é€‰é¡¹ `SO_REUSEADDR` çš„è¡Œä¸ºå¯¼è‡´çš„ã€‚ æ›´å¤šç»†èŠ‚è¯·å‚é˜… `loop.create_datagram_endpoint()` çš„æ–‡æ¡£ã€‚ ï¼ˆç”± Kyle Stanley, Antoine Pitrou å’Œ Yury Selivanov åœ¨ [bpo-37228](https://bugs.python.org/issue?@action=redirect&bpo=37228) ä¸­è´¡çŒ®ã€‚ã€‚ï¼‰

## Python 3.8.8 ä¸­çš„é‡è¦å˜åŒ–Â¶

Earlier Python versions allowed using both `;` and `&` as query parameter separators in [`urllib.parse.parse_qs()`](urllib.parse.md#urllib.parse.parse_qs "urllib.parse.parse_qs") and [`urllib.parse.parse_qsl()`](urllib.parse.md#urllib.parse.parse_qsl "urllib.parse.parse_qsl"). Due to security concerns, and to conform with newer W3C recommendations, this has been changed to allow only a single separator key, with `&` as the default. This change also affects `cgi.parse()` and `cgi.parse_multipart()` as they use the affected functions internally. For more details, please see their respective documentation. (Contributed by Adam Goldschmidt, Senthil Kumaran and Ken Jin in [bpo-42967](https://bugs.python.org/issue?@action=redirect&bpo=42967).)

## Python 3.8.12 ä¸­çš„é‡è¦å˜åŒ–Â¶

ä» Python 3.8.12 å¼€å§‹ [`ipaddress`](3.æ ‡å‡†åº“/ipaddress.md#module-ipaddress "ipaddress: IPv4/IPv6 manipulation library.") æ¨¡å—ä¸å†æ¥å— IPv4 åœ°å€å­—ç¬¦ä¸²ä¸­æœ‰ä»»ä½•å‰ç¼€çš„é›¶ã€‚ å‰ç¼€çš„é›¶æœ‰æ­§ä¹‰ä¸”ä¼šè¢«æŸäº›åº“è§£è¯»ä¸ºå…«è¿›åˆ¶æ•°å­—ã€‚ ä¾‹å¦‚æ—§ç‰ˆå‡½æ•° [`socket.inet_aton()`](socket.md#socket.inet_aton "socket.inet_aton") å°±å°†å‰ç¼€çš„é›¶è§†ä¸ºå…«è¿›åˆ¶æ•°å­—ã€‚ æœ€æ–° [`inet_pton()`](socket.md#socket.inet_pton "socket.inet_pton") çš„ glibc å®ç°åˆ™ä¸æ¥å—ä»»ä½•å‰ç¼€çš„é›¶ã€‚

ï¼ˆæœ€åˆç”± Christian Heimes åœ¨ [bpo-36384](https://bugs.python.org/issue?@action=redirect&bpo=36384) ä¸­è´¡çŒ®ï¼Œå¹¶ç”± Achraf Merzouki å‘ä¸‹ç§»æ¤åˆ° 3.8ã€‚ï¼‰

