# C API 的稳定性¶

除非另有文档说明，Python 的 C API 将遵循 [**PEP 387**](https://peps.python.org/pep-0387/) 所描述的向下兼容策略。 对它的大部分改变都是源代码级兼容的（通常只会增加新的 new API）。 改变现有 API 或移除 API 只会在弃用期结束之后或需修复严重问题时才会发生。

CPython 的应用二进制接口（ABI）可以跨小版本实现前后兼容（只要以同样方式编译；参见下面的 平台的考虑 ）。因此，用 Python 3.10.0 编译的代码可以在 3.10.8 上运行，反之亦然，但针对 3.9.x 和 3.10.x 则需分别进行编译。

存在具有不同稳定性预期的两个 C API 层次：

  * 不稳定 API，可能在次要版本中发生改变而没有弃用期。 它的名称会以 `PyUnstable` 前缀来标记。

  * 受限 API，将会在多个次要版本间保持兼容。 当定义了 `Py_LIMITED_API` 时，将只有这个子集会从 `Python.h` 对外公开。

这些将在下文中更详细地讨论。

带有一个下划线前缀的名称，如 `_Py_InternalState`，是可能不经通知就改变甚至是在补丁发布版中改变的私有 API。 如果你需要使用这样的 API，请考虑联系 [CPython 开发团队](https://discuss.python.org/c/core-dev/c-api/30) 来讨论为你的应用场景添加公有 API。

## 不稳定 C API¶

任何名称带有 `PyUnstable` 前缀的 API 都将对外公开 CPython 的实现细节，并可能不加弃用警告即在次要版本中发生改变（例如从 3.9 到 3.10）。 但是，它不会在问题修正发布版中改变（例如从 3.10.0 到 3.10.1）。

它通常是针对专门的，低层级的工具如调试器等。

使用此 API 的项目需要跟随 CPython 开发进程并花费额外的努力来适应改变。

## 应用程序二进制接口的稳定版¶

简单起见，本文档只讨论了 _扩展_ ，但受限 API 和稳定 ABI 对于 API 的所有用法都能发挥相同的作用 – 例如嵌入版的 Python 等。

### 受限 C API¶

Python 3.2 引入了 _受限 API_ ，它是 Python 的 C API 的一个子集。 只使用受限 API 扩展可以一次编译即适用于多个 Python 版本。 受限 API 的内容 如下所示。

Py_LIMITED_API¶  

    

~~~
