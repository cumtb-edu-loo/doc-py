# `cmath` \--- 关于复数的数学函数¶

* * *

本模块提供了一些适用于复数的数学函数。 本模块中的函数接受整数、浮点数或复数作为参数。 它们也接受任意具有 [`__complex__()`](datamodel.md#object.__complex__ "object.__complex__") 或 [`__float__()`](datamodel.md#object.__float__ "object.__float__") 方法的 Python 对象：这些方法分别用于将对象转换为复数或浮点数，然后再将函数应用于转换后的结果。

备注

对于涉及分支切割的函数，我们会有确定如何在切割本身上定义这些函数的问题。 根据 Kahan 的论文 "Branch cuts for complex elementary functions"，以及 C99 的附录 G 和之后的 C 标准，我们使用零符号来区别分支切割的一侧和另一侧：对于沿实轴（一部分）的分支切割我们要看虚部的符号，而对于沿虚轴的分支切割我们则要看实部的符号。

例如，`cmath.sqrt()` 函数有一个沿着负实轴的分支切割。 参数 `complex(-2.0, -0.0)` 会被当作位于切支切割的 _下方_ 来处理，因而将给出一个负虚轴上的结果。

    
    
~~~shell
>>> cmath.sqrt(complex(-2.0, -0.0))
-1.4142135623730951j
~~~

但是参数 `complex(-2.0, 0.0)` 则会被当作是位于支割线的上方来处理:

    
    
~~~shell
>>> cmath.sqrt(complex(-2.0, 0.0))
1.4142135623730951j
~~~

## 到极坐标和从极坐标的转换¶

使用 _矩形坐标_ 或 _笛卡尔坐标_ 在内部存储 Python 复数 `z`。 这完全取决于它的 _实部_ `z.real` 和 _虚部_ `z.imag`。 换句话说:

    
    
~~~
z == z.real + z.imag*1j
~~~

_极坐标_ 提供了另一种复数的表示方法。在极坐标中，一个复数 _z_ 由模量 _r_ 和相位角 _phi_ 来定义。模量 _r_ 是从 _z_ 到坐标原点的距离，而相位角 _phi_ 是以弧度为单位的，逆时针的，从正X轴到连接原点和 _z_ 的线段间夹角的角度。

下面的函数可用于原生直角坐标与极坐标的相互转换。

cmath.phase( _x_ )¶

    

~~~
将 _x_ 的相位 (或称 _x_ 的 _参数_ ) 作为一个浮点数返回。 `phase(x)` 等价于 `math.atan2(x.imag, x.real)`。 结果将位于 [- _π_ , _π_ ] 范围内，且此操作的支割线将位于负实轴上。 结果的符号将与 `x.imag` 的符号相同，即使 `x.imag` 的值为零:
~~~
    
    
~~~shell
>>> phase(complex(-1.0, 0.0))
3.141592653589793
>>> phase(complex(-1.0, -0.0))
-3.141592653589793
~~~

备注

一个复数 _x_ 的模数（绝对值）可以通过内置函数 [`abs()`](functions.md#abs "abs") 计算。没有单独的 `cmath` 模块函数用于这个操作。

cmath.polar( _x_ )¶

    

~~~
在极坐标中返回 _x_ 的表达方式。返回一个数对 `(r, phi)`， _r_ 是 _x_ 的模数， _phi_ 是 _x_ 的相位角。 `polar(x)` 相当于 `(abs(x), phase(x))`。

cmath.rect( _r_ , _phi_ )¶
~~~
    

~~~
通过极坐标的 _r_ 和 _phi_ 返回复数 _x_ 。相当于 `r * (math.cos(phi) + math.sin(phi)*1j)`。

## 幂函数与对数函数¶

cmath.exp( _x_ )¶
~~~
    

~~~
返回 _e_ 的 _x_ 次方， _e_ 是自然对数的底数。

cmath.log( _x_ [, _base_ ])¶
~~~
    

~~~
返回 _x_ 的以 _base_ 为底的对数。 如果没有指定 _base_ ，则返回 _x_ 的自然对数。 存在一条支割线，即沿着负实轴从 0 到 -∞。

cmath.log10( _x_ )¶
~~~
    

~~~
返回底数为 10 的 _x_ 的对数。它具有与 `log()` 相同的支割线。

cmath.sqrt( _x_ )¶
~~~
    

~~~
返回 _x_ 的平方根。 它具有与 `log()` 相同的支割线。

## 三角函数¶

cmath.acos( _x_ )¶
~~~
    

~~~
返回 _x_ 的反余弦。 存在两条支割线：一条沿着实轴从 1 到 ∞。 另一条沿着实轴从 -1 向左延伸到 -∞。

cmath.asin( _x_ )¶
~~~
    

~~~
返回 _x_ 的反正弦。它与 `acos()` 有相同的支割线。

cmath.atan( _x_ )¶
~~~
    

~~~
返回 _x_ 的反正切。 存在两条支割线：一条沿着虚轴从 `1j` 延伸到 `∞j`。 另一条沿着虚轴从 `-1j` 延伸到 `-∞j`。

cmath.cos( _x_ )¶
~~~
    

~~~
返回 _x_ 的余弦。

cmath.sin( _x_ )¶
~~~
    

~~~
返回 _x_ 的正弦。

cmath.tan( _x_ )¶
~~~
    

~~~
返回 _x_ 的正切。

## 双曲函数¶

cmath.acosh( _x_ )¶
~~~
    

~~~
返回 _x_ 的反双曲余弦。 存在一条支割线，沿着实轴从 1 向左延伸到 -∞。

cmath.asinh( _x_ )¶
~~~
    

~~~
返回 _x_ 的反双曲正弦。 存在两条支割线：一条沿着虚轴从 `1j` 延伸到 `∞j`。 另一条沿着虚轴从 `-1j` 延伸到 `-∞j`。

cmath.atanh( _x_ )¶
~~~
    

~~~
返回 _x_ 反双曲正切。 存在两条支割线：一条沿着实轴从 `1` 延伸到 `∞`。 另一条沿着实轴从 `-1` 延伸到 `-∞`。

cmath.cosh( _x_ )¶
~~~
    

~~~
返回 _x_ 的双曲余弦值。

cmath.sinh( _x_ )¶
~~~
    

~~~
返回 _x_ 的双曲正弦值。

cmath.tanh( _x_ )¶
~~~
    

~~~
返回 _x_ 的双曲正切值。

## 分类函数¶

cmath.isfinite( _x_ )¶
~~~
    

~~~
如果 _x_ 的实部和虚部都是有限的，则返回 `True`，否则返回 `False`。

在 3.2 版本加入.

cmath.isinf( _x_ )¶
~~~
    

~~~
如果 _x_ 的实部或者虚部是无穷大的，则返回 `True`，否则返回 `False`。

cmath.isnan( _x_ )¶
~~~
    

~~~
如果 _x_ 的实部或者虚部是 NaN，则返回 `True` ，否则返回 `False`。

cmath.isclose( _a_ , _b_ , _*_ , _rel_tol =1e-09_, _abs_tol =0.0_)¶
~~~
    

~~~
若 _a_ 和 _b_ 的值比较接近则返回 `True`，否则返回 `False`。

根据给定的绝对和相对容差确定两个值是否被认为是接近的。

_rel_tol_ 是相对容差 —— 它是 _a_ 和 _b_ 之间允许的最大差值，相对于 _a_ 或 _b_ 的较大绝对值。例如，要设置5％的容差，请传递 `rel_tol=0.05` 。默认容差为 `1e-09`，确保两个值在大约9位十进制数字内相同。 _rel_tol_ 必须大于零。

_abs_tol_ 是最小绝对容差 —— 对于接近零的比较很有用。 _abs_tol_ 必须至少为零。

如果没有错误发生，结果将是： `abs(a-b) <= max(rel_tol * max(abs(a), abs(b)), abs_tol)` 。

IEEE 754特殊值 `NaN` ， `inf` 和 `-inf` 将根据IEEE规则处理。具体来说， `NaN` 不被认为接近任何其他值，包括 `NaN` 。 `inf` 和 `-inf` 只被认为接近自己。

在 3.5 版本加入.

参见

[**PEP 485**](https://peps.python.org/pep-0485/) —— 用于测试近似相等的函数

## 常量¶

cmath.pi¶
~~~
    

~~~
数学常数 _π_ ，作为一个浮点数。

cmath.e¶
~~~
    

~~~
数学常数 _e_ ，作为一个浮点数。

cmath.tau¶
~~~
    

~~~
数学常数 _τ_ ，作为一个浮点数。

在 3.6 版本加入.

cmath.inf¶
~~~
    

~~~
浮点正无穷大。相当于 `float('inf')`。

在 3.6 版本加入.

cmath.infj¶
~~~
    

~~~
具有零实部和正无穷虚部的复数。相当于 `complex(0.0, float('inf'))`。

在 3.6 版本加入.

cmath.nan¶
~~~
    

~~~
浮点“非数字”（NaN）值。相当于 `float('nan')`。

在 3.6 版本加入.

cmath.nanj¶
~~~
    

~~~
